{"version":3,"sources":["services/Constants.js","services/CashService.js","settings/AppSettingsService.js","services/AjaxService.js","services/BeanContextAware.js","store.js","services/PollService.js","Home.js","building-blocks/RenderForm.js","auth/PhoneForm.js","auth/confirmCode.js","building-blocks/Info.js","building-blocks/PicWrapper.js","userView/userView.js","services/MatchDecoratorService.js","building-blocks/OnePicWrapper.js","userView/friends.js","building-blocks/BtnLink.js","userView/oneFriend.js","userView/MoreFriends.js","userView/FriendRequests.js","settings/SelectPollInterval.js","settings/SelectTextColor.js","settings/SelectBackgroundColor.js","settings/Checkbox.js","settings/AppSettings.js","building-blocks/header.js","chat/enterText.js","chat/messageWrapper.js","chat/Select.js","chat/chat.js","App.js","serviceWorker.js","index.js"],"names":["ipAdress","Const","URLS","BASE_URL","AUTH","PHONE","GET_TOKEN","UPDATES","PROFILE","USER","SEND_MESSAGE","SEND_LOCATION","NEW_FRIENDS","SEND_SEEN","FAST_MATCH","LIKE","PASS","LOCAL_CASH_VAR_NAME","AUTH_HEADER_NAME","PHONE_HEADER_NAME","lsobj","result","cashVarName","ls","localStorage","getItem","setItem","JSON","stringify","parse","error","console","log","removeItem","getLocalStorage","setLocalStorage","obj","Error","private_____persistLocalStorage","parseLocalStorage","React","Component","props","applySettingsFromLocalStorage","CashService","textColor","getSetting","textColors","applyClass","document","body","bgColor","bgColors","persistSetting","settingName","settingObject","phone","settings","element","colors","selectedColor","forEach","color","classList","remove","class","add","getInputStyleClasses","updatePollInterval","isToShowPhotos","execute","method","url","data","headers","axios","doPost","getHeaders","doGet","authHeaderName","phoneHeaderName","bean","state","beanId","context","warn","get","reducer","combineReducers","form","reduxFormReducer","store","window","devToolsExtension","createStore","functionsQueue","addToFunctionsQ","funct","push","length","shift","funcToCall","getStore","getMatchById","id","matches","update","i","_id","addToStore","key","value","checkIfLogged","onSuccess","onFailure","AjaxService","then","getUpdates","getLastActivityDate","startUpdatePoll","AppSettingsService","catch","e","mergeUpdates","updates","matchUpdate","oldMatch","addToUnreadMessagesBadge","newMsgs","messages","newMsgsCount","y","splice","concat","lastSeenMsg","seen","last_seen_msg_id","lastActivityDate","last_activity_date","markLastUneadMessages","newLastSeenMsgId","oldLastSeenMsgId","localUser","profile","ind","msg","from","mtch","header","BeanContextAware","addMsgMatch","lastDate","chat1","triggerRenderFunc","changeButtonVisibility","isVisible","stopUpdatePoll","seconds","pollInterval","pollIntervalObj","setInterval","clearTimeout","Home","hits","isLoading","to","eachComponent","input","label","type","placeholder","meta","touched","className","RenderForm","options","this","handleSubmit","fields","RenderFieldWrappedInstance","reduxForm","onSubmit","map","op","name","Field","onChange","onChangeFun","component","PhoneForm","handleChange","event","target","sendPhoneNum","history","preventDefault","isToUseCurrentSession","PollService","confirm","optns","withRouter","ConfirmCode","confirmToken","phoneNumber","status","token","Info","args","person","country","pos_info","age","birth_date","substring","city","distance_mi","bio","education","job","PicWrapper","click","photos","setState","imgSrc","personName","firstPic","onClick","src","alt","UserView","pos","lat","lon","image","info","pointVals","pointMode","banner","control","values","point","newMsgObj","postLocation","onRemove","bindMap","startPort","overlayAll","showControls","showInputs","useDynamic","precision","columns","Header","accessor","sortable","defaultPageSize","showPagination","style","width","height","getTdProps","rowInfo","column","instance","handleOriginal","getUserData","match","callbackFunc","userId","user","results","OnePicWrapper","doClick","changeHandler","condition","Friends","sortByLastActivityDate","a","b","timeA","Date","getTime","applySorting","arrToBeSorted","sortingFunc","sort","MatchDecoratorService","pathname","showUser","msgMatches","friends","persons","prsn","picProps","firstName","lastName","pageSize","BtnLink","OneFriend","location","MoreFriends","getNewFriends","allFr","pass","like","abortController","AbortController","InfoWrapper","Pic","one","FriendRequests","getFriendRequests","abort","SelectPollInterval","interval","onSelectPollInterval","styles","SelectTextColor","selected","triggerRender","SelectBackgroundColor","Checkbox","doChangeState","checked","defaultChecked","AppSettings","val","toggleShowPicsCheckbox","changeState","findInMsgMatches","toggleFlashTabTitle","len","removeMsgMatch","flashIntervalObj","startFlashTabTitle","stopFlashTabTitle","initialTitle","title","goChat","Btn","exact","activeClassName","isVisibleNewMsgs","EnterText","createMessage","dt","created_date","toISOString","match_id","message","sent_date","timestamp","onKeyPress","index","oneMatch","friendId","elem","srcElement","getStyles","inputProps","MessageWrapper","msgDateObj","timeStr","toLocaleTimeString","dateStr","toLocaleDateString","isSeen","showDate","date","setTimeout","Select","numberMsgShown","parseInt","Chat","prepareMessages","allMsgs","transformedMsg","theirs","mine","sendSeen","msgWrapped","deleteFromHeader","matchId","inputStyles","present","reorderedMessages","bordered","App","paddingTop","path","render","Boolean","hostname","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.2ac978cc.chunk.js","sourcesContent":["let ipAdress = 'http://localhost:8484/';\n\nconst Const = {\n  URLS: {\n    BASE_URL: ipAdress,\n    AUTH: {\n      PHONE: ipAdress + 'requestCode',\n      GET_TOKEN: ipAdress + 'getToken/'\n    },\n    UPDATES: ipAdress + 'updates',\n    PROFILE: ipAdress + 'profile',\n    USER: ipAdress + 'user/',\n    SEND_MESSAGE: ipAdress + 'postMessage',\n    SEND_LOCATION: ipAdress + 'location',\n    NEW_FRIENDS: ipAdress + 'new-friends',\n    SEND_SEEN: ipAdress + 'seen/',\n    FAST_MATCH: ipAdress + 'fast-match',\n    LIKE: ipAdress + 'like/',\n    PASS: ipAdress + 'pass/'\n  },\n  LOCAL_CASH_VAR_NAME: '__TnDr__',\n  AUTH_HEADER_NAME: 'X-Auth-Token',\n  PHONE_HEADER_NAME: 'phone-number'\n}\n\nexport default Const;\n","import React from 'react';\nimport Const from './Constants';\n\nclass CashService extends React.Component {\n\n  [Const.PHONE_HEADER_NAME] = null;\n  [Const.AUTH_HEADER_NAME] = null;\n\n  lsobj = (() => {\n    let cashVarName = Const.LOCAL_CASH_VAR_NAME;\n    let ls = localStorage.getItem(cashVarName);\n    if (!ls) {\n      ls = {}\n      localStorage.setItem(cashVarName, JSON.stringify(ls));\n      return ls;\n    }\n    let result;\n    try {\n      result = JSON.parse(ls);\n    } catch (error) {\n      console.log(error);\n      localStorage.removeItem(cashVarName);\n    }\n    return result;\n  })();\n\n  getLocalStorage = () => {\n    return this.lsobj;\n  };\n\n  setLocalStorage = (obj) => {\n    if (typeof obj !== 'object') {\n      throw new Error(\"'obj' must be of type 'object'! \");\n    }\n    this.private_____persistLocalStorage(obj);\n    this.lsobj = obj;\n  };\n\n  parseLocalStorage = () => {\n    let ls = localStorage.getItem(Const.LOCAL_CASH_VAR_NAME);\n    return JSON.parse(ls);\n  };\n\n  private_____persistLocalStorage = (obj) => {\n    localStorage.setItem(Const.LOCAL_CASH_VAR_NAME, JSON.stringify(obj));\n  };\n\n}\n\nexport default new CashService();\n","import React from 'react';\r\nimport CashService from '../services/CashService';\r\nimport Const from '../services/Constants';\r\n\r\n//this singleton applies settings at startup:\r\nclass AppSettingsService extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.textColors = [\r\n      { \"name\": 'Gray', \"class\": 'text-muted' },\r\n      { \"name\": 'White', \"class\": 'text-white' },\r\n      { \"name\": 'Dark', \"class\": 'text-dark' },\r\n      { \"name\": 'Black', \"class\": 'text-body' }\r\n    ]\r\n\r\n    this.bgColors = [\r\n      { \"name\": 'Gray', \"class\": 'bg-secondary' },\r\n      { \"name\": 'Dark', \"class\": 'bg-dark' },\r\n      { \"name\": 'Light', \"class\": 'bg-light' }\r\n    ]\r\n\r\n    this.updatePollInterval = 20000;\r\n    this.isToShowPhotos = true;\r\n  }\r\n\r\n  applySettingsFromLocalStorage = () => {\r\n    let ls = CashService.getLocalStorage();\r\n    let phone = CashService[Const.PHONE_HEADER_NAME];\r\n\r\n    if (!ls[phone]) {\r\n      return;\r\n    }\r\n\r\n    let textColor = this.getSetting(\"textColor\") || this.textColors[0];\r\n    this.applyClass(document.body, this.textColors, textColor);\r\n\r\n    let bgColor = this.getSetting(\"bgColor\") || this.bgColors[0];\r\n    this.applyClass(document.body, this.bgColors, bgColor);\r\n  }\r\n\r\n  persistSetting = (settingName, settingObject) => {\r\n    let ls = CashService.getLocalStorage();\r\n    let phone = CashService[Const.PHONE_HEADER_NAME];\r\n\r\n    if (!phone || !ls[phone]) {\r\n      return;\r\n    }\r\n\r\n    let settings = ls[phone][\"settings\"];\r\n    if (!settings) {\r\n      settings = {};\r\n    }\r\n\r\n    settings[settingName] = settingObject;\r\n    ls[phone][\"settings\"] = settings;\r\n    CashService.setLocalStorage(ls);\r\n  }\r\n\r\n  getSetting = (settingName) => {\r\n    let ls = CashService.getLocalStorage();\r\n    let phone = CashService[Const.PHONE_HEADER_NAME];\r\n\r\n    if (!phone || !ls[phone]) {\r\n      return;\r\n    }\r\n    let settings = ls[phone][\"settings\"];\r\n    if (!settings) {\r\n      return;\r\n    }\r\n    return settings[settingName];\r\n  }\r\n\r\n  applyClass = (element, colors, selectedColor) => {\r\n    colors.forEach(color => {\r\n      element.classList.remove(color.class);\r\n    });\r\n\r\n    element.classList.add(selectedColor);\r\n  }\r\n\r\n  getInputStyleClasses = () => {\r\n    return \"form-control \" + (this.getSetting(\"textColor\") || \" \") +\r\n      \" \" + (this.getSetting(\"bgColor\") || \"\");\r\n  }\r\n}\r\nexport default new AppSettingsService();\r\n","import React from 'react';\nimport axios from 'axios';\nimport Const from './Constants';\nimport CashService from './CashService';\n\nclass AjaxService extends React.Component {\n\n  execute = (method, url, data, headers) => {\n    return axios({\n      method: method,\n      url: url,\n      data: data,\n      headers: headers\n    });\n  };\n\n  doPost = (url, data, headers) => {\n    return this.execute('post', url, data, this.getHeaders(headers));\n  };\n\n  doGet = (url, headers) => {\n    return this.execute('get', url, {}, this.getHeaders(headers));\n  };\n\n  getHeaders = (headers) => {\n    let authHeaderName = Const.AUTH_HEADER_NAME;\n    let phoneHeaderName = Const.PHONE_HEADER_NAME;\n    if (!headers) {\n      headers = {};\n    }\n\n    if (CashService[phoneHeaderName]) {\n      headers[phoneHeaderName] = CashService[phoneHeaderName];\n    }\n\n    if (CashService[authHeaderName]) {\n      headers[authHeaderName] = CashService[authHeaderName];\n    }\n    return headers;\n  };\n}\n\nexport default new AjaxService();\n","import React from 'react';\n\nclass BeanContextAware extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.context= {};\n  };\n\n  add = (bean) => {\n    if (!bean || !bean.state) {\n      throw new Error(\"Not allowed 'null' values for 'bean': \" + bean + \" !\");\n    }\n    let beanId = bean.state.beanId || bean.props.beanId;\n    if (!beanId) {\n      throw new Error(\"Not allowed 'null' value for 'beanId' \" + beanId  + \" !\" );\n    }\n    if (this.context[beanId]) {\n      console.warn(\"Bean with 'beanId': \" + beanId + \"is already registered under BeanContextAware!\");\n    }\n    this.context[beanId] = bean;\n  }\n\n  get = (beanId) => {\n    if (!beanId ) {\n      throw new Error(\"Not allowed 'null' value for 'beanId' \" + beanId + \" !\" );\n    }\n    return this.context[beanId];\n  }\n\n  remove = (bean) => {\n    if (!bean) {\n      throw new Error(\"Not allowed 'null' value for 'bean' \" + bean + \" !\" );\n    }\n    if ( typeof bean === 'string' ) {\n        delete this.context[bean];\n        return;\n    }\n    let beanId = bean.state.beanId || bean.props.beanId;\n    delete this.context[beanId];\n  }\n}\nexport default new BeanContextAware();\n","import { createStore, combineReducers } from 'redux';\nimport { reducer as reduxFormReducer } from 'redux-form';\n\nconst reducer = combineReducers({\n  form: reduxFormReducer // mounted under \"form\"\n})\nconst store =\n  (window.devToolsExtension ? window.devToolsExtension()(createStore) : createStore)(reducer)\n\nconst functionsQueue = [];\n\nlet addToFunctionsQ = (funct) => {\n  functionsQueue.push(funct);\n\n  while (functionsQueue.length > 0) {\n    let funcToCall = functionsQueue.shift()\n    funcToCall();\n  }\n}\n\nstore.getStore = () => {\n  // add dummy function as a placeholder\n  addToFunctionsQ(() => { });\n  return store;\n}\n\nstore.getMatchById = (id) => {\n  if (!id) {\n    throw new Error(\"'id' is not allowed to be: \" + id);\n  }\n  let matches = store.getStore().update.data.matches\n  for (var i = 0; i < matches.length; i++) {\n    if (id === matches[i]._id) {\n      return matches[i];\n    }\n  }\n  return null;\n}\n\nstore.addToStore = (key, value) => {\n  if (!key || typeof (key) != 'string') {\n    throw new Error(\"Only objects of type 'string' are allowed!\");\n  }\n\n  addToFunctionsQ(\n    function () {\n      store[key] = value;\n    }\n  );\n}\n\nexport default store;\n","import React from 'react';\nimport Const from './Constants';\nimport AjaxService from './AjaxService';\nimport BeanContextAware from './BeanContextAware';\nimport AppSettingsService from '../settings/AppSettingsService';\nimport store from '../store';\n\nclass PollService extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n\n    this.last_activity_date = \"1984-08-01T00:00:00.000Z\";\n  };\n\n  checkIfLogged = (headers, onSuccess, onFailure) => {\n    let promise = AjaxService.doGet(Const.URLS.PROFILE, headers)\n    promise.then((data) => {\n      store.addToStore('profile', data);\n      onSuccess()\n      this.getUpdates(this.getLastActivityDate());\n      this.startUpdatePoll(AppSettingsService.updatePollInterval);\n\n    }).catch((e) => {\n      console.error(e);\n      onFailure()\n    })\n  }\n\n  mergeUpdates = (store, updates) => {\n    let matches = updates.data.matches;\n\n    for (let i = 0; i < matches.length; i++) {\n      let matchUpdate = matches[i];\n      let oldMatch = store.getMatchById(matchUpdate._id);\n      //merge brand new matches:\n      if (!oldMatch) {\n        store.getStore().update.data.matches.push(matchUpdate);\n        this.addToUnreadMessagesBadge(matchUpdate);\n        break;\n      }\n\n      //merge new messages:\n      let newMsgs = matchUpdate.messages;\n      let newMsgsCount = newMsgs.length;\n      for (let y = oldMatch.messages.length - 1; 0 <= newMsgsCount || 0 <= y; y-- , newMsgsCount--) {\n        if (oldMatch.messages[y] && !oldMatch.messages[y]._id) {\n          oldMatch.messages.splice(y, 1);\n        }\n      }\n      oldMatch.messages = oldMatch.messages.concat(newMsgs);\n\n      /// merge seen:\n      let lastSeenMsg = matchUpdate.seen ? matchUpdate.seen.last_seen_msg_id : null;\n      if (lastSeenMsg) {\n        if (!oldMatch.seen) {\n          oldMatch.seen = {};\n        }\n        oldMatch.seen.last_seen_msg_id = lastSeenMsg;\n      }\n\n      /// merge last_activity_date:\n      let lastActivityDate = matchUpdate.last_activity_date ? matchUpdate.last_activity_date : null;\n      if (lastActivityDate) {\n        oldMatch.last_activity_date = lastActivityDate;\n      }\n    }\n  }\n\n  markLastUneadMessages = (store, updates) => {\n    let matches = updates.data.matches;\n\n    for (let i = 0; i < matches.length; i++) {\n      let matchUpdate = matches[i];\n      let oldMatch = store.getMatchById(matchUpdate._id);\n\n      let newLastSeenMsgId = matchUpdate.seen ? matchUpdate.seen.last_seen_msg_id : null;\n      let oldLastSeenMsgId = oldMatch.seen ? oldMatch.seen.last_seen_msg_id : null;\n      var localUser = store.profile.data;\n\n      newLastSeenMsgId = newLastSeenMsgId || oldLastSeenMsgId;\n      if (!newLastSeenMsgId || !localUser || !localUser._id) {\n        continue;\n      }\n      let newMsgs = matchUpdate.messages;\n\n      for (var ind = newMsgs.length - 1; 0 <= ind; ind--) {\n        let msg = newMsgs[ind];\n\n        if (!msg.from) {\n          continue;\n        }\n\n        if (localUser._id !== msg.from) {\n\n          if (msg._id !== newLastSeenMsgId) {\n            this.addToUnreadMessagesBadge(oldMatch);\n          }\n          break;\n        }\n      }\n    }\n  }\n\n  addToUnreadMessagesBadge = (mtch) => {\n    let header = BeanContextAware.get('header1');\n    if (header) {\n      header.addMsgMatch(mtch)\n    }\n  }\n\n  getUpdates = (lastDate) => {\n    let header = BeanContextAware.get('header1');\n    let chat1 = BeanContextAware.get('chat1');\n    let data = {\n      \"last_activity_date\": lastDate\n    }\n\n    let promise = AjaxService.doPost(Const.URLS.UPDATES, data, {});\n    promise.then((data) => {\n      if (store.update) {\n        this.mergeUpdates(store, data);\n      } else {\n        store.addToStore('update', data);\n      }\n\n      this.markLastUneadMessages(store, data);\n\n      /// merge global (updates polling) last_activity_date:\n      this.last_activity_date = data.data.last_activity_date;\n\n      if (chat1) {\n        chat1.triggerRenderFunc();\n      }\n      if (header) {\n        header.changeButtonVisibility({ isVisible: true });\n      }\n    }).catch((e) => {\n      if (header) {\n        console.log(\"get updates errror \");\n        header.changeButtonVisibility({ isVisible: false })\n      }\n      this.stopUpdatePoll();\n      console.log(e);\n    })\n  }\n\n  startUpdatePoll = (seconds) => {\n    if (!seconds) {\n      console.error(\"error null val for 'seconds'\");\n      return;\n    }\n    this.stopUpdatePoll();\n    this.pollInterval = seconds\n    this.pollIntervalObj = setInterval(\n      () => {\n        this.getUpdates(this.getLastActivityDate());\n      }, seconds\n    );\n  }\n\n  getLastActivityDate = () => {\n    return this.last_activity_date;\n  }\n\n  stopUpdatePoll = () => {\n    if (this.pollIntervalObj) {\n      clearTimeout(this.pollIntervalObj)\n    }\n  }\n}\nexport default new PollService();\n","import React, {Component} from 'react';\nimport {  Link} from 'react-router-dom';\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hits: [],\n      isLoading: false,\n      error: null,\n    };\n  }\n\n  componentDidMount() {\n  }\n\n  render() {\n    return (\n\n    <div >\n    <h1>Welcome</h1>\n          <Link to=\"/phone\">  Login with phone</Link>\n            </div >\n     )}\n  }\n\n  export default Home;\n","import React from 'react';\nimport { Field, reduxForm } from 'redux-form'\nimport store from '../store'\nimport {Provider } from 'react-redux'\n\nconst eachComponent = ({ input, label, type, value, placeholder,  meta: { touched, error } }) => (\n  <div>\n    <label>{label}</label>\n    <div>\n      <input className='form-control' {...input}  placeholder={placeholder}  type={type}/>\n      {touched && error && <span>{error}</span>}\n    </div>\n  </div>\n)\n\nclass RenderForm extends React.Component {\n\n  render() {\n    let {options} = this.props;\n    let handleSubmit = options.handleSubmit;\n    let fields = options.fields;\n    let RenderFieldWrapped = () => (\n      <div>  <form onSubmit={handleSubmit} >\n        {fields.map(op => (\n          <div key={op.name}>\n              <Field name={op.name} onChange={op.onChangeFun} component={eachComponent}\n                            type=\"input\" placeholder={op.placeholder} label={op.name}/>\n          </div>\n      ))\n    }\n  < input className=\"btn btn-primary\"  type = \"submit\"  value = \"Submit\" / >\n     </form>\n     </div>)\n\n\n    let RenderFieldWrappedInstance = reduxForm({\n      form: 'RenderFieldWrapped'\n    })(RenderFieldWrapped);\n\n    return (\n      <div>\n        <Provider store={store}>\n          <RenderFieldWrappedInstance options={options} />\n        </Provider>\n      </div>\n    )\n  }\n}\nexport default RenderForm\n","import React from 'react';\nimport Const from '../services/Constants';\nimport AjaxService from '../services/AjaxService';\nimport CashService from '../services/CashService';\nimport PollService from '../services/PollService';\nimport AppSettingsService from '../settings/AppSettingsService';\nimport RenderForm from '../building-blocks/RenderForm';\nimport { withRouter } from 'react-router-dom';\n\nclass PhoneForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      phone: ''\n    };\n  }\n\n  handleChange = event => {\n    this.state.phone = event.target.value;\n  };\n\n  sendPhoneNum = function (phone) {\n    let promise = AjaxService.doPost(Const.URLS.AUTH.PHONE, {\n      'phone': phone\n    }, {});\n\n    promise.then(() => {\n      CashService[Const.PHONE_HEADER_NAME] = phone;\n      this.props.history.push('/confirm-token');\n    }).catch((e) => {\n      CashService[Const.PHONE_HEADER_NAME] = null;\n      console.error(e);\n    })\n  }\n\n  handleSubmit = event => {\n    event.preventDefault();\n    let { history } = this.props;\n    let phone = this.state.phone;\n\n    let ls = CashService.getLocalStorage();\n    if (this.isToUseCurrentSession(phone)) {\n      console.log(\"use current session:\");\n      CashService[Const.PHONE_HEADER_NAME] = phone;\n      CashService[Const.AUTH_HEADER_NAME] = ls[phone][Const.AUTH_HEADER_NAME];\n      AppSettingsService.applySettingsFromLocalStorage();\n      PollService.checkIfLogged({}, () => { history.push('/user') }, () => { history.push('/confirm-token') });\n    } else {\n      //do not use current session:\n      console.log(\"do not use current session:\");\n      CashService[Const.PHONE_HEADER_NAME] = phone;\n      if (ls && ls[phone] && ls[phone][Const.AUTH_HEADER_NAME]) {\n        delete ls[phone][Const.AUTH_HEADER_NAME];\n        CashService.setLocalStorage(ls);\n        AppSettingsService.applySettingsFromLocalStorage();\n      } \n      this.sendPhoneNum(phone);\n    }\n  }\n\n  isToUseCurrentSession = (phone) => {\n    let ls = CashService.getLocalStorage();\n\n    if (!ls[phone] || !ls[phone][Const.AUTH_HEADER_NAME]) {\n      return false;\n    }\n\n    let isToUseCurrent = window.confirm('A session with this phone numer: ' + phone\n      + ' already exists.\\nUse current session?');\n    return isToUseCurrent;\n  }\n\n  render() {\n    const optns = {\n      handleSubmit: this.handleSubmit,\n      fields: [\n        { name: 'Phone number', placeholder: 'Please, fill in ur phone number', onChangeFun: this.handleChange }\n      ]\n    }\n\n    return (\n      <div>\n        <RenderForm options={optns} />\n      </div >\n    )\n  }\n}\nexport default withRouter(PhoneForm);\n","import React from 'react';\nimport Const from '../services/Constants';\nimport AjaxService from '../services/AjaxService';\nimport PollService from '../services/PollService';\nimport CashService from '../services/CashService';\nimport RenderForm from '../building-blocks/RenderForm';\n//import './index.css';\nimport { withRouter } from 'react-router-dom';\n\nclass ConfirmCode extends React.Component {\n  constructor(props) {\n\n    super(props);\n    this.state = {\n      confirmToken: ''\n    };\n  }\n\n  handleChange = event => {\n    this.state.confirmToken = event.target.value;\n    //this.setState({confirmToken: event.target.value});\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    let phoneNumber = CashService[Const.PHONE_HEADER_NAME];\n    if (!phoneNumber) {\n      throw new Error(\"CashService[Const.PHONE_HEADER_NAME] is not allowed to be \" + phoneNumber);\n    }\n    let { history } = this.props;\n    let ls = CashService.getLocalStorage();\n    let promise = AjaxService.doGet(Const.URLS.AUTH.GET_TOKEN + this.state.confirmToken + \"/\" + phoneNumber);\n\n    promise.then(function (value) {\n      console.log(value);\n      if (value && value.status === 200 && value.data) {\n        let token = value.data[Const.AUTH_HEADER_NAME];\n\n        if (!ls[phoneNumber]) {\n          ls[phoneNumber] = {};\n        }\n\n        let headers = {\n          [Const.AUTH_HEADER_NAME] : token\n        }\n\n        let onSuccess = function() {\n          ls[phoneNumber][Const.AUTH_HEADER_NAME] = token;\n          CashService.setLocalStorage(ls);\n          CashService[Const.AUTH_HEADER_NAME] = token;\n          history.push('/user');\n        }\n\n        let onFailure = function() {\n          history.push('/phone');\n        }\n\n        PollService.checkIfLogged(headers, onSuccess, onFailure);\n      }\n    }).catch((e) => {\n      // delete cash[store.phoneNumber];\n      // delete store.phoneNumber;\n      // localStorage.setItem(cashVarName, JSON.stringify(cash));\n      console.log(e);\n    })\n\n  }\n\n  render() {\n    const optns = {\n      handleSubmit: this.handleSubmit,\n      fields: [\n        { name: 'Confirmation code', placeholder: 'Please, enter your confirmation code:', onChangeFun: this.handleChange }\n      ]\n    }\n    return (\n      <div >\n        <RenderForm options={optns} />\n      </div>\n    );\n  }\n}\nexport default withRouter(ConfirmCode)\n","import React from 'react';\n\nfunction Info(args) {\n  let { person } = args;\n  let country = person.pos_info ? (person.pos_info.country ? person.pos_info.country.name : \"\") : \"\";\n  let age = person.birth_date ? person.birth_date.substring(0, 4) : \"\";\n  let city = person.pos_info ? (person.pos_info.city ? person.pos_info.city.name : \"\") : \"\";\n  return (\n    <div className=\"text-justify text-wrap\">\n      {person.name ? (<div> <span className=\"font-weight-bold\">Name:  </span> {person.name} </div>) : null}\n      {person.birth_date ? (<div> <span className=\"font-weight-bold\">Date of Birth:  </span> {age} </div>) : null}\n      {person.distance_mi ? (<div> <span className=\"font-weight-bold\">Distance (miles):  </span> {person.distance_mi} </div>) : null}\n      {person.pos_info ? (<div> <span className=\"font-weight-bold\">Location:  </span> {city}, {country}  </div>) : null}\n      {person.bio ? (<div> <span className=\"font-weight-bold\">Bio:  </span> {person.bio} </div>) : null}\n      {person.education ? (<div> <span className=\"font-weight-bold\">Job:  </span> {person.education} </div>) : null}\n      {person.job ? (<div> <span className=\"font-weight-bold\">Job:  </span> {person.job} </div>) : null}\n    </div>\n  )\n}\n\nexport default Info;","import React from 'react';\nimport AppSettingsService from '../settings/AppSettingsService';\n\nclass PicWrapper extends React.Component {\n  constructor(props) {\n    super(props);\n    let { photos, name  } = this.props;\n    this.personName = name;\n    this.isToShowPhotos = AppSettingsService.isToShowPhotos;\n    this.ind = 0;\n    let firstPic = this.isToShowPhotos ? photos[this.ind].url : null;\n    this.state = {\n      photos: photos,\n      imgSrc: firstPic\n    };\n  }\n\n  componentWillUnmount() {\n  }\n  componentDidMount() {\n  }\n\n  click = () => {\n    if (!this.isToShowPhotos) {\n      return;\n    }\n    if (this.state.photos.length < 2) {\n      return;\n    }\n    if (this.ind < this.state.photos.length - 1) {\n      this.ind++;\n    } else {\n      this.ind = 0;\n    }\n    this.setState({\n      imgSrc: this.state.photos[this.ind].url\n    });\n  }\n\n  render() {\n    if (this.isToShowPhotos) {\n      return (\n        <div className=\"container-fluid px-0\">\n          <img onClick={this.click} src={this.state.imgSrc} alt=\"some image\" className='img-fluid w-100'/>\n        </div>\n      );\n    } else  {\n      return (\n        <div>\n          <label className=\"text-center\">{this.personName} </label>\n        </div>\n      );\n    }\n\n  }\n}\nexport default PicWrapper;\n","import React from 'react';\nimport LocationPicker from \"react-leaflet-location-picker\";\nimport {withRouter}from 'react-router-dom'\nimport \"react-table/react-table.css\"\nimport ReactTable from \"react-table\";\nimport Info from \"../building-blocks/Info\";\nimport PicWrapper from \"../building-blocks/PicWrapper\";\nimport AjaxService from '../services/AjaxService'\nimport Const from '../services/Constants'\n\nclass UserView extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      profile: this.props.data.profile.data,\n      hits: [],\n      isLoading: false,\n      error: null,\n    };\n  }\nrender() {\n  var profile = this.state.profile\n\n  let pos = profile.pos ? [profile.pos.lat, profile.pos.lon] : [0,0]\n\n  let postLocation = (args) => {\n    let newMsgObj = {\n      lat: args[0],\n      lon: args[1]\n    }\n    AjaxService.doPost(Const.URLS.SEND_LOCATION, newMsgObj, {})\n  }\n\n  let person = [{\n    image: (<PicWrapper photos={profile.photos} name={profile.name}/>),\n    info: (<Info person={profile}/>)\n  }]\n\n  let present = [\n    {\n      columns: [\n        {\n          Header: \"Photos\",\n          accessor: \"image\"\n        },\n        {\n          Header: \"Info\",\n          accessor: \"info\"\n        }\n      ]\n    }\n  ]\n\n    let pointVals = [pos];\n    const pointMode = {\n      banner: false,\n      control: {\n        values: pointVals,\n        onClick: point => {\n          pointVals = [point]\n          pointMode.control.values = [point];\n          console.log(pointVals);\n            postLocation(point);\n          },\n        onRemove: point =>\n          console.log(\"I've just been clicked for removal :(\", point)\n      }\n    };\n\n      const options = {\n        bindMap: true,\n        startPort: \"default\",\n        overlayAll: true,\n        showControls: false,\n        showInputs: false,\n        useDynamic: true,\n        pointMode:  pointMode,\n        precision: 6\n    };\n\n  return (\n    <div>\n      <div>\n        <ReactTable\n          data={person}\n          columns={present}\n          sortable={false}\n          defaultPageSize={1}\n          showPagination={false}\n          style={{\n            width: '100%',\n            height: '30%',\n            //  backgroundColor: '#dadada'\n          }}\n          getTdProps={(state, rowInfo, column, instance) => {\n            return {\n              onClick: (e, handleOriginal) => {\n                if (handleOriginal) {\n                  handleOriginal()\n                }\n              }\n            }\n          }}\n        />\n        <br />\n      </div><LocationPicker {...options} />\n    </div>\n  )\n}\n}\n\nexport default withRouter(UserView);\n","import React from 'react';\nimport Const from './Constants';\nimport AjaxService from './AjaxService';\n\nclass MatchDecoratorService extends React.Component {\n\n  getUserData = (match, callbackFunc) => {\n    let userId = match.person._id;\n    let promise = AjaxService.doGet(Const.URLS.USER + userId, {});\n    promise.then((data) => {\n      match.user = data.data.results;\n      match.person.distance_mi = data.data.results.distance_mi;\n      callbackFunc(match);\n    }).catch((e) => {\n      console.error(e);\n    })\n  }\n\n}\nexport default new MatchDecoratorService();","import React from 'react';\n\nclass OnePicWrapper extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      imgSrc: props.src\n    };\n    this.condition = props.condition;\n    this.changeHandler = props.changeHandler;\n    this.match = props.match;\n  }\n\n  componentWillUnmount() {\n  }\n  componentDidMount() {\n  }\n\n  doClick = (e) => {\n    this.changeHandler(e, this.match);\n  }\n\n  render() {\n    if (this.condition) {\n      return (\n        <div className=\"container-fluid px-0\">\n          <img onClick={this.doClick} src={this.state.imgSrc} alt=\"new\" className='img-fluid w-100' />\n        </div>\n      );\n    } else {\n      return (\n        <div onClick={this.doClick}>\n          <label className=\"text-center\">{this.match.person.name}</label>\n        </div>\n      );\n    }\n\n  }\n}\nexport default OnePicWrapper;\n","import React from 'react';\nimport store from '../store';\nimport AppSettingsService from '../settings/AppSettingsService';\nimport MatchDecoratorService from '../services/MatchDecoratorService';\nimport \"react-table/react-table.css\";\nimport OnePicWrapper from '../building-blocks/OnePicWrapper';\nimport ReactTable from \"react-table\";\nimport { withRouter } from 'react-router-dom';\n\nclass Friends extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showUser: false,\n      isVisible: false,\n      msgMatches: [],\n      sortingFunc: this.sortByLastActivityDate\n    };\n  }\n\n  sortByLastActivityDate = (a, b) => {\n    let timeA = new Date(a.last_activity_date).getTime();\n    let timeB = new Date(b.last_activity_date).getTime();\n    return timeB - timeA;\n  }\n\n  applySorting = (arrToBeSorted, sortingFunc) => {\n    try {\n      arrToBeSorted.sort(sortingFunc);\n    } catch (e) {\n      console.error(e);\n    }\n    return arrToBeSorted;\n  }\n\n  getUserData = (event, match) => {\n    let clBack = (match) => {\n      this.props.history.push({\n        pathname: '/friend',\n        state: { args: match }\n      })\n    }\n    MatchDecoratorService.getUserData(match, clBack);\n  }\n\n  render() {\n    let dt = store.getStore();\n\n    let friends = dt.update.data.matches;\n\n    this.applySorting(friends, this.state.sortingFunc);\n\n    let persons = friends.map(match => {\n      let prsn = match.person\n      let obj;\n      if (prsn) {\n        let picProps = {\n          condition: AppSettingsService.isToShowPhotos,\n          src: prsn.photos[0].url,\n          match: match,\n          changeHandler: this.getUserData\n        }\n      obj = {\n        firstName: prsn.name,\n        lastName: prsn.birth_date,\n        image: (<OnePicWrapper { ...picProps}/>)\n      }\n    }\n      return { ...obj };\n    });\n\n    const present = [\n      {\n        columns: [\n          {\n            Header: \"Image\",\n            accessor: \"image\"\n          },\n          {\n            Header: \"First Name\",\n            accessor: \"firstName\"\n          }\n        ]\n      }\n    ]\n\n    return (\n      <div>\n        <div>\n          <ReactTable className=\"-striped -highlight\"\n            data={persons}\n            columns={present}\n            defaultPageSize={persons.length}\n            pageSize={persons.length}\n            sortable={false}\n            showPagination={false}\n          />\n          <br />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(Friends);","import React from 'react'\r\nimport { Link } from \"react-router-dom\";\r\nimport PropTypes from 'prop-types'\r\n\r\nBtnLink.propTypes = {\r\n    label: PropTypes.string,\r\n    data: PropTypes.object,\r\n    pathname: PropTypes.string\r\n};\r\n\r\nfunction BtnLink(props) {\r\n    return (\r\n        <div>\r\n            <Link to={{ pathname: props.pathname, state: { data: props.data } }}>\r\n                <button type=\"button\" className=\"btn btn-primary\">\r\n                    {props.label}\r\n                </button>\r\n            </Link>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BtnLink\r\n","import React from 'react';\nimport \"react-table/react-table.css\"\nimport ReactTable from \"react-table\";\nimport BtnLink from \"../building-blocks/BtnLink\";\nimport Info from \"../building-blocks/Info\";\nimport PicWrapper from \"../building-blocks/PicWrapper\";\n\nclass OneFriend extends React.Component {\n\n  render() {\n    let { args } = this.props.location.state;\n    let InfoWithButton = () => (\n      <div>\n        <BtnLink label=\"Chat\" data={args} pathname=\"/chat\" />\n        <Info person={args.person}/>\n      </div>\n    )\n    let person = [{\n      image: (<PicWrapper photos={args.person.photos}  name={args.person.name}/>),\n      info: (<InfoWithButton />)\n    }]\n\n    let present = [\n      {\n        columns: [\n          {\n            Header: \"Photos\",\n            accessor: \"image\"\n          },\n          {\n            Header: \"Info\",\n            accessor: \"info\"\n          }\n        ]\n      }\n    ]\n\n    return (\n      <div>\n        <div>\n          <ReactTable\n            data={person}\n            columns={present}\n            sortable={false}\n            defaultPageSize={1}\n            showPagination={false}\n          />\n          <br />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default OneFriend;\n","import React from 'react';\nimport \"react-table/react-table.css\"\nimport ReactTable from \"react-table\";\nimport AjaxService from '../services/AjaxService';\nimport Const from '../services/Constants';\nimport PicWrapper from \"../building-blocks/PicWrapper\";\nimport BtnLink from \"../building-blocks/BtnLink\";\nimport Info from \"../building-blocks/Info\";\n\nclass MoreFriends extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      allFr: []\n    };\n    this.abortController = new AbortController();\n  }\n\n  componentDidMount() {\n    this.getNewFriends();\n  }\n\n  getNewFriends = () => {\n    let promise = AjaxService.doGet(Const.URLS.NEW_FRIENDS, {})\n    promise.then((data) => {\n      let allFr = data.data.results;\n      this.setState({ allFr: allFr });\n    }).catch((e) => {\n      console.log(e);\n    })\n  }\n\n  pass = (userId) => {\n    let promise = AjaxService.doGet(Const.URLS.PASS + userId, {})\n    promise.then((data) => {\n    }).catch((e) => {\n      console.log(e);\n    })\n  }\n\n  like = (userId) => {\n    let promise = AjaxService.doGet(Const.URLS.LIKE + userId, {})\n    promise.then((data) => {\n      console.log(data);\n    }).catch((e) => {\n      console.log(e);\n    })\n  }\n\n  render() {\n    let InfoWrapper = (args) => {\n      let { person } = args;\n\n      return (\n        <div className=\"text-justify text-wrap\">\n          <div>\n            <button type=\"button\" className=\"btn btn-success\" onClick={() => this.like(person._id)}> Like </button>\n            <button type=\"button\" className=\"btn btn-danger ml-2\" onClick={() => this.pass(person._id)}> Pass </button>\n          </div>\n          <Info person={person} />\n        </div>\n      )\n    }\n\n    let Pic = args => (<PicWrapper photos={args.photos} name={args.name}/>)\n\n    let allFr = this.state.allFr;\n\n    let persons = allFr.map(one => {\n      let obj = {\n        info: (<InfoWrapper person={one} />),\n        image: (<Pic photos={one.photos} name={one.name} />)\n      }\n      return { ...obj };\n    });\n\n    let present = [\n      {\n        columns: [\n          {\n            Header: \"Photos\",\n            accessor: \"image\"\n          },\n          {\n            Header: \"Info\",\n            accessor: \"info\"\n          }\n        ]\n      }\n    ]\n\n    return (\n      <div>\n        <div className=\"text-justify text-center\">\n          <BtnLink label=\"Friend Requests\" data={null} pathname=\"/pal-requests\" />\n          <button type=\"button\" className=\"btn btn-primary\" onClick={this.getNewFriends}> Reload </button>\n        </div>\n\n        <div>\n          <ReactTable className=\"-striped -highlight\"\n            data={persons}\n            columns={present}\n            sortable={false}\n            defaultPageSize={persons.length}\n            pageSize={persons.length}\n            showPagination={false}\n          />\n          <br />\n        </div>\n      </div>\n    )\n  }\n}\nexport default MoreFriends;","import React from 'react';\nimport \"react-table/react-table.css\"\nimport ReactTable from \"react-table\";\nimport AjaxService from '../services/AjaxService'\nimport Const from '../services/Constants';\nimport PicWrapper from \"../building-blocks/PicWrapper\";\n\n\n\nclass FriendRequests extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      allFr: [],\n      hits: [],\n      isLoading: false,\n      error: null,\n    };\n    this.abortController = new AbortController();\n  }\n\n  componentWillUnmount() {\n    this.abortController.abort()\n  }\n\n  getFriendRequests = () => {\n    let promise = AjaxService.doGet(Const.URLS.FAST_MATCH, {})\n    promise.then((data) => {\n      if (!data || !data.data || !data.data.data || !data.data.data.results) {\n        return;\n      }\n\n      this.setState({\n        allFr: data.data.data.results\n      })\n    }).catch((e) => {\n      console.log(e);\n    })\n  }\n\n  componentDidMount() {\n    this.getFriendRequests();\n  }\n\n  render() {\n    let Info = args => <div className=\"text-justify text-wrap\"> {args.info} </div>;\n    let Pic = args => (<PicWrapper photos={args.photos} />);\n\n    let allFr = this.state.allFr;\n\n    let persons = allFr.map(one => {\n      let obj = {\n        info: (<Info info={one.user._id} />),\n        image: (<Pic photos={one.user.photos} />)\n      }\n      return { ...obj };\n    });\n\n    let present = [\n      {\n        columns: [\n          {\n            Header: \"Photos\",\n            accessor: \"image\"\n          },\n          {\n            Header: \"Info\",\n            accessor: \"info\"\n          }\n        ]\n      }\n    ]\n\n    return (\n      <div>\n        <div className=\"text-center p-1 \">\n          <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.getFriendRequests()}> Reload </button>\n        </div>\n        <div>\n          <ReactTable className=\"-striped -highlight\"\n            data={persons}\n            columns={present}\n            sortable={false}\n            defaultPageSize={persons.length}\n            pageSize={persons.length}\n            showPagination={false}\n            style={{\n              width: '100%',\n              height: '30%',\n            }}\n          />\n          <br />\n        </div>\n      </div>\n    )\n  }\n}\nexport default FriendRequests;\n\n//{\"status\":200,\"match\":false,\"likes_remaining\":100,\"X-Padding\":\"{*meta*:{*code*:200,*requestId*:*59a45921351e3d43b07028b5*},*response*:{*venue*:{*id*:*412d2800f964a520df0c1fe3*,*name*:*Central Park*,*contact*:{*phone*:*2123106600*,*formattedPhone*:*(212) 310-6600*,*twitter*:*centralparknyc*,*instagram*:*centralparknyc*,*facebook*:*37965424481*,*facebookUsername*:*centralparknyc*,*facebookName*:*Central Park*},*location*:{*address*:*59th St to 110th St*,*crossStreet*:*5th Ave to Central Park West*,*lat*:40.78408342593807,*lng*:-73.96485328674316,*postalCode*:*10028*,*cc*:*US*,*city*:*New York*,*state*:*NY*,*country*:*United States*,*formattedAddress*:[*59th St to 110th St (5th Ave to Central Park West)*,*New York, NY 10028*,*United States*]},*canonicalUrl*:*https://foursquare.com/v/central-park/412d2800f964a520df0c1fe3*,*categories*:[{*id*:*4bf58dd8d48988d163941735*,*name*:*Park*,*pluralName*:*Parks*,*shortName*:*Park*,*icon*:{*prefix*:*https://ss3.4sqi.net/img/categories_v2/parks_outdoors/park_*,*suffix*:*.png*},*primary*:true}],*verified*:true,*stats*:{*checkinsCount*:364591,*usersCount*:311634,*tipCount*:1583,*visitsCount*:854553},*url*:*http://www.centralparknyc.org*,*likes*:{*count*:17370,*summary*:*17370 Likes*},*rating*:9.8,*ratingColor*:*00B551*,*ratingSignals*:18854,*beenHere*:{*count*:0,*unconfirmedCount*:0,*marked*:false,*lastCheckinExpiredAt*:0},*photos*:{*count*:26681,*groups*:[{*type*:*venue*,*name*:*Venue photos*,*count*:26681,*items*:[{*id*:*513bd223e4b0e8ef8292ee54*,*createdAt*:1362874915,*source*:{*name*:*Instagram*,*url*:*http://instagram.com*},*prefix*:*https://igx.4sqi.net/img/general/*,*suffix*:*/655018_Zp3vA90Sy4IIDApvfAo5KnDItoV0uEDZeST7bWT-qzk.jpg*,*width*:612,*height*:612,*user*:{*id*:*123456*,*firstName*:*J\"}\n\n// Request URL: https://api.gotinder.com/v2/fast-match/teasers?locale=en-GB\n// Request Method: GET\n// Status Code: 200 \n// Remote Address: 52.85.7.7:443\n// Referrer Policy: origin\n// access-control-allow-credentials: true\n// access-control-allow-headers: Accept,Authorization,Cache-Control,Content-Type,DNT,If-Modified-Since,Keep-Alive,Origin,User-Agent,X-Requested-With,platform,app-version,X-Auth-Token,x-accountkit-validation-code,token,fast-match-count,x-supported-image-formats,device_id,install-id,persistent-device-id,promo-code,campaign-name,app-session-id,app-session-time-elapsed,user-session-id,user-session-time-elapsed,advertising-id,encoded-device-carrier,encoded-device-model,x-external-token,x-refresh-token,x-recovery-token,x-access-token,Java-Script-Enabled,Color-Depth,Java-Enabled,Screen-Height,Screen-width,Time-Zone-Offset,language,Underage-Token,tinder-version\n// access-control-allow-methods: GET, POST, PUT, DELETE, OPTIONS\n// access-control-allow-origin: https://tinder.com\n// cache-control: no-cache, no-store, must-revalidate\n// content-encoding: gzip\n// content-type: application/json; charset=utf-8\n// date: Sat, 21 Dec 2019 08:10:56 GMT\n// status: 200\n// vary: Accept-Encoding\n// via: 1.1 db06bf8d1de11ce1e98664ab021137c1.cloudfront.net (CloudFront)\n// x-amz-cf-id: ZPmygL5V4uLR1bFn1hrRT1nwhOul1uN8HfDk3xyIve5KVifB_4OPdQ==\n// x-amz-cf-pop: SOF50-C1\n// x-cache: Miss from cloudfront\n// x-request-id: 829bc5c1-5531-45fd-a5fd-f13027f65d69\n\n\n// :authority: api.gotinder.com\n// :method: GET\n// :path: /v2/fast-match/teasers?locale=en-GB\n// :scheme: https\n// accept: application/json\n// accept-encoding: gzip, deflate, br\n// accept-language: en-GB,en-US;q=0.9,en;q=0.8,bg;q=0.7\n// app-session-id: d7e147fc-9d4d-42a8-bb7d-7a567c141aea\n// app-session-time-elapsed: 1733647\n// app-version: 1021800\n// origin: https://tinder.com\n// persistent-device-id: 4f54539a-f43e-4ca2-b273-49912acdecfc\n// platform: web\n// referer: https://tinder.com/\n// sec-fetch-mode: cors\n// sec-fetch-site: cross-site\n// tinder-version: 2.18.0\n// user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/79.0.3945.88 Safari/537.36\n// user-session-id: 062576c6-4aa3-4dd7-841b-eb1b88e6530d\n// user-session-time-elapsed: 1726069\n// x-auth-token: 5e7d4468-72f4-49da-974c-94796b697905\n// x-supported-image-formats: webp,jpeg","import React, { Component } from 'react'\nimport AppSettingsService from './AppSettingsService';\n\nexport default class SelectPollInterval extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      interval: AppSettingsService.updatePollInterval\n    }\n  }\n\n  changeHandler = (e) => {\n    this.setState({\n      interval: e.target.value\n    })\n    AppSettingsService.updatePollInterval = e.target.value;\n    this.props.onSelectPollInterval(e.target.value);\n  }\n\n  render() {\n    return (\n      <form>\n        <div className='form-group'>\n          <label>Poll interval for getting updates to be every:</label>\n          <select\n            className={this.props.styles}\n            value={this.state.interval}\n            onChange={this.changeHandler}>\n            <option value=\"10000\">10 sec</option>\n            <option value=\"20000\">20 sec</option>\n            <option value=\"40000\">40 sec</option>\n            <option value=\"50000\">50 sec</option>\n            <option value=\"60000\">1 min</option>\n            <option value=\"300000\">5 min</option>\n            <option value=\"600000\">10 min</option>\n          </select>\n        </div>\n      </form>\n    );\n  }\n}\n","import React, { Component } from 'react'\nimport AppSettingsService from './AppSettingsService';\n\nexport default class SelectTextColor extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      selected: AppSettingsService.getSetting(\"textColor\") || AppSettingsService.textColors[0]\n    }\n  }\n\n  changeHandler = (event) => {\n    let color = event.target.value;\n\n    AppSettingsService.applyClass(document.body, AppSettingsService.textColors, color);\n    AppSettingsService.persistSetting(\"textColor\", color);\n\n    this.setState({\n      selected: color\n    })\n    this.props.triggerRender();\n  }\n\n  render() {\n    return (\n      <form>\n        <div className='form-group'>\n          <label>Select text color:</label>\n          <select\n            className={this.props.styles}\n            value={this.state.selected}\n            onChange={this.changeHandler}>\n            {AppSettingsService.textColors.map(\n              (color) => {\n                return (<option key={color.name} value={color.class}>{color.name}</option>);\n              }\n            )}\n          </select>\n        </div>\n      </form>\n    );\n  }\n}","import React, { Component } from 'react';\nimport AppSettingsService from './AppSettingsService';\n\nexport default class SelectBackgroundColor extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selected: AppSettingsService.getSetting(\"bgColor\") || AppSettingsService.bgColors[0]\n    }\n  }\n\n  changeHandler = (event) => {\n    let color = event.target.value;\n\n    AppSettingsService.applyClass(document.body, AppSettingsService.bgColors, color);\n    AppSettingsService.persistSetting(\"bgColor\", color);\n\n    this.setState({\n      selected: color\n    })\n    this.props.triggerRender();\n  }\n\n  render() {\n    return (\n      <form>\n        <div className='form-group'>\n          <label>Select background color:</label>\n          <select className={this.props.styles}\n            value={this.state.selected}\n            onChange={this.changeHandler}>\n            {AppSettingsService.bgColors.map(\n              (color) => {\n                return (<option key={color.name} value={color.class}>{color.name}</option>);\n              }\n            )}\n          </select>\n        </div>\n      </form>\n    );\n  }\n}\n","import React, { Component } from 'react';\n\nexport default class Checkbox extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      condition: props.condition\n    }\n\n    this.changeHandler = props.changeHandler;\n    this.defaultChecked = props.defaultChecked;\n    this.label = props.label;\n  }\n\n  doChangeState = (e) => {\n    this.changeHandler(e);\n    this.setState({\n      condition: e.target.checked\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"form-check\">\n        <input className=\"form-check-input\" type=\"checkbox\" checked={this.state.condition} onChange={this.doChangeState} /> \n        <label className=\"form-check-label\"> {this.label} </label>\n      </div>\n    )\n  }\n}","import React from 'react';\r\nimport PollService from '../services/PollService';\r\nimport SelectPollInterval from './SelectPollInterval';\r\nimport AppSettingsService from './AppSettingsService';\r\nimport SelectTextColor from './SelectTextColor';\r\nimport SelectBackgroundColor from './SelectBackgroundColor';\r\nimport Checkbox from './Checkbox';\r\n\r\nclass AppSettings extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      styles: AppSettingsService.getInputStyleClasses(),\r\n      isToShowPhotos: AppSettingsService.isToShowPhotos\r\n    };\r\n  }\r\n\r\n  onSelectPollInterval = (val) => {\r\n    PollService.startUpdatePoll(val);\r\n    this.setState({\r\n      pollInterval: val\r\n    })\r\n  }\r\n\r\n  triggerRender = () => {\r\n    this.setState({\r\n      styles: AppSettingsService.getInputStyleClasses()\r\n    })\r\n  }\r\n\r\n  toggleShowPicsCheckbox = (event) => { \r\n    AppSettingsService.isToShowPhotos = event.target.checked;\r\n    this.setState({\r\n      isToShowPhotos: AppSettingsService.isToShowPhotos\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <SelectPollInterval styles={this.state.styles} onSelectPollInterval={this.onSelectPollInterval} />\r\n        <SelectBackgroundColor styles={this.state.styles} triggerRender={this.triggerRender} />\r\n        <SelectTextColor styles={this.state.styles} triggerRender={this.triggerRender} />\r\n        <Checkbox label=\"show photos\" condition={this.state.isToShowPhotos} changeHandler={this.toggleShowPicsCheckbox} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default AppSettings;","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport BeanContextAware from '../services/BeanContextAware';\nimport MatchDecoratorService from '../services/MatchDecoratorService';\nimport { withRouter } from 'react-router-dom';\n\nclass Header extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      beanId: props.beanId,\n      showUser: false,\n      isVisible: false,\n      msgMatches: []\n    };\n    this.initialTitle = document.title;\n  }\n\n  changeState = (obj) => {\n    this.setState(obj)\n  }\n\n  addMsgMatch = (mtch) => {\n    var pos = this.findInMsgMatches(mtch);\n    if (pos > -1) { // if found - do not add it again\n      return;\n    }\n    let msgMatches = this.state.msgMatches;\n    this.state.msgMatches.push(mtch);\n    this.setState({\n      msgMatches: msgMatches\n    })\n    this.toggleFlashTabTitle();\n  }\n\n  findInMsgMatches = (mtch) => {\n    let msgMatches = this.state.msgMatches\n    for (var i = 0, len = msgMatches.length; i < len; i++) {\n      if (msgMatches[i].id === mtch.id)\n        return i;\n    }\n    return -1;\n  }\n\n  removeMsgMatch = (mtch) => {\n    var pos = this.findInMsgMatches(mtch);\n    if (pos > -1) {\n      let msgMatches = this.state.msgMatches\n      msgMatches.splice(pos, 1);\n      this.setState({\n        msgMatches: msgMatches\n      })\n      this.toggleFlashTabTitle();\n    }\n  }\n\n  changeButtonVisibility = (obj) => {\n    this.setState(obj);\n  }\n\n  componentDidMount() {\n    BeanContextAware.add(this);\n  }\n\n  componentWillUnmount() {\n    BeanContextAware.remove(this);\n  }\n\n  toggleFlashTabTitle = () => {\n    if (this.state.msgMatches.length > 0 && !this.flashIntervalObj) {\n      this.startFlashTabTitle();\n    } else {\n      this.stopFlashTabTitle();\n    }\n  }\n\n  startFlashTabTitle = () => {\n    this.flashIntervalObj = setInterval(\n      () => {\n        if (this.initialTitle === document.title) {\n          document.title = \"(\" + this.state.msgMatches.length + \") \" + this.initialTitle;\n        } else {\n          document.title = this.initialTitle;\n        }\n      }, 1000\n    );\n  }\n\n  stopFlashTabTitle = () => {\n    clearTimeout(this.flashIntervalObj);\n    this.flashIntervalObj = null;\n    document.title = this.initialTitle;\n  }\n\n  getUserData = (match) => {\n    let clBack = (match) => {\n         this.props.history.push({\n         pathname: '/friend',\n         state: { args: match }\n       })\n     }\n     MatchDecoratorService.getUserData(match, clBack);\n   }\n\n   goChat = (match) => {\n      this.props.history.push({\n        pathname: '/chat',\n        state: { data: match }\n      })\n   }\n\n  render() {\n    let Btn = (props) => (\n      <div>\n        <NavLink exact activeClassName=\"active\" to={props.to}>\n          <button type=\"button\" className=\"btn btn-primary\">\n            {props.label}\n          </button>\n        </NavLink>\n      </div>\n    )\n    let isVisibleNewMsgs = this.state.msgMatches.length ? true : false;\n\n    let BtnBadge = (props) => {\n      let mtch = props.data;\n      if (!mtch.messages || mtch.messages.length == 0) {\n        return (\n          <div>\n            <button onClick={() =>{ this.removeMsgMatch(mtch); this.getUserData(mtch)}} className=\"btn btn-primary\" > \n            New: {this.state.msgMatches.length} </button>\n          </div>\n        )\n      } else {\n        return (\n          <div>\n            <button onClick={() => this.goChat(mtch)} className=\"btn btn-primary\" > \n            New: {this.state.msgMatches.length} </button>\n          </div>\n        )\n      }\n    }\n\n    return (\n      <div className=\"text-center \">\n        <nav>\n          <div className=\"btn-group\">\n            {!this.state.isVisible ? <Btn to=\"/home\" label=\"Home\" /> : null}\n            {this.state.isVisible ? <Btn to=\"/user\" label=\"User\" /> : null}\n            {this.state.isVisible ? <Btn to=\"/pals\" label=\"Pals\" /> : null}\n            {this.state.isVisible ? <Btn to=\"/more-pals\" label=\"More Pals\" /> : null}\n            {this.state.isVisible ? <Btn to=\"/settings\" label=\"Settings\" /> : null}\n            {this.state.isVisible ? <Btn to=\"/logout\" label=\"|->\" /> : null}\n            {(this.state.isVisible && isVisibleNewMsgs) ? <BtnBadge data={this.state.msgMatches[0]} /> : null}\n          </div>\n        </nav>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(Header);","import React from 'react';\r\nimport store from '../store'\r\nimport Const from '../services/Constants';\r\nimport AjaxService from '../services/AjaxService';\r\nimport AppSettingsService from '../settings/AppSettingsService';\r\n\r\nclass EnterText extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            value: '',\r\n            store: props.data,\r\n            friendId: props.friendId,\r\n            triggerRenderFunc: props.triggerRenderFunc\r\n        }\r\n        this.getStyles = AppSettingsService.getInputStyleClasses;\r\n    }\r\n\r\n    createMessage = (match, store) => {\r\n        var dt = new Date();\r\n        return {\r\n            created_date: dt.toISOString(),\r\n            from: store.profile.data._id,\r\n            match_id: match.id,\r\n            message: this.state.value,\r\n            sent_date: dt.toISOString(),\r\n            timestamp: dt.getTime(),\r\n            to: match.person._id\r\n        }\r\n    }\r\n\r\n    onKeyPress = (e) => {\r\n        if (e.key !== 'Enter') {\r\n            return;\r\n        }\r\n\r\n        let matches = store.update.data.matches;\r\n        for (let index = 0; index < matches.length; index++) {\r\n            const oneMatch = matches[index];\r\n\r\n            if (oneMatch.person._id === this.state.friendId) {\r\n                let newMsgObj = this.createMessage(oneMatch, this.state.store);\r\n                AjaxService.doPost(Const.URLS.SEND_MESSAGE, newMsgObj, {})\r\n                store.update.data.matches[index].messages.push(newMsgObj);\r\n                this.state.triggerRenderFunc();\r\n                break;\r\n            }\r\n        }\r\n        this.setState({ value: '' });\r\n    }\r\n\r\n    onChange = (e) => {\r\n        var elem = e.srcElement || e.target;\r\n        this.setState({ value: elem.value })\r\n    }\r\n\r\n    render() {\r\n        let inputProps = {\r\n            placeholder: 'Write...',\r\n            value: this.state.value,\r\n            onChange: this.onChange,\r\n            className: this.getStyles(),\r\n            onKeyPress: this.onKeyPress\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <input {...inputProps} type=\"text\" />\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default EnterText;\r\n","import React from 'react';\r\n\r\nclass MessageWrapper extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      let { msg } = this.props;\r\n      let msgDateObj = new Date(msg.timestamp);\r\n\r\n      let timeStr = msgDateObj.toLocaleTimeString();\r\n      let dateStr = msgDateObj.toLocaleDateString()\r\n      if (dateStr !== new Date().toLocaleDateString()) {\r\n        timeStr = timeStr + \",  \" + dateStr;\r\n      }\r\n\r\n      this.state = {\r\n          isSeen: msg.isSeen,\r\n          showDate: false,\r\n          date: timeStr\r\n      };\r\n    }\r\n\r\n    render() {\r\n        let { msg } = this.props;\r\n\r\n        let showHideDate = () => {\r\n            this.setState({ showDate: true });\r\n            setTimeout(\r\n                () => {\r\n                    this.setState({ showDate: false });\r\n                }, 5000);\r\n        }\r\n\r\n        return (\r\n            <div onClick={showHideDate}>\r\n                <p className=\"text-justify text-wrap\" >  {msg.message} </p>\r\n                {this.state.isSeen ? (<span className=\"badge badge-secondary text-justify text-wrap\">seen</span>) : null}\r\n                {this.state.showDate ? (<span className=\"badge small\" >  {this.state.date} </span>) : null}\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default MessageWrapper;\r\n","import React, { Component } from 'react'\nimport BeanContextAware from '../services/BeanContextAware'\n\nexport default class Select extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      numberMsgShown: 10,\n      getStyles: props.getStyles\n    }\n  }\n\n  changeHandler = (e) => {\n    let chat1 = BeanContextAware.get('chat1');\n      this.setState({\n        numberMsgShown: e.target.value\n      })\n      if (chat1) {\n        chat1.changeState({ numberMsgShown: parseInt(e.target.value)});\n      }\n  }\n\n  render() {\n    return (\n      <form>\n        <div className='form-group'>\n          <label>Number of messages to show:</label>\n          <select\n            className={this.state.getStyles()}\n            value={this.state.numberMsgShown}\n            onChange={this.changeHandler}>\n            <option value=\"10\">10</option>\n            <option value=\"20\">20</option>\n            <option value=\"50\">50</option>\n            <option value=\"70\">70</option>\n          </select>\n        </div>\n      </form>\n    );\n  }\n}\n","import React from 'react';\r\nimport ReactTable from \"react-table\";\r\nimport { withRouter } from 'react-router-dom'\r\nimport store from '../store'\r\nimport EnterText from './enterText'\r\nimport MessageWrapper from './messageWrapper'\r\nimport BeanContextAware from '../services/BeanContextAware'\r\nimport Select from './Select'\r\nimport Const from '../services/Constants';\r\nimport AjaxService from '../services/AjaxService'\r\nimport AppSettingsService from '../settings/AppSettingsService';\r\n\r\nclass Chat extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    console.log(props);\r\n    \r\n    let match = props.location.state.data;\r\n    let friendId = match.person._id;\r\n    let lastSeenMsg = match.seen ? match.seen.last_seen_msg_id : null;\r\n    this.state = {\r\n      lastSeenMsg: lastSeenMsg,\r\n      numberMsgShown: 10,\r\n      matchId: match.id,\r\n      store: store,\r\n      match: match,\r\n      friendId: friendId,\r\n      messages: match.messages\r\n    };\r\n    this.inputStyles = AppSettingsService.getInputStyleClasses;\r\n  }\r\n\r\n  componentDidMount() {\r\n    BeanContextAware.add(this);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    BeanContextAware.remove(this);\r\n  }\r\n\r\n  prepareMessages = (allMsgs, friendId, numberMsgShown) => {\r\n    let result = [];\r\n    result.length = numberMsgShown;\r\n\r\n    for (let ind = allMsgs.length - 1; 0 <= numberMsgShown; numberMsgShown-- , ind--) {\r\n\r\n      let msg = allMsgs[ind];\r\n\r\n      if (!msg) {\r\n        msg = {};\r\n      }\r\n\r\n      let transformedMsg = {};\r\n      result[numberMsgShown] = transformedMsg;\r\n\r\n      if (msg.from === friendId) {\r\n        transformedMsg.theirs = (<MessageWrapper msg={msg} />);\r\n      }\r\n      else {\r\n        transformedMsg.mine = (<MessageWrapper msg={msg} />);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  //call it to start render() in order to visualize the change\r\n  triggerRenderFunc = () => {\r\n    let match = store.getMatchById(this.state.match._id)\r\n    let lastSeenMsg = match.seen ? match.seen.last_seen_msg_id : null;\r\n    this.setState({\r\n      lastSeenMsg: lastSeenMsg,\r\n      match: match,\r\n      messages: match.messages\r\n    })\r\n  }\r\n\r\n  changeState = (obj) => {\r\n    this.setState(obj)\r\n  }\r\n\r\n  sendSeen = (allMsgs) => {\r\n    if (!this.state.lastSeenMsg) {\r\n      console.log(\"empty value of 'lastSeenMsg'..\");\r\n    }\r\n\r\n    //clear notification for new friends, who have not send message:\r\n    if (!allMsgs || !allMsgs.length) {\r\n      this.deleteFromHeader();\r\n      return;\r\n    }\r\n\r\n    for (let index = allMsgs.length - 1; 0 <= index; index--) {\r\n\r\n      let msgWrapped = allMsgs[index];\r\n\r\n      if (!msgWrapped || !msgWrapped.theirs) {\r\n        continue;\r\n      }\r\n      let msg = msgWrapped.theirs.props.msg;\r\n\r\n      if (msg._id !== this.state.lastSeenMsg) {\r\n        AjaxService.doGet(Const.URLS.SEND_SEEN + msg.match_id + \"/\" + msg._id, {});\r\n        let match = this.state.match;\r\n        if (match.seen) {\r\n          match.seen.last_seen_msg_id = msg._id;\r\n        }\r\n\r\n        this.deleteFromHeader();\r\n        return;\r\n      }\r\n      if (msgWrapped.theirs) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  deleteFromHeader = () => {\r\n    let header = BeanContextAware.get('header1');\r\n    if (header) {\r\n      header.removeMsgMatch(this.state.match);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const present = [\r\n      {\r\n        columns: [\r\n          {\r\n            Header: this.state.match.person.name,\r\n            accessor: \"theirs\"\r\n          },\r\n          {\r\n            Header: \"Me\",\r\n            accessor: \"mine\"\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n    var reorderedMessages = this.prepareMessages(this.state.messages, this.state.friendId, this.state.numberMsgShown);\r\n\r\n    this.sendSeen(reorderedMessages);\r\n    let inputProps = {\r\n      data: this.state.store,\r\n      friendId: this.state.match.person._id,\r\n      triggerRenderFunc: this.triggerRenderFunc\r\n    }\r\n\r\n    return (\r\n      <div><Select getStyles={this.inputStyles} />\r\n        <div>\r\n          <ReactTable\r\n            data={reorderedMessages}\r\n            columns={present}\r\n            defaultPageSize={reorderedMessages.length}\r\n            pageSize={reorderedMessages.length}\r\n            showPagination={false}\r\n            bordered={false}\r\n            sortable={false}\r\n\r\n          />\r\n          <div>\r\n            <EnterText {...inputProps} />\r\n          </div>\r\n          <br />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default withRouter(Chat);\r\n","import React from 'react';\nimport CashService from './services/CashService';\nimport AppSettingsService from './settings/AppSettingsService';\nimport PollService from './services/PollService';\nimport Home from './Home';\nimport PhoneForm from './auth/PhoneForm';\nimport ConfirmCode from './auth/confirmCode';\nimport UserView from './userView/userView';\nimport Friends from './userView/friends';\nimport OneFriend from './userView/oneFriend';\nimport MoreFriends from './userView/MoreFriends';\nimport FriendRequests from './userView/FriendRequests';\nimport AppSettings from './settings/AppSettings';\nimport Header from './building-blocks/header';\nimport Chat from './chat/chat.js';\nimport store from './store';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\n\n\nconst App = () => {\n  return (\n    <div className=\"container\" style={{ paddingTop: 10 }}>\n\n      <Router>\n        <Header beanId=\"header1\" />\n        <Switch>\n          < Route exact path=\"/\" component={Home} />\n          < Route path=\"/user\" render={() => <UserView data={store} />} />\n          < Route path=\"/phone\" component={PhoneForm} />\n          < Route path=\"/friend\" component={OneFriend} />\n          < Route path=\"/chat\" render={() => <Chat beanId=\"chat1\"/>} />\n          < Route path=\"/pals\" render={() => <Friends data={store.updates} />} />\n          < Route path=\"/more-pals\" render={() => <MoreFriends data={store.updates} />} />\n          < Route path=\"/pal-requests\" render={() => <FriendRequests data={store.updates} />} />\n          < Route path=\"/settings\"render={() => <AppSettings beanId=\"appSettings1\"/>} />\n          < Route path=\"/confirm-token\" component={ConfirmCode} />\n          < Route path=\"*\" component={Home} />\n        </Switch>\n      </Router>\n    </div >\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.css';\nReactDOM.render( <App/> , document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}