{"version":3,"sources":["services/Constants.js","services/AjaxService.js","services/CashService.js","settings/AppSettingsService.js","services/BeanContextAware.js","store.js","services/PollService.js","notes/NotesService.js","Home.js","building-blocks/RenderForm.js","auth/PhoneForm.js","auth/PhoneToken.js","auth/confirmCode.js","settings/Checkbox.js","building-blocks/Info.js","building-blocks/PicWrapper.js","userView/SelectDistanceFilter.js","userView/SelectMinAgeFilter.js","userView/SelectMaxAgeFilter.js","settings/SelectPollInterval.js","settings/SelectTextColor.js","settings/SelectBackgroundColor.js","userView/userView.js","userView/EditBio.js","services/MatchDecoratorService.js","building-blocks/OnePicWrapper.js","userView/friends.js","building-blocks/BtnLink.js","userView/OneFriend.js","userView/MoreFriends.js","userView/FriendRequests.js","settings/AppSettings.js","building-blocks/header.js","chat/enterText.js","chat/messageWrapper.js","chat/Select.js","chat/CyrilicEmojiStrategy.js","chat/chat.js","notes/Notes.js","App.js","serviceWorker.js","index.js"],"names":["ipAdress","Const","URLS","BASE_URL","AUTH","PHONE","GET_TOKEN","UPDATES","PROFILE","USER","MATCH","SEND_MESSAGE","SEND_LOCATION","NEW_FRIENDS","SEND_SEEN","FAST_MATCH","LIKE","PASS","STORAGE","STORAGE_TOKEN","STORAGE_BOOKMARKS","STORAGE_SETTINGS","UPDATE_POLL_INTERVAL","LOCAL_CASH_VAR_NAME","AUTH_HEADER_NAME","PHONE_HEADER_NAME","VERSION","execute","method","url","data","headers","axios","doPost","getHeaders","doPut","doGet","doDelete","authHeaderName","phoneHeaderName","CashService","React","Component","props","persistAll","phone","obj","AjaxService","JSON","stringify","catch","e","console","error","loadAll","getPhone","setPhone","getToken","setToken","token","getSettings","settings","setSettings","persistSettings","persistBookmarks","arr","this","then","log","bgColor","textColor","bookmarks","cashStructureTemplate","reduce","json","value","key","applyDesignSettings","getSetting","textColors","class","applyClass","document","body","bgColors","persistSetting","settingName","settingObject","element","colors","selectedColor","forEach","color","classList","remove","add","getInputStyleClasses","updatePollInterval","isToShowPhotos","bean","state","Error","beanId","context","warn","get","reducer","combineReducers","form","reduxFormReducer","store","window","devToolsExtension","createStore","functionsQueue","addToFunctionsQ","funct","push","length","shift","funcToCall","getStore","getMatchById","id","matches","update","i","_id","addToStore","checkIfLogged","onSuccess","onFailure","getUpdates","getLastActivityDate","startUpdatePoll","AppSettingsService","mergeUpdates","updates","matchUpdate","oldMatch","newMsgs","messages","newMsgsCount","y","splice","concat","seen","lastSeenMsg","last_seen_msg_id","last_activity_date","BASE_DATE","addToUnreadMessagesBadge","markLastUnreadMessages","newLastSeenMsgId","oldLastSeenMsgId","localUser","profile","ind","msg","from","mtch","header","BeanContextAware","addMsgMatch","lastDate","chat1","triggerRenderFunc","changeButtonVisibility","isVisible","exceptionCount","isToStopUpdatePoll","stopUpdatePoll","exception","seconds","pollInterval","pollIntervalObj","setInterval","clearTimeout","saveBookmark","personId","getBookmarks","indexOf","removeBookmark","index","oneFromArr","saveAllByPhone","getOne","promise","Home","hits","isLoading","to","eachComponent","input","label","type","placeholder","meta","touched","className","RenderForm","options","handleSubmit","fields","RenderFieldWrappedInstance","reduxForm","onSubmit","map","op","noCash","name","uuidv1","Field","onChange","component","PhoneForm","handleChange","event","target","phoneNumAuth","history","ifNotLogged","preventDefault","setBookmarks","authToken","processAuth","PollService","optns","withRouter","PhoneToken","handleChangeToken","doAuth","persistToken","alert","autoComplete","ConfirmCode","confirmToken","phoneNumber","status","onChangeFun","Checkbox","doChangeState","changeHandler","setState","condition","checked","defaultChecked","Info","args","person","country","pos_info","age","birth_date","substring","city","jobs","title","schools","distance_mi","bio","PicWrapper","nextPic","photos","imgSrc","personName","onClick","src","alt","SelectDistanceFilter","parentObject","distanceFilter","radius","initialRadius","cssClasses","optionTags","SelectMinAgeFilter","int","parseInt","changeState","ageFilterMin","SelectMaxAgeFilter","ageFilterMax","SelectPollInterval","interval","onSelectPollInterval","styles","SelectTextColor","selected","triggerRender","SelectBackgroundColor","UserView","saveProfile","age_filter_max","age_filter_min","distance_filter","discoverable","disableSaveButton","isButtonDisabled","getProfile","toggleShowProfile","val","toggleShowPicsCheckbox","goChat","pathname","pos","lat","lon","image","info","disabled","pointVals","pointMode","banner","control","values","point","newMsgObj","postLocation","bindMap","startPort","overlayAll","showControls","showInputs","useDynamic","precision","columns","Header","accessor","sortable","defaultPageSize","showPagination","EditBio","goToFriendsView","user","elem","srcElement","getStyles","inputProps","getUserData","match","callbackFunc","userId","results","posInfo","region","OnePicWrapper","doClick","Friends","sortByLastActivityDate","a","b","timeA","Date","getTime","applySorting","arrToBeSorted","sortingFunc","sort","MatchDecoratorService","showUser","msgMatches","friends","persons","prsn","picProps","firstName","lastName","pageSize","BtnLink","OneFriend","NotesService","save","deleteMatch","matchId","isBookmarked","undefined","allBookmarks","location","getBookmarksAsObject","MoreFriends","getNewFriends","callBack","allFr","isMountedOk","pass","like","showMoreFriendsRefreshButton","hideMoreFriendsRefreshButton","InfoWrapper","Pic","one","FriendRequests","getFriendRequests","isActiveRecently","recently_active","style","width","height","AppSettings","findInMsgMatches","toggleFlashTabTitle","len","removeMsgMatch","isVisibleMoreFriendsTab","flashIntervalObj","startFlashTabTitle","stopFlashTabTitle","initialTitle","moreFriends1","Btn","exact","activeClassName","isVisibleNewMsgs","EnterText","createMessage","dt","created_date","toISOString","match_id","message","sent_date","timestamp","onKeyPress","oneMatch","friendId","injectEmoji","emojiInjectorFunc","MessageWrapper","msgDateObj","timeStr","toLocaleTimeString","dateStr","toLocaleDateString","isSeen","showDate","date","setTimeout","Select","numberMsgShown","emojis","text","face","injectEmojiFunction","emo","foundAt","replace","Chat","onFocus","ev","isOnFocus","deleteFromHeader","onBlur","prepareMessages","allMsgs","result","transformedMsg","theirs","mine","sendSeen","msgWrapped","inputStyles","addEventListener","removeEventListener","present","reorderedMessages","bordered","Notes","processUserData","step","all","formDummyMatch","App","paddingTop","path","render","Boolean","hostname","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e1354c72.chunk.js","sourcesContent":["let ipAdress = ' https://bender-app.herokuapp.com/';\n\nconst Const = {\n  URLS: {\n    BASE_URL: ipAdress,\n    AUTH: {\n      PHONE: ipAdress + 'requestCode',\n      GET_TOKEN: ipAdress + 'getToken/'\n    },\n    UPDATES: ipAdress + 'updates',\n    PROFILE: ipAdress + 'profile',\n    USER: ipAdress + 'user/',\n    MATCH: ipAdress +  'user/matches/',\n    SEND_MESSAGE: ipAdress + 'postMessage',\n    SEND_LOCATION: ipAdress + 'location',\n    NEW_FRIENDS: ipAdress + 'new-friends',\n    SEND_SEEN: ipAdress + 'seen/',\n    FAST_MATCH: ipAdress + 'fast-match',\n    LIKE: ipAdress + 'like/',\n    PASS: ipAdress + 'pass/',\n\n\n    //// storage api:\n    STORAGE: ipAdress + 'storage/',\n    STORAGE_TOKEN: ipAdress + 'storage/token/',\n    STORAGE_BOOKMARKS: ipAdress + 'storage/bookmarks/',\n    STORAGE_SETTINGS: ipAdress + 'storage/settings/'\n  },\n  UPDATE_POLL_INTERVAL: 20000,\n  LOCAL_CASH_VAR_NAME: '__TnDr__',\n  AUTH_HEADER_NAME: 'X-Auth-Token',\n  PHONE_HEADER_NAME: 'phone-number',\n  VERSION: '1.35'\n}\n\nexport default Const;\n","import React from 'react';\nimport axios from 'axios';\nimport Const from './Constants';\nimport CashService from './CashService';\n\nclass AjaxService extends React.Component {\n\n  execute = (method, url, data, headers) => {\n    return axios({\n      method: method,\n      url: url,\n      data: data,\n      headers: headers\n    });\n  };\n\n  doPost = (url, data, headers) => {\n    return this.execute('post', url, data, this.getHeaders(headers));\n  };\n\n  doPut = (url, data, headers) => {\n    return this.execute('put', url, data, this.getHeaders(headers));\n  };\n\n  doGet = (url, headers) => {\n    return this.execute('get', url, {}, this.getHeaders(headers));\n  };\n\n  doDelete = (url, headers) => {\n    return this.execute('delete', url, {}, this.getHeaders(headers));\n  };\n\n  getHeaders = (headers) => {\n    let authHeaderName = Const.AUTH_HEADER_NAME;\n    let phoneHeaderName = Const.PHONE_HEADER_NAME;\n    if (!headers) {\n      headers = {};\n    }\n\n    if (CashService[phoneHeaderName]) {\n      headers[phoneHeaderName] = CashService[phoneHeaderName];\n    }\n\n    if (CashService[authHeaderName]) {\n      headers[authHeaderName] = CashService[authHeaderName];\n    }\n    return headers;\n  };\n}\n\nexport default new AjaxService();\n","import React from 'react';\nimport Const from './Constants';\nimport AjaxService from './AjaxService';\n\nclass CashService extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this[Const.PHONE_HEADER_NAME] = null;\n    this[Const.AUTH_HEADER_NAME] = null;\n    this.settings = { bgColor: \"bg-dark\", textColor: \"text-white\" };\n    this.bookmarks = [];\n    this.cashStructureTemplate = {\n      settings: this.settings,\n      [Const.AUTH_HEADER_NAME]: { token: this[Const.AUTH_HEADER_NAME] },\n      bookmarks: this.bookmarks\n    }\n  };\n\n  persistAll = function (phone, obj) {\n    let promise = AjaxService.doPost(Const.URLS.STORAGE + phone, {\n      'json': JSON.stringify(obj)\n    }, {});\n    promise.catch((e) => {\n      console.error(e);\n    })\n  }\n\n  loadAll = function (phone) {\n    return AjaxService.doGet(Const.URLS.STORAGE + phone, {});\n  }\n\n  getPhone = () => {\n    return this[Const.PHONE_HEADER_NAME];\n  };\n\n  setPhone = (phone) => {\n    this[Const.PHONE_HEADER_NAME] = phone;\n  };\n\n  /// token:\n  getToken = () => {\n    return this[Const.AUTH_HEADER_NAME];\n  };\n\n  setToken = (token) => {\n    this[Const.AUTH_HEADER_NAME] = token;\n  };\n\n  persistToken(token) {\n    AjaxService.doPut(Const.URLS.STORAGE_TOKEN + this.getPhone(), {\n      'json': JSON.stringify({ \"token\": token })\n    });\n  }\n\n  //// settings:\n  getSettings = () => {\n    return this.settings;\n  };\n\n  setSettings = (settings) => {\n    this.settings = settings;\n  };\n\n  persistSettings = (settings) => {\n    AjaxService.doPut(Const.URLS.STORAGE_SETTINGS + this.getPhone(), {\n      'json': JSON.stringify(settings)\n    });\n  }\n\n  /// bookmarks:\n  getBookmarks() {\n    return this.bookmarks;\n  }\n\n  setBookmarks(bookmarks) {\n    this.bookmarks = bookmarks;\n  }\n\n  getBookmarksAsObject() {\n    return this.bookmarks.reduce((json, value, key) => {\n      json[value] = key;\n      return json;\n    }, {});\n  }\n\n  persistBookmarks = function (arr) {\n    let promise = AjaxService.doPost(Const.URLS.STORAGE_BOOKMARKS + this.getPhone(), {\n      'json': JSON.stringify(arr)\n    }, {});\n\n    promise.then((data) => {\n      console.log(data);\n    }).catch((e) => {\n      console.error(e);\n    })\n  }\n}\n\nexport default new CashService();\n","import React from 'react';\r\nimport CashService from '../services/CashService';\r\nimport Const from '../services/Constants';\r\n\r\n//this singleton applies settings at startup:\r\nclass AppSettingsService extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.textColors = [\r\n      { \"name\": 'Gray', \"class\": 'text-muted' },\r\n      { \"name\": 'White', \"class\": 'text-white' },\r\n      { \"name\": 'Dark', \"class\": 'text-dark' },\r\n      { \"name\": 'Black', \"class\": 'text-body' }\r\n    ]\r\n\r\n    this.bgColors = [\r\n      { \"name\": 'Gray', \"class\": 'bg-secondary' },\r\n      { \"name\": 'Dark', \"class\": 'bg-dark' },\r\n      { \"name\": 'Light', \"class\": 'bg-light' }\r\n    ]\r\n\r\n    this.updatePollInterval = Const.UPDATE_POLL_INTERVAL;\r\n    this.isToShowPhotos = true;\r\n  }\r\n\r\n  applyDesignSettings = () => {\r\n    let textColor = this.getSetting(\"textColor\") || this.textColors[0]?.class;\r\n    if (textColor) {\r\n      console.log(textColor);\r\n      \r\n      this.applyClass(document.body, this.textColors, textColor);\r\n    }\r\n\r\n    let bgColor = this.getSetting(\"bgColor\") || this.bgColors[0].class;\r\n    if (bgColor) {\r\n      this.applyClass(document.body, this.bgColors, bgColor);\r\n    }\r\n  }\r\n\r\n  persistSetting = (settingName, settingObject) => {\r\n    let settings = CashService.getSettings();\r\n    if (!settings) {\r\n      settings = {};\r\n      CashService.setSettings(settings);\r\n    }\r\n    settings[settingName] = settingObject;\r\n    CashService.persistSettings(settings);\r\n  }\r\n\r\n  getSetting = (settingName) => {\r\n    let settings = CashService.getSettings();\r\n    return settings?.[settingName];\r\n  }\r\n\r\n  applyClass = (element, colors, selectedColor) => {\r\n    colors.forEach(color => {\r\n      element.classList.remove(color.class);\r\n    });\r\n\r\n    element.classList.add(selectedColor);\r\n  }\r\n\r\n  getInputStyleClasses = () => {\r\n    return \"form-control \" + (this.getSetting(\"textColor\") || \" \") +\r\n      \" \" + (this.getSetting(\"bgColor\") || \"\");\r\n  }\r\n}\r\nexport default new AppSettingsService();\r\n","import React from 'react';\n\nclass BeanContextAware extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.context= {};\n  };\n\n  add = (bean) => {\n    if (!bean || !bean.state) {\n      throw new Error(\"Not allowed 'null' values for 'bean': \" + bean + \" !\");\n    }\n    let beanId = bean.state.beanId || bean.props.beanId;\n    if (!beanId) {\n      throw new Error(\"Not allowed 'null' value for 'beanId' \" + beanId  + \" !\" );\n    }\n    if (this.context[beanId]) {\n      console.warn(\"Bean with 'beanId': \" + beanId + \"is already registered under BeanContextAware!\");\n    }\n    this.context[beanId] = bean;\n  }\n\n  get = (beanId) => {\n    if (!beanId ) {\n      throw new Error(\"Not allowed 'null' value for 'beanId' \" + beanId + \" !\" );\n    }\n    return this.context[beanId];\n  }\n\n  remove = (bean) => {\n    if (!bean) {\n      throw new Error(\"Not allowed 'null' value for 'bean' \" + bean + \" !\" );\n    }\n    if ( typeof bean === 'string' ) {\n        delete this.context[bean];\n        return;\n    }\n    let beanId = bean.state.beanId || bean.props.beanId;\n    delete this.context[beanId];\n  }\n}\nexport default new BeanContextAware();\n","import { createStore, combineReducers } from 'redux';\nimport { reducer as reduxFormReducer } from 'redux-form';\n\nconst reducer = combineReducers({\n  form: reduxFormReducer // mounted under \"form\"\n})\nconst store =\n  (window.devToolsExtension ? window.devToolsExtension()(createStore) : createStore)(reducer)\n\nconst functionsQueue = [];\n\nlet addToFunctionsQ = (funct) => {\n  functionsQueue.push(funct);\n\n  while (functionsQueue.length > 0) {\n    let funcToCall = functionsQueue.shift()\n    funcToCall();\n  }\n}\n\nstore.getStore = () => {\n  // add dummy function as a placeholder\n  addToFunctionsQ(() => { });\n  return store;\n}\n\nstore.getMatchById = (id) => {\n  if (!id) {\n    throw new Error(\"'id' is not allowed to be: \" + id);\n  }\n  let matches = store.getStore()?.update?.data?.matches || [];\n  for (var i = 0; i < matches.length; i++) {\n    if (id === matches[i]._id) {\n      return matches[i];\n    }\n  }\n  return null;\n}\n\nstore.addToStore = (key, value) => {\n  if (!key || typeof (key) != 'string') {\n    throw new Error(\"Only objects of type 'string' are allowed!\");\n  }\n\n  addToFunctionsQ(\n    function () {\n      store[key] = value;\n    }\n  );\n}\n\nexport default store;\n","import React from 'react';\nimport Const from './Constants';\nimport AjaxService from './AjaxService';\nimport BeanContextAware from './BeanContextAware';\nimport AppSettingsService from '../settings/AppSettingsService';\nimport store from '../store';\n\nclass PollService extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    };\n    this.BASE_DATE = \"1984-08-01T00:00:00.000Z\";\n    this.last_activity_date = this.BASE_DATE;\n    this.exceptionCount = 0;\n  };\n\n  checkIfLogged = (headers, onSuccess, onFailure) => {\n    let promise = AjaxService.doGet(Const.URLS.PROFILE, headers)\n    promise.then((data) => {\n      store.addToStore('profile', data);\n      onSuccess()\n      this.getUpdates(this.getLastActivityDate());\n      this.startUpdatePoll(AppSettingsService.updatePollInterval);\n\n    }).catch((e) => {\n      console.error(e);\n      onFailure()\n    })\n  }\n\n  mergeUpdates = (store, updates) => {\n    let matches = updates.data.matches;\n\n    for (let i = 0; i < matches.length; i++) {\n      let matchUpdate = matches[i];\n      let oldMatch = store.getMatchById(matchUpdate._id);\n      //merge brand new matches:\n      if (!oldMatch) {\n        store.getStore().update.data.matches.push(matchUpdate);\n        this.addToUnreadMessagesBadge(matchUpdate);\n        continue;\n      }\n\n      //merge new messages:\n      let newMsgs = matchUpdate.messages;\n      let newMsgsCount = newMsgs.length;\n      for (let y = oldMatch.messages.length - 1; 0 <= newMsgsCount || 0 <= y; y-- , newMsgsCount--) {\n        if (oldMatch.messages[y] && !oldMatch.messages[y]._id) {\n          oldMatch.messages.splice(y, 1);\n        }\n      }\n      oldMatch.messages = oldMatch.messages.concat(newMsgs);\n\n      /// merge seen:\n      if (!oldMatch.seen) {\n        oldMatch.seen = {};\n      }\n\n      let lastSeenMsg = matchUpdate?.seen?.last_seen_msg_id;\n      if (!!lastSeenMsg) {\n        oldMatch.seen.last_seen_msg_id = lastSeenMsg;\n      }\n\n      /// merge last_activity_date:\n      oldMatch.last_activity_date = matchUpdate?.last_activity_date || oldMatch.last_activity_date || this.BASE_DATE;\n    }\n  }\n\n  markLastUnreadMessages = (store, updates) => {\n    let matches = updates?.data?.matches;\n\n    for (let i = 0; i < matches?.length; i++) {\n      let matchUpdate = matches[i];\n      let oldMatch = store.getMatchById(matchUpdate._id);\n\n      let newLastSeenMsgId = matchUpdate?.seen?.last_seen_msg_id;\n      let oldLastSeenMsgId = oldMatch?.seen?.last_seen_msg_id;\n      let localUser = store?.profile?.data;\n\n      if (!localUser || !localUser._id) {\n        continue;\n      }\n      let newMsgs = matchUpdate.messages;\n\n      for (var ind = newMsgs.length - 1; 0 <= ind; ind--) {\n        let msg = newMsgs[ind];\n\n        if (!msg.from) {\n          continue;\n        }\n\n        if (localUser._id !== msg.from) {\n          if ((msg._id !== newLastSeenMsgId) || (!newLastSeenMsgId && !oldLastSeenMsgId)) {\n            this.addToUnreadMessagesBadge(oldMatch);\n          }\n          break;\n        }\n      }\n    }\n  }\n\n  addToUnreadMessagesBadge = (mtch) => {\n    let header = BeanContextAware.get('header1');\n    if (header) {\n      header.addMsgMatch(mtch)\n    }\n  }\n\n  getUpdates = (lastDate) => {\n    let header = BeanContextAware.get('header1');\n    let chat1 = BeanContextAware.get('chat1');\n    let data = {\n      \"last_activity_date\": lastDate\n    }\n\n    let promise = AjaxService.doPost(Const.URLS.UPDATES, data, {});\n    promise.then((data) => {\n      if (store.update) {\n        this.mergeUpdates(store, data);\n      } else {\n        store.addToStore('update', data);\n      }\n\n      this.markLastUnreadMessages(store, data);\n\n      /// merge global (updates polling) last_activity_date:\n      this.last_activity_date = data.data.last_activity_date;\n\n      if (chat1) chat1.triggerRenderFunc();\n      if (header) header.changeButtonVisibility({ isVisible: true });\n\n      this.exceptionCount = 0;\n\n    }).catch((e) => {\n      console.error(e);\n\n      if (header) header.changeButtonVisibility({ isVisible: false })\n\n      if (this.isToStopUpdatePoll(e)) this.stopUpdatePoll();\n\n      this.exceptionCount++\n    })\n  }\n\n  isToStopUpdatePoll = (exception) => {\n    if (this.exceptionCount > 2) {\n      return true;\n    }\n    return false;\n  }\n\n  startUpdatePoll = (seconds) => {\n    if (!seconds) {\n      console.error(\"error null val for 'seconds'\");\n      return;\n    }\n    this.stopUpdatePoll();\n    this.pollInterval = seconds\n    this.pollIntervalObj = setInterval(\n      () => {\n        this.getUpdates(this.getLastActivityDate());\n      }, seconds\n    );\n  }\n\n  getLastActivityDate = () => {\n    return this.last_activity_date;\n  }\n\n  stopUpdatePoll = () => {\n    if (this.pollIntervalObj) {\n      clearTimeout(this.pollIntervalObj)\n    }\n  }\n}\nexport default new PollService();\n////update after 'like' no messages - {\"matches\":[{\"seen\":{\"match_seen\":false},\"_id\":\"59c7cb4e539465f9756024295f26954c5497b601005dc564\",\"id\":\"59c7cb4e539465f9756024295f26954c5497b601005dc564\",\"closed\":false,\"common_friend_count\":0,\"common_like_count\":0,\"created_date\":\"2020-08-07T15:03:11.262Z\",\"dead\":false,\"last_activity_date\":\"2020-08-07T15:03:11.262Z\",\"message_count\":0,\"messages\":[],\"muted\":false,\"participants\":[\"59c7cb4e539465f975602429\"],\"pending\":false,\"is_super_like\":false,\"is_boost_match\":false,\"is_super_boost_match\":false,\"is_experiences_match\":false,\"is_fast_match\":false,\"is_opener\":false,\"person\":{\"_id\":\"59c7cb4e539465f975602429\",\"birth_date\":\"1987-08-10T15:03:43.687Z\",\"gender\":1,\"name\":\"Paloma\",\"ping_time\":\"2014-12-09T00:00:00.000Z\",\"photos\":[{\"id\":\"d3d917a3-c69d-42dc-89b0-6ec1669dcec5\",\"url\":\"https://images-ssl.gotinder.com/59c7cb4e539465f975602429/1080x1080_d3d917a3-c69d-42dc-89b0-6ec1669dcec5.jpg\",\"processedFiles\":[{\"url\":\"https://images-ssl.gotinder.com/59c7cb4e539465f975602429/640x640_d3d917a3-c69d-42dc-89b0-6ec1669dcec5.jpg\",\"height\":640,\"width\":640},{\"url\":\"https://images-ssl.gotinder.com/59c7cb4e539465f975602429/320x320_d3d917a3-c69d-42dc-89b0-6ec1669dcec5.jpg\",\"height\":320,\"width\":320},{\"url\":\"https://images-ssl.gotinder.com/59c7cb4e539465f975602429/172x172_d3d917a3-c69d-42dc-89b0-6ec1669dcec5.jpg\",\"height\":172,\"width\":172},{\"url\":\"https://images-ssl.gotinder.com/59c7cb4e539465f975602429/84x84_d3d917a3-c69d-42dc-89b0-6ec1669dcec5.jpg\",\"height\":84,\"width\":84}],\"fileName\":\"d3d917a3-c69d-42dc-89b0-6ec1669dcec5.jpg\",\"extension\":\"jpg\"}]},\"following\":true,\"following_moments\":true,\"readreceipt\":{\"enabled\":false}}],\"blocks\":[],\"inbox\":[],\"liked_messages\":[],\"harassing_messages\":[],\"lists\":[],\"goingout\":[],\"deleted_lists\":[],\"squads\":[],\"last_activity_date\":\"2020-08-07T15:03:11.262Z\",\"poll_interval\":{\"standard\":2000,\"persistent\":60000}}\n/// after my message is sent - {\"matches\":[{\"seen\":{\"match_seen\":false},\"_id\":\"59c7cb4e539465f9756024295f26954c5497b601005dc564\",\"last_activity_date\":\"2020-08-07T15:05:46.219Z\",\"messages\":[{\"_id\":\"5f2d6dca47d1400100fe5f04\",\"match_id\":\"59c7cb4e539465f9756024295f26954c5497b601005dc564\",\"sent_date\":\"2020-08-07T15:05:46.219Z\",\"message\":\"ммм... много закачлива усмивка \\uD83D\\uDE09\",\"to\":\"59c7cb4e539465f975602429\",\"from\":\"5f26954c5497b601005dc564\",\"created_date\":\"2020-08-07T15:05:46.219Z\",\"timestamp\":1596812746219}],\"is_new_message\":true,\"readreceipt\":{\"enabled\":false}}],\"blocks\":[],\"inbox\":[],\"liked_messages\":[],\"harassing_messages\":[],\"lists\":[],\"goingout\":[],\"deleted_lists\":[],\"squads\":[],\"last_activity_date\":\"2020-08-07T15:05:46.219Z\",\"poll_interval\":{\"standard\":2000,\"persistent\":60000}}\n/// their first message - {\"matches\":[{\"seen\":{\"match_seen\":false},\"_id\":\"5de0287220298d0100540ea05f26954c5497b601005dc564\",\"last_activity_date\":\"2020-08-07T15:53:30.726Z\",\"messages\":[{\"_id\":\"5f2d78faf6162301001219ba\",\"match_id\":\"5de0287220298d0100540ea05f26954c5497b601005dc564\",\"sent_date\":\"2020-08-07T15:53:30.726Z\",\"message\":\"И двете\",\"to\":\"5f26954c5497b601005dc564\",\"from\":\"5de0287220298d0100540ea0\",\"created_date\":\"2020-08-07T15:53:30.726Z\",\"timestamp\":1596815610726}],\"is_new_message\":true,\"readreceipt\":{\"enabled\":false}}],\"blocks\":[],\"inbox\":[],\"liked_messages\":[],\"harassing_messages\":[],\"lists\":[],\"goingout\":[],\"deleted_lists\":[],\"squads\":[],\"last_activity_date\":\"2020-08-07T15:53:30.726Z\",\"poll_interval\":{\"standard\":2000,\"persistent\":60000}}\n\n\n","import React from 'react';\r\nimport store from '../store';\r\nimport Const from '../services/Constants';\r\nimport AjaxService from '../services/AjaxService';\r\nimport CashService from '../services/CashService';\r\n\r\nclass NotesService extends React.Component {\r\n\r\n  saveBookmark = function (personId) {\r\n    let bookmarks = CashService.getBookmarks();\r\n    if (bookmarks.indexOf(personId) !== -1) {\r\n      return;\r\n    }\r\n    bookmarks.push(personId);\r\n    CashService.persistBookmarks(bookmarks);\r\n  }\r\n\r\n  removeBookmark = function (personId) {\r\n    let bookmarks = CashService.getBookmarks();\r\n    for (let index = 0; index < bookmarks.length; index++) {\r\n      let oneFromArr = bookmarks[index];\r\n      if (!!personId && oneFromArr === personId) {\r\n        bookmarks.splice(index, 1);\r\n        CashService.persistBookmarks(bookmarks);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  saveAllByPhone = function (phone = CashService.getPhone()) {\r\n    CashService.persistAll(phone, CashService.cashStructureTemplate);\r\n  }\r\n\r\n  getOne = function (phone = CashService.getPhone()) {\r\n    let promise = AjaxService.doGet(Const.URLS.STORAGE + phone, {});\r\n\r\n    promise.then((data) => {\r\n      console.log(data);\r\n    }).catch((e) => {\r\n      console.error(e);\r\n    })\r\n  }\r\n\r\n  // delete = function (phone = CashService.getPhone()) {\r\n  //   let promise = AjaxService.doDelete(Const.URLS.STORAGE + phone, {});\r\n\r\n  //   promise.then((data) => {\r\n  //     console.log(data);\r\n  //   }).catch((e) => {\r\n  //     console.error(e);\r\n  //   })\r\n  // }\r\n\r\n}\r\nexport default new NotesService();","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hits: [],\n      isLoading: false,\n      error: null,\n    };\n  }\n\n  componentDidMount() {\n  }\n\n  render() {\n    return (\n      <div >\n        <h1>Welcome</h1>\n        <Link to=\"/phone\">  Login with phone</Link>\n        <p/>\n        <Link to=\"/phone-token\">  Login with phone and token</Link>\n      </div >\n    )\n  }\n}\n\nexport default Home;\n","import React from 'react';\nimport uuidv1 from 'uuid/v1';\nimport { Field, reduxForm } from 'redux-form'\nimport store from '../store'\nimport { Provider } from 'react-redux'\n\nconst eachComponent = ({ input, label, type, value, placeholder, meta: { touched, error } }) => (\n  <div>\n    <label>{label}</label>\n    <div>\n      <input className='form-control' {...input} placeholder={placeholder} type={type} />\n      {touched && error && <span>{error}</span>}\n      <p />\n    </div>\n  </div>\n)\nlet randomizeName = (obj) => {\n  if (obj.noCash) { // prevent auto-suggest\n    obj.name = uuidv1();\n  }\n}\nclass RenderForm extends React.Component {\n\n  render() {\n    let { options } = this.props;\n    let handleSubmit = options.handleSubmit;\n    let fields = options.fields;\n\n    let RenderFieldWrapped = () => (\n      <div>\n        <form onSubmit={handleSubmit} >\n          {\n            fields.map(op => {\n              randomizeName(op)\n              return <div key={op.name}>\n                <Field name={op.name} onChange={op.onChange} component={eachComponent}\n                  type=\"input\" placeholder={op.placeholder} label={op.label} />\n                <p />\n              </div>\n            })\n          }\n          < input className=\"btn btn-primary\" type=\"submit\" value=\"Submit\" />\n        </form>\n      </div>\n    )\n\n\n    let RenderFieldWrappedInstance = reduxForm({\n      form: 'RenderFieldWrapped'\n    })(RenderFieldWrapped);\n\n    return (\n      <div>\n        <Provider store={store}>\n          <RenderFieldWrappedInstance options={options} />\n        </Provider>\n      </div>\n    )\n  }\n}\nexport default RenderForm\n","import React from 'react';\nimport Const from '../services/Constants';\nimport AjaxService from '../services/AjaxService';\nimport CashService from '../services/CashService';\nimport PollService from '../services/PollService';\nimport AppSettingsService from '../settings/AppSettingsService';\nimport RenderForm from '../building-blocks/RenderForm';\nimport { withRouter } from 'react-router-dom';\n\nclass PhoneForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      phone: ''\n    };\n  }\n\n  handleChange = event => {\n    this.state.phone = event.target.value;\n  };\n\n  phoneNumAuth = function (phone) {\n    let promise = AjaxService.doPost(Const.URLS.AUTH.PHONE, {\n      'phone': phone\n    }, {});\n\n    promise.then(() => {\n      CashService.setPhone(phone);\n      this.props.history.push('/confirm-token');\n    }).catch((e) => {\n      CashService.setPhone(null);\n      console.error(e);\n    })\n  }\n\n  ifNotLogged = (phone) => {\n    CashService.setToken(null);\n    this.phoneNumAuth(phone);\n  }\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    let phone = this.state.phone;\n\n    let promise = CashService.loadAll(phone);\n    CashService.setPhone(phone);\n    promise.then((data) => {\n      console.log(data?.data);\n\n      let settings = data?.data?.settings;\n      if (settings) {\n        CashService.setSettings(settings);\n        AppSettingsService.applyDesignSettings();\n      }\n      let bookmarks = data?.data?.bookmarks;\n      if (bookmarks) {\n        CashService.setBookmarks(bookmarks);\n      }\n      let authToken = data?.data?.[Const.AUTH_HEADER_NAME]?.token;\n      this.processAuth(authToken, phone);\n    }).catch((e) => {\n      console.error(e);\n    })\n  }\n\n  processAuth = (authToken, phone) => {\n    if (authToken) {\n      console.log(\"use current session:\");\n      CashService.setToken(authToken);\n      PollService.checkIfLogged({},\n        () => { this.props.history.push('/user') },\n        () => { this.ifNotLogged(phone) });\n\n    } else {\n      CashService.persistAll(phone, CashService.cashStructureTemplate);\n      this.phoneNumAuth(phone);\n    }\n  }\n\n  render() {\n    const optns = {\n      handleSubmit: this.handleSubmit,\n      fields: [\n        {\n          name: 'Phone number', label: 'Phone number',\n          placeholder: 'Please, fill in ur phone number',\n          onChange: this.handleChange\n        }\n      ]\n    }\n\n    return (\n      <div>\n        <RenderForm options={optns} />\n      </div >\n    )\n  }\n}\nexport default withRouter(PhoneForm);\n","import React from 'react';\nimport Const from '../services/Constants';\nimport CashService from '../services/CashService';\nimport PollService from '../services/PollService';\nimport AppSettingsService from '../settings/AppSettingsService';\nimport RenderForm from '../building-blocks/RenderForm';\nimport { withRouter } from 'react-router-dom';\n\nclass PhoneToken extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      phone: '',\n      token: ''\n    };\n  }\n\n  handleChange = event => {\n    this.state.phone = event.target.value;\n  };\n\n  handleChangeToken = event => {\n    this.state.token = event.target.value;\n  };\n\n  doAuth = function (authToken, phone) {\n    let onSuccess = () => {\n      CashService.setToken(authToken);\n      CashService.persistToken(authToken);\n      this.props.history.push('/user');\n    }\n\n    let onFailure = () => {\n      window.alert('The provided token: ' + authToken\n      + ' is expired... phone: ' +phone);\n      this.props.history.push('/phone-token');\n    }\n\n    let headers = {\n      [Const.AUTH_HEADER_NAME] : authToken\n    }\n\n    PollService.checkIfLogged(headers, onSuccess, onFailure);\n  }\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    let phone = this.state.phone;\n    let authToken = this.state.token\n\n    let promise = CashService.loadAll(phone);\n    CashService.setPhone(phone);\n    promise.then((data) => {\n\n      let settings = data?.data?.settings;\n      if (settings) {\n        CashService.setSettings(settings);\n        AppSettingsService.applyDesignSettings();\n      }\n      let bookmarks = data?.data?.bookmarks;\n      if (bookmarks) {\n        CashService.setBookmarks(bookmarks);\n      }\n\n      this.doAuth(authToken, phone)\n\n    }).catch((e) => {\n      console.error(e);\n    })\n  }\n\n  render() {\n    const optns = {\n      handleSubmit: this.handleSubmit,\n      fields: [\n        { name: 'Phone number', label: 'Phone number', placeholder: 'phone number..', onChange: this.handleChange },\n        { name: 'X-token', label: 'X-token', placeholder: 'auth token..', noCash: true, onChange: this.handleChangeToken }\n      ]\n    }\n\n    return (\n      <div autoComplete=\"new-password\">\n        <RenderForm autoComplete=\"new-password\" options={optns} />\n      </div >\n    )\n  }\n}\nexport default withRouter(PhoneToken);\n","import React from 'react';\nimport Const from '../services/Constants';\nimport AjaxService from '../services/AjaxService';\nimport PollService from '../services/PollService';\nimport CashService from '../services/CashService';\nimport RenderForm from '../building-blocks/RenderForm';\nimport { withRouter } from 'react-router-dom';\n\nclass ConfirmCode extends React.Component {\n  constructor(props) {\n\n    super(props);\n    this.state = {\n      confirmToken: ''\n    };\n  }\n\n  handleChange = event => {\n    this.state.confirmToken = event.target.value;\n    //this.setState({confirmToken: event.target.value});\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    let phoneNumber = CashService.getPhone();\n    if (!phoneNumber) {\n      throw new Error(\"CashService[Const.PHONE_HEADER_NAME] is not allowed to be \" + phoneNumber);\n    }\n    let { history } = this.props;\n\n    let promise = AjaxService.doGet(Const.URLS.AUTH.GET_TOKEN + this.state.confirmToken + \"/\" + phoneNumber);\n\n    promise.then(function (value) {\n      console.log(value);\n      if (value && value.status === 200 && value.data) {\n        let token = value.data[Const.AUTH_HEADER_NAME];\n\n        let headers = {\n          [Const.AUTH_HEADER_NAME] : token\n        }\n\n        let onSuccess = function() {\n          CashService.setToken(token);\n          CashService.persistToken(token);\n          history.push('/user');\n        }\n\n        let onFailure = function() {\n          history.push('/phone');\n        }\n\n        PollService.checkIfLogged(headers, onSuccess, onFailure);\n      }\n    }).catch((e) => {\n      // delete cash[store.phoneNumber];\n      // delete store.phoneNumber;\n      // localStorage.setItem(cashVarName, JSON.stringify(cash));\n      console.log(e);\n    })\n\n  }\n\n  render() {\n    const optns = {\n      handleSubmit: this.handleSubmit,\n      fields: [\n        { name: 'Confirmation code', label: 'Confirmation code', placeholder: 'confirmation code...', \n        noCash: true, onChangeFun: this.handleChange }\n      ]\n    }\n    return (\n      <div >\n        <RenderForm options={optns} />\n      </div>\n    );\n  }\n}\nexport default withRouter(ConfirmCode)\n","import React from 'react';\n\nexport default class Checkbox extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      condition: props.condition\n    }\n\n    this.changeHandler = props.changeHandler;\n    this.defaultChecked = props.defaultChecked;\n    this.label = props.label;\n  }\n\n  doChangeState = (e) => {\n    this.changeHandler(e);\n    this.setState({\n      condition: e.target.checked\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"form-check\">\n        <input className=\"form-check-input\" type=\"checkbox\" checked={this.state.condition} onChange={this.doChangeState} /> \n        <label className=\"form-check-label\"> {this.label} </label>\n      </div>\n    )\n  }\n}","import React from 'react';\n\nfunction Info(args) {\n  let { person } = args;\n  if (!person) {\n    return (\n      <div> </div>\n    )\n  }\n  let country = person.pos_info ? (person.pos_info.country ? person.pos_info.country.name : \"\") : \"\";\n  let age = person.birth_date ? person.birth_date.substring(0, 4) : \"\";\n  let city = person.pos_info ? (person.pos_info.city ? person.pos_info.city.name : \"\") : \"\";\n  person.jobs = person.jobs?.[0]?.title?.name || \"\";\n  person.schools = person.schools?.[0]?.name || \"\";\n  return (\n    <div className=\"text-justify text-wrap\">\n      {person.name ? (<div> <span className=\"font-weight-bold\">Name:  </span> {person.name} </div>) : null}\n      {person.birth_date ? (<div> <span className=\"font-weight-bold\">Date of Birth:  </span> {age} </div>) : null}\n      {person.distance_mi ? (<div> <span className=\"font-weight-bold\">Distance (miles):  </span> {person.distance_mi} </div>) : null}\n      {city ? (<div> <span className=\"font-weight-bold\">Location:  </span> {city}, {country}  </div>) : null}\n      {person.bio ? (<div> <span className=\"font-weight-bold\">Bio:  </span> {person.bio} </div>) : null}\n      {person.jobs ? (<div> <span className=\"font-weight-bold\">Job:  </span> {person.jobs} </div>) : null}\n      {person.schools ? (<div> <span className=\"font-weight-bold\">Schools:  </span> {person.schools} </div>) : null}\n    </div>\n  )\n}\n\nexport default Info;","import React from 'react';\nimport AppSettingsService from '../settings/AppSettingsService';\n\nclass PicWrapper extends React.Component {\n  constructor(props) {\n    super(props);\n    let { photos, name } = this.props;\n    this.personName = name;\n\n    this.isToShowPhotos = AppSettingsService.isToShowPhotos;\n    this.ind = 0;\n\n    let imgSrc = this.isToShowPhotos ? photos?.[this.ind]?.url : null;\n\n    this.state = {\n      photos: photos,\n      imgSrc: imgSrc\n    };\n  }\n\n   nextPic = () => {\n    if (!this.isToShowPhotos) {\n      return;\n    }\n    if (this.state.photos.length < 2) {\n      return;\n    }\n    if (this.ind < this.state.photos.length - 1) {\n      this.ind++;\n    } else {\n      this.ind = 0;\n    }\n    this.setState({\n      imgSrc: this.state.photos[this.ind].url\n    });\n  }\n\n  render() {\n    if (!this.state.imgSrc) {\n      return (\n        <div>\n        </div>\n      )\n    } else if (this.isToShowPhotos) {\n      return (\n        <div className=\"container-fluid px-0\">\n          <img onClick={this.nextPic} src={this.state.imgSrc} alt=\"some image\" className='img-fluid w-100' />\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <label className=\"text-center\">{this.personName} </label>\n        </div>\n      );\n    }\n\n  }\n}\nexport default PicWrapper;\n","import React from 'react'\nimport AppSettingsService from '../settings/AppSettingsService';\n\nexport default class SelectDistanceFilter extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      radius: props.initialRadius || 0\n    }\n    this.parentObject = props.parentObject;\n  }\n\n  changeHandler = (e) => {\n    this.parentObject.setState({ distanceFilter: e.target.value })\n  }\n\n  render() {\n    let cssClasses = AppSettingsService.getInputStyleClasses()\n    let optionTags = [];\n    for (let value = 1; value < 100; value++) {\n      optionTags.push(<option key={value} value={value}>{value}</option>)\n    }\n    return (\n      <form>\n        <div className='form-group'>\n          <label>Distance (miles):</label>\n          <select\n            className={cssClasses}\n            value={this.state.radius}\n            onChange={this.changeHandler}>\n            {optionTags}\n          </select>\n        </div>\n      </form>\n    );\n  }\n}\n","import React from 'react'\nimport AppSettingsService from '../settings/AppSettingsService';\n\nexport default class SelectMinAgeFilter extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      ageFilterMin: props.ageFilterMin || 18\n    }\n    this.parentObject = props.parentObject;\n  }\n\n  changeHandler = (e) => {\n    console.log(e.target.value)\n    let int = parseInt(e.target.value)\n    this.parentObject.changeState({ ageFilterMin: int })\n  }\n\n  render() {\n    let cssClasses = AppSettingsService.getInputStyleClasses()\n    let optionTags = [];\n    for (let value = 18; value < 50; value++) {\n      optionTags.push(<option key={value} value={value}>{value}</option>);\n    }\n    return (\n      <form>\n        <div className='form-group'>\n          <label>Min age:</label>\n          <select\n            className={cssClasses}\n            value={this.state.ageFilterMin}\n            onChange={this.changeHandler}>\n            {optionTags}\n          </select>\n        </div>\n      </form>\n    );\n  }\n}\n","import React from 'react'\nimport AppSettingsService from '../settings/AppSettingsService';\n\nexport default class SelectMaxAgeFilter extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      ageFilterMax: props.ageFilterMax || 1000\n    }\n    this.parentObject = props.parentObject;\n  }\n\n  changeHandler = (e) => {\n    console.log(e.target.value)\n    let int = parseInt(e.target.value)\n    this.parentObject.changeState({ ageFilterMax: int })\n  }\n\n  render() {\n    let cssClasses = AppSettingsService.getInputStyleClasses()\n    let optionTags = [];\n    for (let value = 18; value < 55; value++) {\n      optionTags.push(<option key={value} value={value}>{value}</option>);\n    }\n    optionTags.push(<option key={1000} value={1000}>{\"55+\"}</option>);\n    return (\n      <form>\n        <div className='form-group'>\n          <label>Maximal age:</label>\n          <select\n            className={cssClasses}\n            value={this.state.ageFilterMax}\n            onChange={this.changeHandler}>\n            {optionTags}\n          </select>\n        </div>\n      </form>\n    );\n  }\n}\n","import React, { Component } from 'react'\nimport AppSettingsService from './AppSettingsService';\n\nexport default class SelectPollInterval extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      interval: AppSettingsService.updatePollInterval\n    }\n  }\n\n  changeHandler = (e) => {\n    this.setState({\n      interval: e.target.value\n    })\n    AppSettingsService.updatePollInterval = e.target.value;\n    this.props.onSelectPollInterval(e.target.value);\n  }\n\n  render() {\n    return (\n      <form>\n        <div className='form-group'>\n          <label>Updates interval:</label>\n          <select\n            className={this.props.styles}\n            value={this.state.interval}\n            onChange={this.changeHandler}>\n            <option value=\"10000\">10 sec</option>\n            <option value=\"20000\">20 sec</option>\n            <option value=\"40000\">40 sec</option>\n            <option value=\"50000\">50 sec</option>\n            <option value=\"60000\">1 min</option>\n            <option value=\"300000\">5 min</option>\n            <option value=\"600000\">10 min</option>\n          </select>\n        </div>\n      </form>\n    );\n  }\n}\n","import React, { Component } from 'react'\nimport AppSettingsService from './AppSettingsService';\n\nexport default class SelectTextColor extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      selected: AppSettingsService.getSetting(\"textColor\") || AppSettingsService.textColors[0]\n    }\n  }\n\n  changeHandler = (event) => {\n    let color = event.target.value;\n\n    AppSettingsService.applyClass(document.body, AppSettingsService.textColors, color);\n    AppSettingsService.persistSetting(\"textColor\", color);\n\n    this.setState({\n      selected: color\n    })\n    this.props.triggerRender();\n  }\n\n  render() {\n    return (\n      <form>\n        <div className='form-group'>\n          <label>Select text color:</label>\n          <select\n            className={this.props.styles}\n            value={this.state.selected}\n            onChange={this.changeHandler}>\n            {AppSettingsService.textColors.map(\n              (color) => {\n                return (<option key={color.name} value={color.class}>{color.name}</option>);\n              }\n            )}\n          </select>\n        </div>\n      </form>\n    );\n  }\n}","import React, { Component } from 'react';\nimport AppSettingsService from './AppSettingsService';\n\nexport default class SelectBackgroundColor extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selected: AppSettingsService.getSetting(\"bgColor\") || AppSettingsService.bgColors[0]\n    }\n  }\n\n  changeHandler = (event) => {\n    let color = event.target.value;\n\n    AppSettingsService.applyClass(document.body, AppSettingsService.bgColors, color);\n    AppSettingsService.persistSetting(\"bgColor\", color);\n\n    this.setState({\n      selected: color\n    })\n    this.props.triggerRender();\n  }\n\n  render() {\n    return (\n      <form>\n        <div className='form-group'>\n          <label>Select background color:</label>\n          <select className={this.props.styles}\n            value={this.state.selected}\n            onChange={this.changeHandler}>\n            {AppSettingsService.bgColors.map(\n              (color) => {\n                return (<option key={color.name} value={color.class}>{color.name}</option>);\n              }\n            )}\n          </select>\n        </div>\n      </form>\n    );\n  }\n}\n","import React from 'react';\nimport LocationPicker from \"react-leaflet-location-picker\";\nimport { withRouter } from 'react-router-dom'\nimport \"react-table/react-table.css\"\nimport ReactTable from \"react-table\";\nimport Checkbox from '../settings/Checkbox';\nimport Info from \"../building-blocks/Info\";\nimport PicWrapper from \"../building-blocks/PicWrapper\";\nimport AjaxService from '../services/AjaxService';\nimport store from '../store';\nimport Const from '../services/Constants';\nimport SelectDistanceFilter from './SelectDistanceFilter';\nimport SelectMinAgeFilter from './SelectMinAgeFilter';\nimport SelectMaxAgeFilter from './SelectMaxAgeFilter';\n\n\nimport PollService from '../services/PollService';\n\nimport SelectPollInterval from '../settings/SelectPollInterval';\nimport AppSettingsService from '../settings/AppSettingsService';\nimport SelectTextColor from '../settings/SelectTextColor';\nimport SelectBackgroundColor from '../settings/SelectBackgroundColor';\n\n\nclass UserView extends React.Component {\n  constructor(props) {\n    super(props);\n\n\n\n    this.state = {\n      styles: AppSettingsService.getInputStyleClasses(),\n      isToShowPhotos: AppSettingsService.isToShowPhotos,\n\n      profile: this.props?.data?.profile?.data,\n      hits: [],\n      error: null,\n      distanceFilter: null,\n      ageFilterMax: null,\n      ageFilterMin: null,\n      discoverable: false,\n      isButtonDisabled: false\n    };\n    //this.isButtonDisabled = false;\n    this.isLoading = false;\n  }\n\n  saveProfile = () => {\n    let data = {\n      age_filter_max: this.state.ageFilterMax,\n      age_filter_min: this.state.ageFilterMin,\n      distance_filter: this.state.distanceFilter,\n      discoverable: this.state.discoverable\n    }\n    AjaxService.doPost(Const.URLS.PROFILE, data, {})\n  }\n\n  disableSaveButton = () => {\n    if (this.state.ageFilterMax < this.state.ageFilterMin) {\n      this.setState({ isButtonDisabled: true })\n      return;\n    }\n    this.setState({ isButtonDisabled: false })\n  }\n\n  getProfile = () => {\n    this.isLoading = true\n    let promise = AjaxService.doGet(Const.URLS.PROFILE, {})\n    promise.then((data) => {\n      if (!data?.data) return;\n\n      store.addToStore('profile', data);\n      this.setState({\n        distanceFilter: data.data.distance_filter,\n        ageFilterMax: data.data.age_filter_max,\n        ageFilterMin: data.data.age_filter_min,\n        discoverable: data.data.discoverable,\n        profile: data.data\n      }, () => { this.isLoading = false })\n    }).catch((e) => {\n      console.error(e);\n      this.isLoading = false\n    })\n  }\n\n  componentWillMount() {\n    if (this.isLoading) {\n      return;\n    }\n    this.getProfile();\n  }\n\n  changeState = (obj) => {\n    this.setState(obj, () => { this.disableSaveButton() });\n  }\n\n  toggleShowProfile = (event) => {\n    this.setState({\n      discoverable: event?.target?.checked\n    })\n  }\n\n  onSelectPollInterval = (val) => {\n    PollService.startUpdatePoll(val);\n    this.setState({\n      pollInterval: val\n    })\n  }\n\n  triggerRender = () => {\n    this.setState({\n      styles: AppSettingsService.getInputStyleClasses()\n    })\n  }\n\n  toggleShowPicsCheckbox = (event) => {\n    AppSettingsService.isToShowPhotos = event.target.checked;\n    this.setState({\n      isToShowPhotos: AppSettingsService.isToShowPhotos\n    })\n  }\n  goChat = () => {\n    this.props.history.push({\n      pathname: '/edit-bio',\n      state: { data: {} }\n    })\n  }\n  render() {\n    var profile = this.state?.profile\n    if (!profile) {\n      return (\n        <div></div>\n      )\n    }\n\n    let pos = profile?.pos ? [profile?.pos?.lat, profile?.pos?.lon] : [0, 0];\n\n    let postLocation = (args) => {\n      let newMsgObj = {\n        lat: args[0],\n        lon: args[1]\n      }\n      AjaxService.doPost(Const.URLS.SEND_LOCATION, newMsgObj, {})\n    }\n\n    let UserData = () => {\n      return (\n        <div>\n          <Info person={profile} />\n          <button type=\"button\" className=\"btn btn-primary\" onClick={this.goChat}> Edit bio </button>\n          <br />\n          <SelectDistanceFilter initialRadius={this.state.distanceFilter} parentObject={this} />\n          <SelectMinAgeFilter ageFilterMin={this.state.ageFilterMin} parentObject={this} />\n          <SelectMaxAgeFilter ageFilterMax={this.state.ageFilterMax} parentObject={this} />\n          <Checkbox label=\"public profile\" condition={this.state.discoverable} changeHandler={this.toggleShowProfile} />\n          <br />\n          <button type=\"button\" className=\"btn btn-primary\" disabled={this.state.isButtonDisabled} onClick={this.saveProfile}> Save </button>\n          <br />\n          <br />\n          <div>\n            <p />\n            <p />\n            <SelectPollInterval styles={this.state.styles} onSelectPollInterval={this.onSelectPollInterval} />\n            <SelectBackgroundColor styles={this.state.styles} triggerRender={this.triggerRender} />\n            <SelectTextColor styles={this.state.styles} triggerRender={this.triggerRender} />\n            <Checkbox label=\"show photos\" condition={this.state.isToShowPhotos} changeHandler={this.toggleShowPicsCheckbox} />\n          </div>\n        </div>\n      )\n    }\n\n    let person = [{\n      image: (<PicWrapper photos={profile.photos} name={profile.name} />),\n      info: (<UserData />)\n    }]\n\n    let present = [\n      {\n        columns: [\n          {\n            Header: \"Photos\",\n            accessor: \"image\"\n          },\n          {\n            Header: \"Info\",\n            accessor: \"info\"\n          }\n        ]\n      }\n    ]\n\n    let pointVals = [pos];\n    const pointMode = {\n      banner: false,\n      control: {\n        values: pointVals,\n        onClick: point => {\n          pointVals = [point]\n          pointMode.control.values = [point];\n          postLocation(point);\n        },\n        //  onRemove: point => { }\n      }\n    };\n\n    const options = {\n      bindMap: true,\n      startPort: \"default\",\n      overlayAll: true,\n      showControls: false,\n      showInputs: false,\n      useDynamic: true,\n      pointMode: pointMode,\n      precision: 6\n    };\n\n    return (\n      <div>\n        <ReactTable\n          data={person}\n          columns={present}\n          sortable={false}\n          defaultPageSize={1}\n          showPagination={false}\n        />\n        <br />\n        <LocationPicker {...options} />\n        <br />\n        <span className=\"float-right\"> ver: {Const.VERSION}</span>\n        <br />\n        <p />\n      </div>\n    )\n  }\n}\n\nexport default withRouter(UserView);","import React from 'react';\nimport { withRouter } from 'react-router-dom'\nimport \"react-table/react-table.css\"\nimport AjaxService from '../services/AjaxService';\nimport Const from '../services/Constants';\nimport AppSettingsService from '../settings/AppSettingsService';\n\nclass EditBio extends React.Component {\n  constructor(props) {\n    super(props);\n    console.log(props)\n    this.state = {\n      value: props?.data?.profile?.data?.bio || ''\n    }\n    this.getStyles = AppSettingsService.getInputStyleClasses;\n  }\n\n  goToFriendsView = () => {\n    this.props.history.push('/pals');\n  }\n\n  saveProfile = () => {\n    let data = {\n      'json': JSON.stringify({\n        user: { bio: this.state.value }\n      })\n    }\n    let promise = AjaxService.doPost(Const.URLS.BASE_URL + \"v2/profile\", data, {})\n\n    promise.then(() => {\n      this.goToFriendsView();\n    }).catch((e) => {\n      console.error(e);\n    })\n  }\n\n  onChange = (e) => {\n    var elem = e.srcElement || e.target;\n    this.setState({ value: elem.value })\n  }\n\n  render() {\n    console.log(this.getStyles());\n    let inputProps = {\n      value: this.state.value,\n      onChange: this.onChange,\n      className: this.getStyles()\n    }\n\n    return (\n      <div>\n        <br></br>\n        <input {...inputProps} type=\"text\" />\n        <br></br>\n        <button type=\"button\" className=\"btn btn-primary\" onClick={this.saveProfile}> Save </button>\n        <button type=\"button\" className=\"btn btn-danger ml-2 float-right\" onClick={this.goToFriendsView}> Cancel </button>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(EditBio);","import React from 'react';\nimport Const from './Constants';\nimport AjaxService from './AjaxService';\n\nclass MatchDecoratorService extends React.Component {\n\n  getUserData = (match, callbackFunc) => {\n    console.log(match);\n    \n    let userId = match?.person?._id;\n    let person = match.person || {};\n    let promise = AjaxService.doGet(Const.URLS.USER + userId, {});\n    promise.then((data) => {\n\n      let user = data?.data?.results;\n      match.user = user;\n      \n      person.distance_mi = user?.distance_mi;\n      person.name = user?.name || person?.name\n      person.birth_date = user?.birth_date || person?.birth_date\n      person.bio = user?.bio || person?.bio\n      person.jobs = user?.jobs || person.jobs\n      person.schools = user?.schools || person.schools\n      let posInfo = {city:{name: user?.city?.name }, \n          country:{name: user?.city?.region }};\n      person.pos_info = person?.pos_info || posInfo;\n\n      callbackFunc(match);\n    }).catch((e) => {\n      console.error(e);\n      person.error = e\n      callbackFunc(match);\n    })\n  }\n\n}\nexport default new MatchDecoratorService();\n","import React from 'react';\n\nclass OnePicWrapper extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      imgSrc: props.src\n    };\n    this.condition = props.condition;\n    this.changeHandler = props.changeHandler;\n    this.match = props.match;\n  }\n\n  componentWillUnmount() {\n  }\n  componentDidMount() {\n  }\n\n  doClick = (e) => {\n    this.changeHandler(e, this.match);\n  }\n\n  render() {\n    if (this.condition) {\n      return (\n        <div className=\"container-fluid px-0\">\n          <img onClick={this.doClick} src={this.state.imgSrc} alt=\"new\" className='img-fluid w-100' />\n        </div>\n      );\n    } else {\n      return (\n        <div onClick={this.doClick}>\n          <label className=\"text-center\">{this.match.person.name}</label>\n        </div>\n      );\n    }\n\n  }\n}\nexport default OnePicWrapper;\n","import React from 'react';\nimport store from '../store';\nimport AppSettingsService from '../settings/AppSettingsService';\nimport MatchDecoratorService from '../services/MatchDecoratorService';\nimport \"react-table/react-table.css\";\nimport OnePicWrapper from '../building-blocks/OnePicWrapper';\nimport ReactTable from \"react-table\";\nimport { withRouter } from 'react-router-dom';\n\nclass Friends extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showUser: false,\n      isVisible: false,\n      msgMatches: [],\n      sortingFunc: this.sortByLastActivityDate\n    };\n  }\n\n  sortByLastActivityDate = (a, b) => {\n    let timeA = new Date(a.last_activity_date).getTime();\n    let timeB = new Date(b.last_activity_date).getTime();\n    return timeB - timeA;\n  }\n\n  applySorting = (arrToBeSorted, sortingFunc) => {\n    try {\n      arrToBeSorted.sort(sortingFunc);\n    } catch (e) {\n      console.error(e);\n    }\n    return arrToBeSorted;\n  }\n\n  getUserData = (event, match) => {\n    let clBack = (match) => {\n      this.props.history.push({\n        pathname: '/friend',\n        state: { args: match }\n      })\n    }\n    MatchDecoratorService.getUserData(match, clBack);\n  }\n\n  render() {\n    let dt = store.getStore();\n\n    let friends = dt.update.data.matches;\n\n    this.applySorting(friends, this.state.sortingFunc);\n\n    let persons = friends.map(match => {\n      let prsn = match.person\n      let obj;\n      if (prsn) {\n        let picProps = {\n          condition: AppSettingsService.isToShowPhotos,\n          src: prsn.photos[0].url,\n          match: match,\n          changeHandler: this.getUserData\n        }\n      obj = {\n        firstName: prsn.name,\n        lastName: prsn.birth_date,\n        image: (<OnePicWrapper { ...picProps}/>)\n      }\n    }\n      return { ...obj };\n    });\n\n    const present = [\n      {\n        columns: [\n          {\n            Header: \"Image\",\n            accessor: \"image\"\n          },\n          {\n            Header: \"First Name\",\n            accessor: \"firstName\"\n          }\n        ]\n      }\n    ]\n\n    return (\n      <div>\n        <div>\n          <ReactTable className=\"-striped -highlight\"\n            data={persons}\n            columns={present}\n            defaultPageSize={persons.length}\n            pageSize={persons.length}\n            sortable={false}\n            showPagination={false}\n          />\n          <br />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(Friends);","import React from 'react'\r\nimport { Link } from \"react-router-dom\";\r\nimport PropTypes from 'prop-types'\r\n\r\nBtnLink.propTypes = {\r\n    label: PropTypes.string,\r\n    data: PropTypes.object,\r\n    pathname: PropTypes.string\r\n};\r\n\r\nfunction BtnLink(props) {\r\n    return (\r\n        <div>\r\n            <Link to={{ pathname: props.pathname, state: { data: props.data } }}>\r\n                <button type=\"button\" className=\"btn btn-primary\">\r\n                    {props.label}\r\n                </button>\r\n            </Link>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BtnLink\r\n","import React from 'react';\nimport \"react-table/react-table.css\"\nimport ReactTable from \"react-table\";\nimport BtnLink from \"../building-blocks/BtnLink\";\nimport Info from \"../building-blocks/Info\";\nimport NotesService from '../notes/NotesService';\nimport PicWrapper from \"../building-blocks/PicWrapper\";\nimport CashService from '../services/CashService';\nimport AjaxService from '../services/AjaxService';\nimport Const from '../services/Constants';\n\nclass OneFriend extends React.Component {\n  constructor(props) {\n    super(props);\n    this.allBookmarks = null;\n  }\n\n  remove = (userId) => {\n    NotesService.removeBookmark(userId);\n  }\n\n  save = (userId) => {\n    NotesService.saveBookmark(userId);\n  }\n\n  deleteMatch = (matchId) => {\n    AjaxService.doDelete(Const.URLS.MATCH + matchId, {});\n  }\n\n  isBookmarked = (userId) => {\n    return this.allBookmarks[userId] !== undefined && this.allBookmarks[userId] !== null;\n  }\n\n  render() {\n    let { args } = this.props.location.state;\n    console.log(args);\n\n    this.allBookmarks = CashService.getBookmarksAsObject();\n    let InfoWithButton = () => (\n      <div>\n        <BtnLink label=\" ✍️ \" data={args} pathname=\"/chat\" />\n        <div className=\"mt-1\">\n          {!this.isBookmarked(args.person._id) ? <button type=\"button\" className=\"btn btn-success\"\n            onClick={() => this.save(args.person._id)}> <span>&#9734;</span> </button> : null}\n\n          {this.isBookmarked(args.person._id) ? <button type=\"button\" className=\"btn btn-danger\"\n            onClick={() => this.remove(args.person._id)}> <span>&#9734;</span></button> : null}\n\n          <button type=\"button\" className=\"btn btn-danger ml-2 float-right\" onClick={() => this.deleteMatch(args.id)}> ✖️ </button>\n        </div>\n        <Info person={args.person} />\n      </div>\n    )\n    let person = [{\n      image: (<PicWrapper photos={args.person.photos} name={args.person.name} />),\n      info: (<InfoWithButton />)\n    }]\n\n    let present = [\n      {\n        columns: [\n          {\n            Header: \"Photos\",\n            accessor: \"image\"\n          },\n          {\n            Header: \"Info\",\n            accessor: \"info\"\n          }\n        ]\n      }\n    ]\n\n    return (\n      <div>\n        <div>\n          <ReactTable\n            data={person}\n            columns={present}\n            sortable={false}\n            defaultPageSize={1}\n            showPagination={false}\n          />\n          <br />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default OneFriend;","import React from 'react';\nimport \"react-table/react-table.css\"\nimport ReactTable from \"react-table\";\nimport AjaxService from '../services/AjaxService';\nimport NotesService from '../notes/NotesService';\nimport CashService from '../services/CashService';\nimport Const from '../services/Constants';\nimport BeanContextAware from '../services/BeanContextAware';\nimport PicWrapper from \"../building-blocks/PicWrapper\";\nimport BtnLink from \"../building-blocks/BtnLink\";\nimport Info from \"../building-blocks/Info\";\n\nclass MoreFriends extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      beanId: props.beanId,\n      allFr: []\n    };\n\n    this.isMountedOk = true;\n    this.allBookmarks = null;\n  }\n\n  getBookmarksAsObject = () => {\n    this.allBookmarks = CashService.getBookmarksAsObject();\n  }\n\n  componentDidMount() {\n    BeanContextAware.add(this);\n    this.getNewFriends(this.getBookmarksAsObject);\n    this.isMountedOk = true;\n    let header = BeanContextAware.get('header1');\n    if (header) {\n      header.showMoreFriendsRefreshButton()\n    }\n  }\n\n  componentWillUnmount() {\n    BeanContextAware.remove(this);\n    this.isMountedOk = false;\n    let header = BeanContextAware.get('header1');\n    if (header) {\n      header.hideMoreFriendsRefreshButton()\n    }\n  }\n\n  getNewFriends = (callBack) => {\n    let promise = AjaxService.doGet(Const.URLS.NEW_FRIENDS, {})\n    promise.then((data) => {\n      let allFr = data?.data?.results;\n      if (!this.isMountedOk) {\n        return;\n      }\n      callBack()\n      this.setState({ allFr: allFr });\n    }).catch((e) => {\n      console.log(e);\n    })\n  }\n\n  pass = (userId) => {\n    let promise = AjaxService.doGet(Const.URLS.PASS + userId, {})\n    promise.then((data) => {\n    }).catch((e) => {\n      console.log(e);\n    })\n  }\n\n  like = (userId) => {\n    let promise = AjaxService.doGet(Const.URLS.LIKE + userId, {})\n    promise.then((data) => {\n      console.log(data);\n    }).catch((e) => {\n      console.log(e);\n    })\n  }\n\n  isBookmarked = (userId) => {\n    return this.allBookmarks[userId] !== undefined && this.allBookmarks[userId] !== null;\n  }\n\n  render() {\n    let InfoWrapper = (args) => {\n      let { person } = args;\n      let isBookmarked = this.isBookmarked(person?._id);\n      return (\n        <div className=\"text-justify text-wrap\">\n          <div>\n            <button type=\"button\" className=\"btn btn-success\" onClick={() => this.like(person._id)}> 👍 </button>\n            <button type=\"button\" className=\"btn btn-danger\" onClick={() => this.pass(person._id)}> 👎 </button>\n\n            {!isBookmarked ? <button type=\"button\" className=\"btn btn-primary float-right ml-1\"\n              onClick={() => NotesService.saveBookmark(person?._id)}> 📑 </button> : null}\n            {isBookmarked ? <button type=\"button\" className=\"btn btn-danger float-right ml-1\"\n              onClick={() => NotesService.removeBookmark(person?._id)}> 📑 </button> : null}\n          </div>\n          <Info person={person} />\n        </div>\n      )\n    }\n\n    let Pic = args => (<PicWrapper photos={args.photos} name={args.name} />)\n\n    let allFr = this.state.allFr;\n\n    let persons = allFr.map(one => {\n      let obj = {\n        info: (<InfoWrapper person={one} />),\n        image: (<Pic photos={one.photos} name={one.name} />)\n      }\n      return { ...obj };\n    });\n\n    let present = [\n      {\n        columns: [\n          {\n            Header: \"Photos\",\n            accessor: \"image\"\n          },\n          {\n            Header: \"Info\",\n            accessor: \"info\"\n          }\n        ]\n      }\n    ]\n\n    return (\n      <div>\n        <div>\n          <ReactTable className=\"-striped -highlight\"\n            data={persons}\n            columns={present}\n            sortable={false}\n            defaultPageSize={persons.length}\n            pageSize={persons.length}\n            showPagination={false}\n          />\n          <br />\n        </div>\n      </div>\n    )\n  }\n}\nexport default MoreFriends;","import React from 'react';\nimport \"react-table/react-table.css\"\nimport ReactTable from \"react-table\";\nimport AjaxService from '../services/AjaxService'\nimport Const from '../services/Constants';\nimport PicWrapper from \"../building-blocks/PicWrapper\";\n\nclass FriendRequests extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      allFr: [],\n      hits: [],\n      isLoading: false,\n      error: null,\n    };\n    this.isMountedOk = true;\n  }\n\n  componentDidMount() {\n    this.isMountedOk = true;\n    this.getFriendRequests();\n  }\n\n  componentWillUnmount() {\n    this.isMountedOk = false;\n  }\n\n  getFriendRequests = () => {\n    let promise = AjaxService.doGet(Const.URLS.FAST_MATCH, {})\n    promise.then((data) => {\n      if (!this.isMountedOk || !data?.data?.data?.results) {\n        return;\n      }\n\n      this.setState({\n        allFr: data.data.data.results\n      })\n    }).catch((e) => {\n      console.log(e);\n    })\n  }\n\n  render() {\n    let Info = args => <div className=\"text-justify text-wrap\"> {args.info} </div>;\n    let Pic = args => (<PicWrapper photos={args.photos} />);\n\n    let allFr = this.state.allFr;\n\n    let persons = allFr.map(one => {\n      let isActiveRecently = one?.user?.recently_active ? \"🕐\" : \"\"\n      console.log(isActiveRecently);\n      let obj = {\n        info: (<Info info={isActiveRecently} />),\n        image: (<Pic photos={one.user.photos} />)\n      }\n      return { ...obj };\n    });\n\n    let present = [\n      {\n        columns: [\n          {\n            Header: \"Photos\",\n            accessor: \"image\"\n          },\n           {\n             Header: \"Recently Active\",\n             accessor: \"info\"\n           }\n        ]\n      }\n    ]\n\n    return (\n      <div>\n        <div className=\"text-center p-1 \">\n        </div>\n        <div>\n          <ReactTable className=\"-striped -highlight\"\n            data={persons}\n            columns={present}\n            sortable={false}\n            defaultPageSize={persons.length}\n            pageSize={persons.length}\n            showPagination={false}\n            style={{\n              width: '100%',\n              height: '30%',\n            }}\n          />\n          <br />\n        </div>\n      </div>\n    )\n  }\n}\nexport default FriendRequests;","import React from 'react';\r\nimport PollService from '../services/PollService';\r\nimport Const from '../services/Constants';\r\nimport SelectPollInterval from './SelectPollInterval';\r\nimport AppSettingsService from './AppSettingsService';\r\nimport SelectTextColor from './SelectTextColor';\r\nimport SelectBackgroundColor from './SelectBackgroundColor';\r\nimport Checkbox from './Checkbox';\r\n\r\nclass AppSettings extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      styles: AppSettingsService.getInputStyleClasses(),\r\n      isToShowPhotos: AppSettingsService.isToShowPhotos\r\n    };\r\n  }\r\n\r\n  onSelectPollInterval = (val) => {\r\n    PollService.startUpdatePoll(val);\r\n    this.setState({\r\n      pollInterval: val\r\n    })\r\n  }\r\n\r\n  triggerRender = () => {\r\n    this.setState({\r\n      styles: AppSettingsService.getInputStyleClasses()\r\n    })\r\n  }\r\n\r\n  toggleShowPicsCheckbox = (event) => { \r\n    AppSettingsService.isToShowPhotos = event.target.checked;\r\n    this.setState({\r\n      isToShowPhotos: AppSettingsService.isToShowPhotos\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <span className=\"float-right\"> ver: {Const.VERSION}</span> \r\n        <p/>\r\n        <SelectPollInterval styles={this.state.styles} onSelectPollInterval={this.onSelectPollInterval} />\r\n        <SelectBackgroundColor styles={this.state.styles} triggerRender={this.triggerRender} />\r\n        <SelectTextColor styles={this.state.styles} triggerRender={this.triggerRender} />\r\n        <Checkbox label=\"show photos\" condition={this.state.isToShowPhotos} changeHandler={this.toggleShowPicsCheckbox} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default AppSettings;","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport BeanContextAware from '../services/BeanContextAware';\nimport CashService from '../services/CashService';\nimport store from '../store';\nimport MatchDecoratorService from '../services/MatchDecoratorService';\nimport { withRouter } from 'react-router-dom';\n\nclass Header extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      beanId: props.beanId,\n      showUser: false,\n      isVisible: false,\n      isVisibleMoreFriendsTab: false,\n      msgMatches: []\n    };\n    this.initialTitle = document.title;\n  }\n\n  changeState = (obj) => {\n    this.setState(obj);\n  }\n\n  addMsgMatch = (mtch) => {\n    var pos = this.findInMsgMatches(mtch);\n    if (pos > -1) { // if found - do not add it again\n      return;\n    }\n    let msgMatches = this.state.msgMatches;\n    this.state.msgMatches.push(mtch);\n    this.setState({\n      msgMatches: msgMatches\n    })\n    this.toggleFlashTabTitle();\n  }\n\n  findInMsgMatches = (mtch) => {\n    let msgMatches = this.state.msgMatches\n    for (var i = 0, len = msgMatches.length; i < len; i++) {\n      if (msgMatches[i].id === mtch.id)\n        return i;\n    }\n    return -1;\n  }\n\n  removeMsgMatch = (mtch) => {\n    var pos = this.findInMsgMatches(mtch);\n    if (pos > -1) {\n      let msgMatches = this.state.msgMatches\n      msgMatches.splice(pos, 1);\n      this.setState(\n        { msgMatches: msgMatches },\n        () => this.toggleFlashTabTitle()\n      )\n    }\n  }\n\n  showMoreFriendsRefreshButton = () => {\n    this.setState({ isVisibleMoreFriendsTab: true });\n  }\n\n  hideMoreFriendsRefreshButton = () => {\n    this.setState({ isVisibleMoreFriendsTab: false });\n  }\n\n  changeButtonVisibility = (obj) => {\n    this.setState(obj);\n  }\n\n  componentDidMount() {\n    BeanContextAware.add(this);\n  }\n\n  componentWillUnmount() {\n    BeanContextAware.remove(this);\n  }\n\n  toggleFlashTabTitle = () => {\n    if (this.state.msgMatches.length > 0 && !this.flashIntervalObj) {\n      this.startFlashTabTitle();\n    } else if (this.state.msgMatches.length === 0) {\n      this.stopFlashTabTitle();\n    }\n  }\n\n  startFlashTabTitle = () => {\n    this.flashIntervalObj = setInterval(\n      () => {\n        if (this.initialTitle === document.title) {\n          document.title = \"(\" + this.state.msgMatches.length + \") \" + this.initialTitle;\n        } else {\n          document.title = this.initialTitle;\n        }\n      }, 800\n    );\n  }\n\n  stopFlashTabTitle = () => {\n    clearTimeout(this.flashIntervalObj);\n    this.flashIntervalObj = null;\n    document.title = this.initialTitle;\n  }\n\n  getUserData = (match) => {\n    let clBack = (match) => {\n      this.props.history.push({\n        pathname: '/friend',\n        state: { args: match }\n      })\n    }\n    MatchDecoratorService.getUserData(match, clBack);\n  }\n\n  goChat = (match) => {\n    this.props.history.push({\n      pathname: '/chat',\n      state: { data: match }\n    })\n  }\n\n  getNewFriends = () => {\n    let moreFriends1 = BeanContextAware.get('moreFriends1');\n    if (this.state.isVisible && moreFriends1?.isMountedOk) {\n      moreFriends1.getNewFriends(moreFriends1.getBookmarksAsObject)\n    }\n  }\n\n  render() {\n    let Btn = (props) => (\n      <div>\n        <NavLink exact activeClassName=\"active\" to={props.to}>\n          <button type=\"button\" className=\"btn btn-primary\">\n            {props.label}\n          </button>\n        </NavLink>\n      </div>\n    )\n    let isVisibleNewMsgs = this.state.msgMatches.length ? true : false;\n\n    let BtnBadge = (props) => {\n      let mtch = props.data;\n      if (!mtch.messages || mtch.messages.length === 0) {\n        return (\n          <div>\n            <button onClick={() => { this.removeMsgMatch(mtch); this.getUserData(mtch) }} className=\"btn btn-primary\" >\n              💌 {this.state.msgMatches.length} </button>\n          </div>\n        )\n      } else {\n        return (\n          <div>\n            <button onClick={() => this.goChat(mtch)} className=\"btn btn-primary\" >\n              💌 {this.state.msgMatches.length} </button>\n          </div>\n        )\n      }\n    }\n    let localUser = store?.profile?.data;\n    return (\n      <nav>\n        <div className=\"text-center\">\n          {this.state.isVisible ? <span className=\"float-left\"> {CashService.getPhone()} </span> : null}\n          <div className=\"btn-group\">\n            {false ? <Btn to=\"/home\" label=\"🏠\" /> : null}\n            {this.state.isVisible ? <Btn to=\"/user\" label=\"👦\" /> : null}\n            {this.state.isVisible ? <Btn to=\"/pals\" label=\"🤝\" /> : null}\n            {this.state.isVisible ? (this.state.isVisibleMoreFriendsTab ?\n              <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.getNewFriends()}> 🌍 </button> :\n              <Btn to=\"/more-pals\" label=\" 🌍 \" />) : null}\n            {this.state.isVisible ? <Btn to=\"/pal-requests\" label=\"👋\" /> : null}\n            {this.state.isVisible ? <Btn to=\"/notes\" label=\"📑\" /> : null}\n            {(!this.state.isVisible && !!localUser) ? <Btn to=\"/settings\" label=\"🛠️\" /> : null}\n            {false ? <Btn to=\"/logout\" label=\"|->\" /> : null}\n            {(this.state.isVisible && isVisibleNewMsgs) ? <BtnBadge data={this.state.msgMatches[0]} /> : null}\n          </div>\n        </div>\n      </nav>\n    );\n  }\n}\n\nexport default withRouter(Header);","import React from 'react';\r\nimport store from '../store'\r\nimport Const from '../services/Constants';\r\nimport AjaxService from '../services/AjaxService';\r\nimport AppSettingsService from '../settings/AppSettingsService';\r\n\r\nclass EnterText extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            value: '',\r\n            store: props.data,\r\n            friendId: props.friendId,\r\n            triggerRenderFunc: props.triggerRenderFunc\r\n        }\r\n        this.getStyles = AppSettingsService.getInputStyleClasses;\r\n        const dummyEmojiInjector = (msg) => { return msg;}\r\n        this.injectEmoji = props.emojiInjectorFunc || dummyEmojiInjector;\r\n    }\r\n\r\n    createMessage = (match, store) => {\r\n        var dt = new Date();\r\n        return {\r\n            created_date: dt.toISOString(),\r\n            from: store.profile.data._id,\r\n            match_id: match.id,\r\n            message: this.state.value,\r\n            sent_date: dt.toISOString(),\r\n            timestamp: dt.getTime(),\r\n            to: match.person._id\r\n        }\r\n    }\r\n\r\n    onKeyPress = (e) => {\r\n        if (e.key !== 'Enter') {\r\n            return;\r\n        }\r\n\r\n        let matches = store?.update?.data?.matches || [];\r\n        for (let i = 0; i < matches.length; i++) {\r\n            const oneMatch = matches[i];\r\n\r\n            if (oneMatch.person._id === this.state.friendId) {\r\n                let newMsgObj = this.createMessage(oneMatch, this.state.store);\r\n                this.injectEmoji(newMsgObj);\r\n                AjaxService.doPost(Const.URLS.SEND_MESSAGE, newMsgObj, {});\r\n                matches[i].messages.push(newMsgObj);\r\n                this.state.triggerRenderFunc();\r\n                break;\r\n            }\r\n        }\r\n        this.setState({ value: '' });\r\n    }\r\n\r\n    onChange = (e) => {\r\n        var elem = e.srcElement || e.target;\r\n        this.setState({ value: elem.value })\r\n    }\r\n\r\n    render() {\r\n        let inputProps = {\r\n            placeholder: 'Write...',\r\n            value: this.state.value,\r\n            onChange: this.onChange,\r\n            className: this.getStyles(),\r\n            onKeyPress: this.onKeyPress\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <input {...inputProps} type=\"text\" />\r\n                <button type=\"button\" className=\"btn btn-primary ml-2 float-right\" onClick={() => this.onKeyPress({key:'Enter'})}> Send </button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default EnterText;\r\n","import React from 'react';\r\n\r\nclass MessageWrapper extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      let { msg } = this.props;\r\n      let msgDateObj = new Date(msg.timestamp);\r\n\r\n      let timeStr = msgDateObj.toLocaleTimeString();\r\n      let dateStr = msgDateObj.toLocaleDateString()\r\n      if (dateStr !== new Date().toLocaleDateString()) {\r\n        timeStr = timeStr + \",  \" + dateStr;\r\n      }\r\n\r\n      this.state = {\r\n          isSeen: msg.isSeen,\r\n          showDate: false,\r\n          date: timeStr\r\n      };\r\n    }\r\n\r\n    render() {\r\n        let { msg } = this.props;\r\n\r\n        let showHideDate = () => {\r\n            this.setState({ showDate: true });\r\n            setTimeout(\r\n                () => {\r\n                    this.setState({ showDate: false });\r\n                }, 5000);\r\n        }\r\n\r\n        return (\r\n            <div onClick={showHideDate}>\r\n                <p className=\"text-justify text-wrap\" >  {msg.message} </p>\r\n                {this.state.isSeen ? (<span className=\"badge badge-secondary text-justify text-wrap\">seen</span>) : null}\r\n                {this.state.showDate ? (<span className=\"badge small\" >  {this.state.date} </span>) : null}\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default MessageWrapper;\r\n","import React, { Component } from 'react'\nimport BeanContextAware from '../services/BeanContextAware'\n\nexport default class Select extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      numberMsgShown: 10,\n      getStyles: props.getStyles\n    }\n  }\n\n  changeHandler = (e) => {\n    let chat1 = BeanContextAware.get('chat1');\n      this.setState({\n        numberMsgShown: e.target.value\n      })\n      if (chat1) {\n        chat1.changeState({ numberMsgShown: parseInt(e.target.value)});\n      }\n  }\n\n  render() {\n    return (\n      <form>\n        <div className='form-group'>\n          <label>Number of messages to show:</label>\n          <select\n            className={this.state.getStyles()}\n            value={this.state.numberMsgShown}\n            onChange={this.changeHandler}>\n            <option value=\"10\">10</option>\n            <option value=\"20\">20</option>\n            <option value=\"50\">50</option>\n            <option value=\"70\">70</option>\n          </select>\n        </div>\n      </form>\n    );\n  }\n}\n","\r\nconst emojis = [\r\n    {text:':)', face:'😃'},\r\n    {text:';)', face:'😉'},\r\n    {text:':(', face:'😞'},\r\n    {text:':*', face:'😘'},\r\n    {text:':P', face:'😛'},{text:':p', face:'😛'},{text:':П', face:'😛'},{text:':п', face:'😛'},\r\n    {text:':D', face:'😀'},{text:':Д', face:'😀'},{text:':д', face:'😀'}\r\n];\r\n\r\nexport const injectEmojiFunction = (msg) => {\r\n    if (!msg?.message) {\r\n        return msg;\r\n    }\r\n \r\n    for (let i = 0; i < emojis.length; i++) {\r\n        let emo = emojis[i];\r\n        let foundAt = msg.message.indexOf(emo.text);\r\n        while (foundAt > -1) {\r\n            msg.message = msg.message.replace(emo.text, emo.face);\r\n            foundAt = msg.message.indexOf(emo.text);\r\n        }\r\n    }\r\n    return msg;\r\n}\r\n","import React from 'react';\r\nimport ReactTable from \"react-table\";\r\nimport { withRouter } from 'react-router-dom'\r\nimport store from '../store'\r\nimport EnterText from './enterText'\r\nimport MessageWrapper from './messageWrapper'\r\nimport BeanContextAware from '../services/BeanContextAware'\r\nimport Select from './Select'\r\nimport Const from '../services/Constants';\r\nimport AjaxService from '../services/AjaxService'\r\nimport AppSettingsService from '../settings/AppSettingsService';\r\nimport { injectEmojiFunction } from './CyrilicEmojiStrategy';\r\n\r\nclass Chat extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    let match = props.location.state.data;\r\n    let friendId = match.person._id;\r\n    let lastSeenMsg = match.seen ? match.seen.last_seen_msg_id : null;\r\n    this.state = {\r\n      lastSeenMsg: lastSeenMsg,\r\n      numberMsgShown: 10,\r\n      matchId: match.id,\r\n      store: store,\r\n      match: match,\r\n      friendId: friendId,\r\n      messages: match.messages\r\n    };\r\n    this.inputStyles = AppSettingsService.getInputStyleClasses;\r\n    this.isOnFocus = true;\r\n    this.isMountedOk = true;\r\n  }\r\n\r\n  onFocus = (ev) => {\r\n    this.isOnFocus = true;\r\n    this.deleteFromHeader();\r\n  }\r\n\r\n  onBlur = (ev) => {\r\n    this.isOnFocus = false;\r\n  }\r\n\r\n  componentDidMount() {\r\n    BeanContextAware.add(this);\r\n    window.addEventListener(\"focus\", this.onFocus);\r\n    window.addEventListener(\"blur\", this.onBlur);\r\n    this.isMountedOk = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    BeanContextAware.remove(this);\r\n    window.removeEventListener(\"focus\", this.onFocus);\r\n    window.removeEventListener(\"blur\", this.onBlur);\r\n    this.isMountedOk = false;\r\n  }\r\n\r\n  prepareMessages = (allMsgs, friendId, numberMsgShown) => {\r\n    let result = [];\r\n    result.length = numberMsgShown;\r\n\r\n    for (let ind = allMsgs.length - 1; 0 <= numberMsgShown; numberMsgShown-- , ind--) {\r\n\r\n      let msg = allMsgs[ind];\r\n\r\n      if (!msg) {\r\n        msg = {};\r\n      }\r\n\r\n      let transformedMsg = {};\r\n      result[numberMsgShown] = transformedMsg;\r\n\r\n      if (msg.from === friendId) {\r\n        transformedMsg.theirs = (<MessageWrapper msg={msg} />);\r\n      }\r\n      else {\r\n        transformedMsg.mine = (<MessageWrapper msg={msg} />);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  //call it to start render() in order to visualize the change\r\n  triggerRenderFunc = () => {\r\n    let match = store.getMatchById(this.state.match._id)\r\n    let lastSeenMsg = match.seen ? match.seen.last_seen_msg_id : null;\r\n    if (this.isMountedOk) {\r\n      this.setState({\r\n        lastSeenMsg: lastSeenMsg,\r\n        match: match,\r\n        messages: match.messages\r\n      })\r\n    }\r\n  }\r\n\r\n  changeState = (obj) => {\r\n    this.setState(obj)\r\n  }\r\n\r\n  sendSeen = (allMsgs) => {\r\n    if (!this.state.lastSeenMsg) {\r\n      console.log(\"empty value of 'lastSeenMsg'..\");\r\n    }\r\n\r\n    //clear notification for new friends, who have not send message:\r\n    if (!allMsgs || !allMsgs?.length) {\r\n      this.deleteFromHeader();\r\n      return;\r\n    }\r\n\r\n    for (let index = allMsgs.length - 1; 0 <= index; index--) {\r\n\r\n      let msgWrapped = allMsgs[index];\r\n\r\n      if (!msgWrapped || !msgWrapped.theirs) {\r\n        continue;\r\n      }\r\n      let msg = msgWrapped.theirs.props.msg;\r\n\r\n      if (msg._id !== this.state.lastSeenMsg) {\r\n        AjaxService.doGet(Const.URLS.SEND_SEEN + msg.match_id + \"/\" + msg._id, {});\r\n        let match = this.state.match;\r\n        if (match.seen) {\r\n          match.seen.last_seen_msg_id = msg._id;\r\n        }\r\n\r\n        this.deleteFromHeader();\r\n        return;\r\n      }\r\n      if (msgWrapped.theirs) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  deleteFromHeader = () => {\r\n    let header = BeanContextAware.get('header1');\r\n    if (header && this.isOnFocus) {\r\n      header.removeMsgMatch(this.state.match);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const present = [\r\n      {\r\n        columns: [\r\n          {\r\n            Header: this.state.match.person.name,\r\n            accessor: \"theirs\"\r\n          },\r\n          {\r\n            Header: \"Me\",\r\n            accessor: \"mine\"\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n    var reorderedMessages = this.prepareMessages(this.state.messages, this.state.friendId, this.state.numberMsgShown);\r\n\r\n    this.sendSeen(reorderedMessages);\r\n\r\n    let inputProps = {\r\n      data: this.state.store,\r\n      friendId: this.state.match.person._id,\r\n      triggerRenderFunc: this.triggerRenderFunc,\r\n      emojiInjectorFunc: injectEmojiFunction\r\n    }\r\n\r\n    if (this.isMountedOk) {\r\n      return (\r\n        <div><Select getStyles={this.inputStyles} />\r\n          <div>\r\n            <ReactTable\r\n              data={reorderedMessages}\r\n              columns={present}\r\n              defaultPageSize={reorderedMessages.length}\r\n              pageSize={reorderedMessages.length}\r\n              showPagination={false}\r\n              bordered={false}\r\n              sortable={false}\r\n  \r\n            />\r\n            <div>\r\n              <EnterText {...inputProps} />\r\n            </div>\r\n            <br />\r\n          </div>\r\n        </div>\r\n      )\r\n    } \r\n    return (\r\n      <div>\r\n      </div>\r\n    )\r\n\r\n  }\r\n}\r\nexport default withRouter(Chat);\r\n","import React from 'react';\r\nimport \"react-table/react-table.css\"\r\nimport ReactTable from \"react-table\";\r\nimport Info from \"../building-blocks/Info\";\r\nimport PicWrapper from \"../building-blocks/PicWrapper\";\r\nimport NotesService from './NotesService';\r\nimport CashService from '../services/CashService';\r\nimport AjaxService from '../services/AjaxService';\r\nimport Const from '../services/Constants';\r\nimport MatchDecoratorService from '../services/MatchDecoratorService';\r\n\r\nclass Notes extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      match: null\r\n    };\r\n    this.index = 0;\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.allBookmarks = CashService.getBookmarksAsObject();\r\n    let all = CashService.getBookmarks();\r\n\r\n    let id = all[this.index]\r\n    if (!id) {\r\n      return;\r\n    }\r\n    let mtch = this.formDummyMatch(id);\r\n\r\n    MatchDecoratorService.getUserData(mtch, this.processUserData);\r\n  }\r\n\r\n  saveAllByPhone = function () {\r\n    NotesService.saveAllByPhone();\r\n  }\r\n\r\n  getOne = function () {\r\n    NotesService.getOne();\r\n  }\r\n\r\n  getBookmarks = function () {\r\n    NotesService.getBookmarks();\r\n  }\r\n\r\n  removeBookmark = function (userId) {\r\n    NotesService.removeBookmark(userId);\r\n    this.index--;\r\n  }\r\n\r\n  formDummyMatch(id) {\r\n    return {\r\n      person: { _id: id }\r\n    }\r\n  }\r\n\r\n  pass = (userId) => {\r\n    let promise = AjaxService.doGet(Const.URLS.PASS + userId, {})\r\n    promise.then((data) => {\r\n    }).catch((e) => {\r\n      console.log(e);\r\n    })\r\n  }\r\n\r\n  like = (userId) => {\r\n    let promise = AjaxService.doGet(Const.URLS.LIKE + userId, {})\r\n    promise.then((data) => {\r\n      console.log(data);\r\n    }).catch((e) => {\r\n      console.log(e);\r\n    })\r\n  }\r\n\r\n  processUserData = (match) => {\r\n    if (!!match?.person?.error) {\r\n      try {\r\n        console.log('User id: ' + match?.person?._id + \" will be removed from Bookmarks list\");\r\n        NotesService.removeBookmark(match?.person?._id);\r\n        this.match = null;\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    }\r\n    this.match = match;\r\n    this.setState({\r\n      match: match\r\n    })\r\n  }\r\n\r\n  get = (step) => {\r\n    let all = CashService.getBookmarks();\r\n\r\n    this.index = this.index + step;\r\n\r\n    if (this.index < 0) {\r\n      this.index = all.length - 1;\r\n    } else if (this.index > all.length - 1) {\r\n      this.index = 0;\r\n    }\r\n    \r\n    let id = all[this.index];\r\n\r\n    if (!id) {\r\n      console.error(\"'id' is \" + id);\r\n      return;\r\n    }\r\n    let mtch = this.formDummyMatch(id);\r\n    MatchDecoratorService.getUserData(mtch, this.processUserData);\r\n  }\r\n\r\n  isBookmarked = (userId) => {\r\n    return this.allBookmarks[userId] !== undefined && this.allBookmarks[userId] !== null;\r\n  }\r\n\r\n  render() {\r\n    if (!this.match) {\r\n      return (\r\n        <div>\r\n          <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.get(-1)}> ⬅️ </button>\r\n          <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.get(1)}> ➡️ </button>\r\n        </div>\r\n      )\r\n    }\r\n    let match = this.match;\r\n\r\n    let InfoWithButton = () => {\r\n      let userId = match?.person?._id;\r\n      let isBookmarked = this.isBookmarked(userId);\r\n      return (\r\n\r\n        <div>\r\n          <div className=\"text-justify text-wrap\">\r\n            <button type=\"button\" className=\"btn btn-success\" onClick={() => this.like(userId)}> 👍 </button>\r\n            <button type=\"button\" className=\"btn btn-danger\" onClick={() => this.pass(userId)}> 👎 </button>\r\n\r\n            {!isBookmarked ? <button type=\"button\" className=\"btn btn-primary float-right ml-1\"\r\n              onClick={() => NotesService.saveBookmark(userId)}> 📑 </button> : null}\r\n\r\n            {isBookmarked ? <button type=\"button\" className=\"btn btn-danger float-right ml-1\"\r\n              onClick={() => NotesService.removeBookmark(userId)}> 📑 </button> : null}\r\n\r\n          </div>\r\n          <Info person={match?.person} />\r\n        </div>\r\n      )\r\n    }\r\n    let Pic = args => (<PicWrapper photos={args.photos} name={args.name} />);\r\n    let person = [{\r\n      image: (<Pic photos={match?.user?.photos} name={match?.user?.name} />),\r\n      info: (<InfoWithButton />)\r\n    }]\r\n\r\n    let present = [\r\n      {\r\n        columns: [\r\n          {\r\n            Header: \"Photos\",\r\n            accessor: \"image\"\r\n          },\r\n          {\r\n            Header: \"Info\",\r\n            accessor: \"info\"\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"text-justify text-wrap text-center float-center\">\r\n          <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.get(-1)}> ⬅️ </button>\r\n          <button type=\"button\" disabled={true} className=\"btn btn-secondary\"> {this.index + 1} of {CashService.getBookmarks()?.length} </button>\r\n          <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.get(1)}> ➡️ </button>\r\n        </div>\r\n        <br />\r\n        <div>\r\n          <ReactTable\r\n            data={person}\r\n            columns={present}\r\n            sortable={false}\r\n            defaultPageSize={1}\r\n            showPagination={false}\r\n          />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default Notes;\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\nimport CashService from './services/CashService';\nimport AppSettingsService from './settings/AppSettingsService';\nimport PollService from './services/PollService';\nimport NotesService from './notes/NotesService';\nimport Home from './Home';\nimport PhoneForm from './auth/PhoneForm';\nimport PhoneToken from './auth/PhoneToken';\nimport ConfirmCode from './auth/confirmCode';\nimport UserView from './userView/userView';\nimport EditBio from './userView/EditBio';\nimport Friends from './userView/friends';\nimport OneFriend from './userView/OneFriend';\nimport MoreFriends from './userView/MoreFriends';\nimport FriendRequests from './userView/FriendRequests';\nimport AppSettings from './settings/AppSettings';\nimport Header from './building-blocks/header';\nimport Chat from './chat/chat.js';\nimport Notes from './notes/Notes';\nimport store from './store';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\n\n\nconst App = () => {\n  return (\n    <div className=\"container\" style={{ paddingTop: 10 }}>\n\n      <Router>\n        <Header beanId=\"header1\" />\n        <Switch>\n          < Route exact path=\"/\" component={Home} />\n          < Route path=\"/user\" render={() => <UserView data={store} />} />\n          < Route path=\"/edit-bio\" render={() => <EditBio data={store} />} />\n          < Route path=\"/phone\" component={PhoneForm} />\n          < Route path=\"/phone-token\" component={PhoneToken} />\n          < Route path=\"/friend\" component={OneFriend} />\n          < Route path=\"/chat\" render={() => <Chat beanId=\"chat1\"/>} />\n          < Route path=\"/notes\" render={() => <Notes beanId=\"notes1\"/>} />\n          < Route path=\"/pals\" render={() => <Friends data={store.updates} />} />\n          < Route path=\"/more-pals\" render={() => <MoreFriends data={store.updates} beanId=\"moreFriends1\"/>} />\n          < Route path=\"/pal-requests\" render={() => <FriendRequests data={store.updates} />} />\n          < Route path=\"/settings\"render={() => <AppSettings beanId=\"appSettings1\"/>} />\n          < Route path=\"/confirm-token\" component={ConfirmCode} />\n          < Route path=\"*\" component={Home} />\n        </Switch>\n      </Router>\n    </div >\n  );\n};\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.css';\nReactDOM.render( <App/> , document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}