{"version":3,"sources":["services/Constants.js","services/AjaxService.js","services/CashService.js","settings/AppSettingsService.js","services/BeanContextAware.js","store.js","services/PollService.js","notes/NotesService.js","Home.js","building-blocks/RenderForm.js","auth/PhoneForm.js","auth/PhoneToken.js","auth/confirmCode.js","settings/Checkbox.js","building-blocks/Info.js","building-blocks/PicWrapper.js","userView/SelectDistanceFilter.js","userView/SelectMinAgeFilter.js","userView/SelectMaxAgeFilter.js","settings/SelectPollInterval.js","settings/SelectTextColor.js","settings/SelectBackgroundColor.js","userView/userView.js","userView/EditBio.js","services/MatchDecoratorService.js","building-blocks/OnePicWrapper.js","userView/friends.js","building-blocks/BtnLink.js","userView/OneFriendView.js","userView/FriendRequests.js","userView/MoreFriends.js","settings/AppSettings.js","building-blocks/header.js","chat/enterText.js","chat/messageWrapper.js","chat/Select.js","chat/CyrilicEmojiStrategy.js","chat/chat.js","notes/Notes.js","App.js","serviceWorker.js","index.js"],"names":["ipAdress","Const","URLS","BASE_URL","AUTH","PHONE","GET_TOKEN","UPDATES","PROFILE","USER","MATCH","SEND_MESSAGE","SEND_LOCATION","NEW_FRIENDS","SEND_SEEN","FAST_MATCH","LIKE","PASS","STORAGE","STORAGE_TOKEN","STORAGE_BOOKMARKS","STORAGE_SETTINGS","UPDATE_POLL_INTERVAL","LOCAL_CASH_VAR_NAME","AUTH_HEADER_NAME","PHONE_HEADER_NAME","VERSION","execute","method","url","data","headers","axios","doPost","getHeaders","doPut","doGet","doDelete","authHeaderName","phoneHeaderName","CashService","React","Component","props","handleWindowSizeChange","setWidth","window","innerWidth","parseInt","isMobile","persistAll","phone","obj","AjaxService","JSON","stringify","catch","e","console","error","loadAll","getPhone","setPhone","getToken","setToken","token","getSettings","settings","setSettings","persistSettings","persistBookmarks","arr","this","then","bgColor","textColor","bookmarks","cashStructureTemplate","addEventListener","reduce","json","value","key","applyDesignSettings","getSetting","textColors","class","log","applyClass","document","body","bgColors","persistSetting","settingName","settingObject","element","colors","selectedColor","forEach","color","classList","remove","add","getInputStyleClasses","updatePollInterval","isToShowPhotos","bean","state","Error","beanId","context","warn","get","reducer","combineReducers","form","reduxFormReducer","store","devToolsExtension","createStore","functionsQueue","addToFunctionsQ","funct","push","length","shift","funcToCall","getStore","getMatchById","id","matches","update","i","_id","addToStore","checkIfLogged","onSuccess","onFailure","getUpdatesForDate","getLastActivityDate","startUpdatePoll","AppSettingsService","mergeUpdates","updates","matchUpdate","oldMatch","newMsgs","messages","newMsgsCount","y","splice","concat","seen","lastSeenMsg","last_seen_msg_id","last_activity_date","BASE_DATE","addToUnreadMessagesBadge","markLastUnreadMessages","newLastSeenMsgId","oldLastSeenMsgId","localUser","profile","ind","msg","from","mtch","header","BeanContextAware","addMsgMatch","lastDate","chat1","triggerRenderFunc","changeButtonVisibility","isVisible","exceptionCount","isToStopUpdatePoll","stopUpdatePoll","exception","seconds","pollInterval","pollIntervalObj","setInterval","getUpdates","clearTimeout","saveBookmark","personId","getBookmarks","indexOf","removeBookmark","index","oneFromArr","saveAllByPhone","getOne","promise","Home","hits","isLoading","to","eachComponent","input","label","type","placeholder","meta","touched","className","RenderForm","options","handleSubmit","fields","RenderFieldWrappedInstance","reduxForm","onSubmit","map","op","noCash","name","uuidv1","Field","onChange","component","PhoneForm","handleChange","event","target","phoneNumAuth","history","ifNotLogged","preventDefault","setBookmarks","authToken","processAuth","PollService","optns","withRouter","PhoneToken","handleChangeToken","doAuth","persistToken","alert","autoComplete","ConfirmCode","confirmToken","phoneNumber","status","onChangeFun","Checkbox","doChangeState","changeHandler","setState","condition","checked","defaultChecked","arrayToStr","array","result","Info","args","person","country","pos_info","age","birth_date","substring","city","jobs","title","schools","interests","sexuality","distance_mi","bio","PicWrapper","nextPic","photos","imgSrc","personName","onClick","src","alt","SelectDistanceFilter","parentObject","distanceFilter","radius","initialRadius","cssClasses","optionTags","SelectMinAgeFilter","int","changeState","ageFilterMin","SelectMaxAgeFilter","ageFilterMax","SelectPollInterval","interval","onSelectPollInterval","styles","SelectTextColor","selected","triggerRender","SelectBackgroundColor","UserView","saveProfile","age_filter_max","age_filter_min","distance_filter","discoverable","disableSaveButton","isButtonDisabled","getProfile","toggleShowProfile","val","toggleShowPicsCheckbox","goChat","pathname","pos","lat","lon","Btn","exact","activeClassName","image","info","disabled","pointVals","pointMode","banner","control","values","point","newMsgObj","postLocation","bindMap","startPort","overlayAll","showControls","showInputs","useDynamic","precision","columns","Header","accessor","sortable","defaultPageSize","showPagination","EditBio","goToFriendsView","user","elem","srcElement","getStyles","inputProps","getUserData","match","callbackFunc","userId","results","posInfo","region","user_interests","selected_interests","sexual_orientations","OnePicWrapper","doClick","Friends","sortByLastActivityDate","a","b","timeA","Date","getTime","applySorting","arrToBeSorted","sortingFunc","sort","MatchDecoratorService","showUser","msgMatches","friends","persons","prsn","picProps","firstName","lastName","pageSize","BtnLink","OneFriendView","NotesService","save","deleteMatch","matchId","isBookmarked","undefined","allBookmarks","location","getBookmarksAsObject","FriendRequests","getFriendRequests","isMountedOk","allFr","Pic","one","isActiveRecently","recently_active","style","width","height","MoreFriends","picIds","like","friendRequestPicIds","getNewFriends","callBack","pass","targetId","isLiked","pic","showMoreFriendsRefreshButton","hideMoreFriendsRefreshButton","InfoWrapper","hidden","AppSettings","findInMsgMatches","toggleFlashTabTitle","len","removeMsgMatch","isVisibleMoreFriendsTab","flashIntervalObj","startFlashTabTitle","stopFlashTabTitle","initialTitle","moreFriends1","updateFromBackend","isVisibleNewMsgs","username","EnterText","createMessage","dt","created_date","toISOString","match_id","message","sent_date","timestamp","onKeyPress","oneMatch","friendId","injectEmoji","emojiInjectorFunc","MessageWrapper","msgDateObj","timeStr","toLocaleTimeString","dateStr","toLocaleDateString","isSeen","showDate","date","setTimeout","Select","numberMsgShown","emojis","text","face","injectEmojiFunction","emo","foundAt","replace","Chat","onFocus","ev","isOnFocus","deleteFromHeader","onBlur","prepareMessages","allMsgs","transformedMsg","theirs","mine","sendSeen","msgWrapped","inputStyles","removeEventListener","present","reorderedMessages","bordered","Notes","processUserData","step","all","formDummyMatch","App","paddingTop","path","render","Boolean","hostname","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.797dccfd.chunk.js","sourcesContent":["let ipAdress = 'https://bender-app.herokuapp.com/';\r\n\r\nconst Const = {\r\n  URLS: {\r\n    BASE_URL: ipAdress,\r\n    AUTH: {\r\n      PHONE: ipAdress + 'requestCode',\r\n      GET_TOKEN: ipAdress + 'getToken/'\r\n    },\r\n    UPDATES: ipAdress + 'updates',\r\n    PROFILE: ipAdress + 'profile',\r\n    USER: ipAdress + 'user/',\r\n    MATCH: ipAdress +  'user/matches/',\r\n    SEND_MESSAGE: ipAdress + 'postMessage',\r\n    SEND_LOCATION: ipAdress + 'location',\r\n    NEW_FRIENDS: ipAdress + 'new-friends',\r\n    SEND_SEEN: ipAdress + 'seen/',\r\n    FAST_MATCH: ipAdress + 'fast-match',\r\n    LIKE: ipAdress + 'like/',\r\n    PASS: ipAdress + 'pass/',\r\n\r\n\r\n    //// storage api:\r\n    STORAGE: ipAdress + 'storage/',\r\n    STORAGE_TOKEN: ipAdress + 'storage/token/',\r\n    STORAGE_BOOKMARKS: ipAdress + 'storage/bookmarks/',\r\n    STORAGE_SETTINGS: ipAdress + 'storage/settings/'\r\n  },\r\n  UPDATE_POLL_INTERVAL: 20000,\r\n  LOCAL_CASH_VAR_NAME: '__TnDr__',\r\n  AUTH_HEADER_NAME: 'X-Auth-Token',\r\n  PHONE_HEADER_NAME: 'phone-number',\r\n  VERSION: '1.5'\r\n}\r\n\r\nexport default Const;\r\n","import React from 'react';\r\nimport axios from 'axios';\r\nimport Const from './Constants';\r\nimport CashService from './CashService';\r\n\r\nclass AjaxService extends React.Component {\r\n\r\n  execute = (method, url, data, headers) => {\r\n    return axios({\r\n      method: method,\r\n      url: url,\r\n      data: data,\r\n      headers: headers\r\n    });\r\n  };\r\n\r\n  doPost = (url, data, headers) => {\r\n    return this.execute('post', url, data, this.getHeaders(headers));\r\n  };\r\n\r\n  doPut = (url, data, headers) => {\r\n    return this.execute('put', url, data, this.getHeaders(headers));\r\n  };\r\n\r\n  doGet = (url, headers) => {\r\n    return this.execute('get', url, {}, this.getHeaders(headers));\r\n  };\r\n\r\n  doDelete = (url, headers) => {\r\n    return this.execute('delete', url, {}, this.getHeaders(headers));\r\n  };\r\n\r\n  getHeaders = (headers) => {\r\n    let authHeaderName = Const.AUTH_HEADER_NAME;\r\n    let phoneHeaderName = Const.PHONE_HEADER_NAME;\r\n    if (!headers) {\r\n      headers = {};\r\n    }\r\n\r\n    if (CashService[phoneHeaderName]) {\r\n      headers[phoneHeaderName] = CashService[phoneHeaderName];\r\n    }\r\n\r\n    if (CashService[authHeaderName]) {\r\n      headers[authHeaderName] = CashService[authHeaderName];\r\n    }\r\n    return headers;\r\n  };\r\n}\r\n\r\nexport default new AjaxService();\r\n","import React from 'react';\r\nimport Const from './Constants';\r\nimport AjaxService from './AjaxService';\r\n\r\nclass CashService extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this[Const.PHONE_HEADER_NAME] = null;\r\n    this[Const.AUTH_HEADER_NAME] = null;\r\n    this.settings = { bgColor: \"bg-dark\", textColor: \"text-white\" };\r\n    this.bookmarks = [];\r\n    this.cashStructureTemplate = {\r\n      settings: this.settings,\r\n      [Const.AUTH_HEADER_NAME]: { token: this[Const.AUTH_HEADER_NAME] },\r\n      bookmarks: this.bookmarks\r\n    }\r\n    window.addEventListener('resize', this.handleWindowSizeChange);\r\n    this.setWidth(window.innerWidth);\r\n  };\r\n\r\n  handleWindowSizeChange =  ()=> {\r\n     this.setWidth(window.innerWidth);\r\n  }\r\n\r\n  setWidth = (innerWidth)=> {\r\n    innerWidth = parseInt(innerWidth)\r\n    //check if NaN \r\n    if (innerWidth !== innerWidth) {\r\n      innerWidth = 1000;\r\n    }\r\n    this.innerWidth = innerWidth;\r\n  }\r\n\r\n  isMobile = () => {\r\n    return this.innerWidth <= 768\r\n  }\r\n\r\n  persistAll =  (phone, obj) => {\r\n    let promise = AjaxService.doPost(Const.URLS.STORAGE + phone, {\r\n      'json': JSON.stringify(obj)\r\n    }, {});\r\n    promise.catch((e) => {\r\n      console.error(e);\r\n    })\r\n  }\r\n\r\n  loadAll = function (phone) {\r\n    return AjaxService.doGet(Const.URLS.STORAGE + phone, {});\r\n  }\r\n\r\n  getPhone = () => {\r\n    return this[Const.PHONE_HEADER_NAME];\r\n  };\r\n\r\n  setPhone = (phone) => {\r\n    this[Const.PHONE_HEADER_NAME] = phone;\r\n  };\r\n\r\n  /// token:\r\n  getToken = () => {\r\n    return this[Const.AUTH_HEADER_NAME];\r\n  };\r\n\r\n  setToken = (token) => {\r\n    this[Const.AUTH_HEADER_NAME] = token;\r\n  };\r\n\r\n  persistToken(token) {\r\n    AjaxService.doPut(Const.URLS.STORAGE_TOKEN + this.getPhone(), {\r\n      'json': JSON.stringify({ \"token\": token })\r\n    });\r\n  }\r\n\r\n  //// settings:\r\n  getSettings = () => {\r\n    return this.settings;\r\n  };\r\n\r\n  setSettings = (settings) => {\r\n    this.settings = settings;\r\n  };\r\n\r\n  persistSettings = (settings) => {\r\n    AjaxService.doPut(Const.URLS.STORAGE_SETTINGS + this.getPhone(), {\r\n      'json': JSON.stringify(settings)\r\n    });\r\n  }\r\n\r\n  /// bookmarks:\r\n  getBookmarks() {\r\n    return this.bookmarks;\r\n  }\r\n\r\n  setBookmarks(bookmarks) {\r\n    this.bookmarks = bookmarks;\r\n  }\r\n\r\n  getBookmarksAsObject() {\r\n    return this.bookmarks.reduce((json, value, key) => {\r\n      json[value] = key;\r\n      return json;\r\n    }, {});\r\n  }\r\n\r\n  persistBookmarks = function (arr) {\r\n    let promise = AjaxService.doPost(Const.URLS.STORAGE_BOOKMARKS + this.getPhone(), {\r\n      'json': JSON.stringify(arr)\r\n    }, {});\r\n\r\n    promise.then((data) => {\r\n    }).catch((e) => {\r\n      console.error(e);\r\n    })\r\n  }\r\n}\r\n\r\nexport default new CashService();\r\n","import React from 'react';\r\nimport CashService from '../services/CashService';\r\nimport Const from '../services/Constants';\r\n\r\n//this singleton applies settings at startup:\r\nclass AppSettingsService extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.textColors = [\r\n      { \"name\": 'Gray', \"class\": 'text-muted' },\r\n      { \"name\": 'White', \"class\": 'text-white' },\r\n      { \"name\": 'Dark', \"class\": 'text-dark' },\r\n      { \"name\": 'Black', \"class\": 'text-body' }\r\n    ]\r\n\r\n    this.bgColors = [\r\n      { \"name\": 'Gray', \"class\": 'bg-secondary' },\r\n      { \"name\": 'Dark', \"class\": 'bg-dark' },\r\n      { \"name\": 'Light', \"class\": 'bg-light' }\r\n    ]\r\n\r\n    this.updatePollInterval = Const.UPDATE_POLL_INTERVAL;\r\n    this.isToShowPhotos = true;\r\n  }\r\n\r\n  applyDesignSettings = () => {\r\n    let textColor = this.getSetting(\"textColor\") || this.textColors[0]?.class;\r\n    if (textColor) {\r\n      console.log(textColor);\r\n      \r\n      this.applyClass(document.body, this.textColors, textColor);\r\n    }\r\n\r\n    let bgColor = this.getSetting(\"bgColor\") || this.bgColors[0].class;\r\n    if (bgColor) {\r\n      this.applyClass(document.body, this.bgColors, bgColor);\r\n    }\r\n  }\r\n\r\n  persistSetting = (settingName, settingObject) => {\r\n    let settings = CashService.getSettings();\r\n    if (!settings) {\r\n      settings = {};\r\n      CashService.setSettings(settings);\r\n    }\r\n    settings[settingName] = settingObject;\r\n    CashService.persistSettings(settings);\r\n  }\r\n\r\n  getSetting = (settingName) => {\r\n    let settings = CashService.getSettings();\r\n    return settings?.[settingName];\r\n  }\r\n\r\n  applyClass = (element, colors, selectedColor) => {\r\n    colors.forEach(color => {\r\n      element.classList.remove(color.class);\r\n    });\r\n\r\n    element.classList.add(selectedColor);\r\n  }\r\n\r\n  getInputStyleClasses = () => {\r\n    return \"form-control \" + (this.getSetting(\"textColor\") || \" \") +\r\n      \" \" + (this.getSetting(\"bgColor\") || \"\");\r\n  }\r\n}\r\nexport default new AppSettingsService();\r\n","import React from 'react';\r\n\r\nclass BeanContextAware extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.context= {};\r\n  };\r\n\r\n  add = (bean) => {\r\n    if (!bean || !bean.state) {\r\n      throw new Error(\"Not allowed 'null' values for 'bean': \" + bean + \" !\");\r\n    }\r\n    let beanId = bean.state.beanId || bean.props.beanId;\r\n    if (!beanId) {\r\n      throw new Error(\"Not allowed 'null' value for 'beanId' \" + beanId  + \" !\" );\r\n    }\r\n    if (this.context[beanId]) {\r\n      console.warn(\"Bean with 'beanId': \" + beanId + \"is already registered under BeanContextAware!\");\r\n    }\r\n    this.context[beanId] = bean;\r\n  }\r\n\r\n  get = (beanId) => {\r\n    if (!beanId ) {\r\n      throw new Error(\"Not allowed 'null' value for 'beanId' \" + beanId + \" !\" );\r\n    }\r\n    return this.context[beanId];\r\n  }\r\n\r\n  remove = (bean) => {\r\n    if (!bean) {\r\n      throw new Error(\"Not allowed 'null' value for 'bean' \" + bean + \" !\" );\r\n    }\r\n    if ( typeof bean === 'string' ) {\r\n        delete this.context[bean];\r\n        return;\r\n    }\r\n    let beanId = bean.state.beanId || bean.props.beanId;\r\n    delete this.context[beanId];\r\n  }\r\n}\r\nexport default new BeanContextAware();\r\n","import { createStore, combineReducers } from 'redux';\r\nimport { reducer as reduxFormReducer } from 'redux-form';\r\n\r\nconst reducer = combineReducers({\r\n  form: reduxFormReducer // mounted under \"form\"\r\n})\r\nconst store =\r\n  (window.devToolsExtension ? window.devToolsExtension()(createStore) : createStore)(reducer)\r\n\r\nconst functionsQueue = [];\r\n\r\nlet addToFunctionsQ = (funct) => {\r\n  functionsQueue.push(funct);\r\n\r\n  while (functionsQueue.length > 0) {\r\n    let funcToCall = functionsQueue.shift()\r\n    funcToCall();\r\n  }\r\n}\r\n\r\nstore.getStore = () => {\r\n  // add dummy function as a placeholder\r\n  addToFunctionsQ(() => { });\r\n  return store;\r\n}\r\n\r\nstore.getMatchById = (id) => {\r\n  if (!id) {\r\n    throw new Error(\"'id' is not allowed to be: \" + id);\r\n  }\r\n  let matches = store.getStore()?.update?.data?.matches || [];\r\n  for (var i = 0; i < matches.length; i++) {\r\n    if (id === matches[i]._id) {\r\n      return matches[i];\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nstore.addToStore = (key, value) => {\r\n  if (!key || typeof (key) != 'string') {\r\n    throw new Error(\"Only objects of type 'string' are allowed!\");\r\n  }\r\n\r\n  addToFunctionsQ(\r\n    function () {\r\n      store[key] = value;\r\n    }\r\n  );\r\n}\r\n\r\nexport default store;\r\n","import React from 'react';\r\nimport Const from './Constants';\r\nimport AjaxService from './AjaxService';\r\nimport BeanContextAware from './BeanContextAware';\r\nimport AppSettingsService from '../settings/AppSettingsService';\r\nimport store from '../store';\r\n\r\nclass PollService extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n    this.BASE_DATE = \"1984-08-01T00:00:00.000Z\";\r\n    this.last_activity_date = this.BASE_DATE;\r\n    this.exceptionCount = 0;\r\n  };\r\n\r\n  checkIfLogged = (headers, onSuccess, onFailure) => {\r\n    let promise = AjaxService.doGet(Const.URLS.PROFILE, headers)\r\n    promise.then((data) => {\r\n      store.addToStore('profile', data);\r\n      onSuccess()\r\n      this.getUpdatesForDate(this.getLastActivityDate());\r\n      this.startUpdatePoll(AppSettingsService.updatePollInterval);\r\n\r\n    }).catch((e) => {\r\n      console.error(e);\r\n      onFailure()\r\n    })\r\n  }\r\n\r\n  mergeUpdates = (store, updates) => {\r\n    let matches = updates?.data?.matches || [];\r\n\r\n    for (let i = 0; i < matches.length; i++) {\r\n      let matchUpdate = matches[i];\r\n      let oldMatch = store.getMatchById(matchUpdate._id);\r\n      //merge brand new matches:\r\n      if (!oldMatch) {\r\n        store.getStore().update.data.matches.push(matchUpdate);\r\n        this.addToUnreadMessagesBadge(matchUpdate);\r\n        continue;\r\n      }\r\n\r\n      //merge new messages:\r\n      let newMsgs = matchUpdate.messages;\r\n      let newMsgsCount = newMsgs.length;\r\n      for (let y = oldMatch.messages.length - 1; 0 <= newMsgsCount || 0 <= y; y-- , newMsgsCount--) {\r\n        if (oldMatch.messages[y] && !oldMatch.messages[y]._id) {\r\n          oldMatch.messages.splice(y, 1);\r\n        }\r\n      }\r\n      oldMatch.messages = oldMatch.messages.concat(newMsgs);\r\n\r\n      /// merge seen:\r\n      if (!oldMatch.seen) {\r\n        oldMatch.seen = {};\r\n      }\r\n\r\n      let lastSeenMsg = matchUpdate?.seen?.last_seen_msg_id;\r\n      if (!!lastSeenMsg) {\r\n        oldMatch.seen.last_seen_msg_id = lastSeenMsg;\r\n      }\r\n\r\n      /// merge last_activity_date:\r\n      oldMatch.last_activity_date = matchUpdate?.last_activity_date || oldMatch.last_activity_date || this.BASE_DATE;\r\n    }\r\n  }\r\n\r\n  markLastUnreadMessages = (store, updates) => {\r\n    let matches = updates?.data?.matches;\r\n\r\n    for (let i = 0; i < matches?.length; i++) {\r\n      let matchUpdate = matches[i];\r\n      let oldMatch = store.getMatchById(matchUpdate._id);\r\n\r\n      let newLastSeenMsgId = matchUpdate?.seen?.last_seen_msg_id;\r\n      let oldLastSeenMsgId = oldMatch?.seen?.last_seen_msg_id;\r\n      let localUser = store?.profile?.data;\r\n\r\n      if (!localUser || !localUser._id) {\r\n        continue;\r\n      }\r\n      let newMsgs = matchUpdate.messages;\r\n\r\n      for (var ind = newMsgs.length - 1; 0 <= ind; ind--) {\r\n        let msg = newMsgs[ind];\r\n\r\n        if (!msg.from) {\r\n          continue;\r\n        }\r\n\r\n        if (localUser._id !== msg.from) {\r\n          if ((msg._id !== newLastSeenMsgId) || (!newLastSeenMsgId && !oldLastSeenMsgId)) {\r\n            this.addToUnreadMessagesBadge(oldMatch);\r\n          }\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  addToUnreadMessagesBadge = (mtch) => {\r\n    let header = BeanContextAware.get('header1');\r\n    if (header) {\r\n      header.addMsgMatch(mtch)\r\n    }\r\n  }\r\n\r\n  getUpdatesForDate = (lastDate) => {\r\n    let header = BeanContextAware.get('header1');\r\n    let chat1 = BeanContextAware.get('chat1');\r\n    let data = {\r\n      \"last_activity_date\": lastDate\r\n    }\r\n\r\n    let promise = AjaxService.doPost(Const.URLS.UPDATES, data, {});\r\n    promise.then((data) => {\r\n      if (store.update) {\r\n        this.mergeUpdates(store, data);\r\n      } else {\r\n        store.addToStore('update', data);\r\n      }\r\n\r\n      this.markLastUnreadMessages(store, data);\r\n\r\n      /// merge global (updates polling) last_activity_date:\r\n      this.last_activity_date = data.data.last_activity_date;\r\n\r\n      if (chat1) chat1.triggerRenderFunc();\r\n      if (header) header.changeButtonVisibility({ isVisible: true });\r\n\r\n      this.exceptionCount = 0;\r\n\r\n    }).catch((e) => {\r\n      console.error(e);\r\n\r\n      if (header) header.changeButtonVisibility({ isVisible: false })\r\n\r\n      if (this.isToStopUpdatePoll(e)) this.stopUpdatePoll();\r\n\r\n      this.exceptionCount++\r\n    })\r\n  }\r\n\r\n  isToStopUpdatePoll = (exception) => {\r\n    if (this.exceptionCount > 2) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  startUpdatePoll = (seconds) => {\r\n    if (!seconds) {\r\n      console.error(\"error null val for 'seconds'\");\r\n      return;\r\n    }\r\n    this.stopUpdatePoll();\r\n    this.pollInterval = seconds\r\n    this.pollIntervalObj = setInterval(\r\n      () => {\r\n        this.getUpdatesForDate(this.getLastActivityDate());\r\n      }, seconds\r\n    );\r\n  }\r\n\r\n  getUpdates = () => {\r\n    this.getUpdatesForDate(this.getLastActivityDate());\r\n  }\r\n\r\n  getLastActivityDate = () => {\r\n    return this.last_activity_date;\r\n  }\r\n\r\n  stopUpdatePoll = () => {\r\n    if (this.pollIntervalObj) {\r\n      clearTimeout(this.pollIntervalObj)\r\n    }\r\n  }\r\n}\r\nexport default new PollService();\r\n////update after 'like' no messages - {\"matches\":[{\"seen\":{\"match_seen\":false},\"_id\":\"59c7cb4e539465f9756024295f26954c5497b601005dc564\",\"id\":\"59c7cb4e539465f9756024295f26954c5497b601005dc564\",\"closed\":false,\"common_friend_count\":0,\"common_like_count\":0,\"created_date\":\"2020-08-07T15:03:11.262Z\",\"dead\":false,\"last_activity_date\":\"2020-08-07T15:03:11.262Z\",\"message_count\":0,\"messages\":[],\"muted\":false,\"participants\":[\"59c7cb4e539465f975602429\"],\"pending\":false,\"is_super_like\":false,\"is_boost_match\":false,\"is_super_boost_match\":false,\"is_experiences_match\":false,\"is_fast_match\":false,\"is_opener\":false,\"person\":{\"_id\":\"59c7cb4e539465f975602429\",\"birth_date\":\"1987-08-10T15:03:43.687Z\",\"gender\":1,\"name\":\"Paloma\",\"ping_time\":\"2014-12-09T00:00:00.000Z\",\"photos\":[{\"id\":\"d3d917a3-c69d-42dc-89b0-6ec1669dcec5\",\"url\":\"https://images-ssl.gotinder.com/59c7cb4e539465f975602429/1080x1080_d3d917a3-c69d-42dc-89b0-6ec1669dcec5.jpg\",\"processedFiles\":[{\"url\":\"https://images-ssl.gotinder.com/59c7cb4e539465f975602429/640x640_d3d917a3-c69d-42dc-89b0-6ec1669dcec5.jpg\",\"height\":640,\"width\":640},{\"url\":\"https://images-ssl.gotinder.com/59c7cb4e539465f975602429/320x320_d3d917a3-c69d-42dc-89b0-6ec1669dcec5.jpg\",\"height\":320,\"width\":320},{\"url\":\"https://images-ssl.gotinder.com/59c7cb4e539465f975602429/172x172_d3d917a3-c69d-42dc-89b0-6ec1669dcec5.jpg\",\"height\":172,\"width\":172},{\"url\":\"https://images-ssl.gotinder.com/59c7cb4e539465f975602429/84x84_d3d917a3-c69d-42dc-89b0-6ec1669dcec5.jpg\",\"height\":84,\"width\":84}],\"fileName\":\"d3d917a3-c69d-42dc-89b0-6ec1669dcec5.jpg\",\"extension\":\"jpg\"}]},\"following\":true,\"following_moments\":true,\"readreceipt\":{\"enabled\":false}}],\"blocks\":[],\"inbox\":[],\"liked_messages\":[],\"harassing_messages\":[],\"lists\":[],\"goingout\":[],\"deleted_lists\":[],\"squads\":[],\"last_activity_date\":\"2020-08-07T15:03:11.262Z\",\"poll_interval\":{\"standard\":2000,\"persistent\":60000}}\r\n/// after my message is sent - {\"matches\":[{\"seen\":{\"match_seen\":false},\"_id\":\"59c7cb4e539465f9756024295f26954c5497b601005dc564\",\"last_activity_date\":\"2020-08-07T15:05:46.219Z\",\"messages\":[{\"_id\":\"5f2d6dca47d1400100fe5f04\",\"match_id\":\"59c7cb4e539465f9756024295f26954c5497b601005dc564\",\"sent_date\":\"2020-08-07T15:05:46.219Z\",\"message\":\"...    \\uD83D\\uDE09\",\"to\":\"59c7cb4e539465f975602429\",\"from\":\"5f26954c5497b601005dc564\",\"created_date\":\"2020-08-07T15:05:46.219Z\",\"timestamp\":1596812746219}],\"is_new_message\":true,\"readreceipt\":{\"enabled\":false}}],\"blocks\":[],\"inbox\":[],\"liked_messages\":[],\"harassing_messages\":[],\"lists\":[],\"goingout\":[],\"deleted_lists\":[],\"squads\":[],\"last_activity_date\":\"2020-08-07T15:05:46.219Z\",\"poll_interval\":{\"standard\":2000,\"persistent\":60000}}\r\n/// their first message - {\"matches\":[{\"seen\":{\"match_seen\":false},\"_id\":\"5de0287220298d0100540ea05f26954c5497b601005dc564\",\"last_activity_date\":\"2020-08-07T15:53:30.726Z\",\"messages\":[{\"_id\":\"5f2d78faf6162301001219ba\",\"match_id\":\"5de0287220298d0100540ea05f26954c5497b601005dc564\",\"sent_date\":\"2020-08-07T15:53:30.726Z\",\"message\":\" \",\"to\":\"5f26954c5497b601005dc564\",\"from\":\"5de0287220298d0100540ea0\",\"created_date\":\"2020-08-07T15:53:30.726Z\",\"timestamp\":1596815610726}],\"is_new_message\":true,\"readreceipt\":{\"enabled\":false}}],\"blocks\":[],\"inbox\":[],\"liked_messages\":[],\"harassing_messages\":[],\"lists\":[],\"goingout\":[],\"deleted_lists\":[],\"squads\":[],\"last_activity_date\":\"2020-08-07T15:53:30.726Z\",\"poll_interval\":{\"standard\":2000,\"persistent\":60000}}\r\n\r\n\r\n","import React from 'react';\r\nimport Const from '../services/Constants';\r\nimport AjaxService from '../services/AjaxService';\r\nimport CashService from '../services/CashService';\r\n\r\nclass NotesService extends React.Component {\r\n\r\n  saveBookmark = function (personId) {\r\n    let bookmarks = CashService.getBookmarks();\r\n    if (bookmarks.indexOf(personId) !== -1) {\r\n      return;\r\n    }\r\n    bookmarks.push(personId);\r\n    CashService.persistBookmarks(bookmarks);\r\n  }\r\n\r\n  removeBookmark = function (personId) {\r\n    let bookmarks = CashService.getBookmarks();\r\n    for (let index = 0; index < bookmarks.length; index++) {\r\n      let oneFromArr = bookmarks[index];\r\n      if (!!personId && oneFromArr === personId) {\r\n        bookmarks.splice(index, 1);\r\n        CashService.persistBookmarks(bookmarks);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  saveAllByPhone = function (phone = CashService.getPhone()) {\r\n    CashService.persistAll(phone, CashService.cashStructureTemplate);\r\n  }\r\n\r\n  getOne = function (phone = CashService.getPhone()) {\r\n    let promise = AjaxService.doGet(Const.URLS.STORAGE + phone, {});\r\n\r\n    promise.then((data) => {\r\n      console.log(data);\r\n    }).catch((e) => {\r\n      console.error(e);\r\n    })\r\n  }\r\n\r\n  // delete = function (phone = CashService.getPhone()) {\r\n  //   let promise = AjaxService.doDelete(Const.URLS.STORAGE + phone, {});\r\n\r\n  //   promise.then((data) => {\r\n  //     console.log(data);\r\n  //   }).catch((e) => {\r\n  //     console.error(e);\r\n  //   })\r\n  // }\r\n\r\n}\r\nexport default new NotesService();","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      hits: [],\r\n      isLoading: false,\r\n      error: null,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div >\r\n        <h1>Welcome</h1>\r\n        <Link to=\"/phone\">  Login with phone</Link>\r\n        <p/>\r\n        <Link to=\"/phone-token\">  Login with phone and token</Link>\r\n      </div >\r\n    )\r\n  }\r\n}\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport uuidv1 from 'uuid/v1';\r\nimport { Field, reduxForm } from 'redux-form'\r\nimport store from '../store'\r\nimport { Provider } from 'react-redux'\r\n\r\nconst eachComponent = ({ input, label, type, value, placeholder, meta: { touched, error } }) => (\r\n  <div>\r\n    <label>{label}</label>\r\n    <div>\r\n      <input className='form-control' {...input} placeholder={placeholder} type={type} />\r\n      {touched && error && <span>{error}</span>}\r\n      <p />\r\n    </div>\r\n  </div>\r\n)\r\nlet randomizeName = (obj) => {\r\n  if (obj.noCash) { // prevent auto-suggest\r\n    obj.name = uuidv1();\r\n  }\r\n}\r\nclass RenderForm extends React.Component {\r\n\r\n  render() {\r\n    let { options } = this.props;\r\n    let handleSubmit = options.handleSubmit;\r\n    let fields = options.fields;\r\n\r\n    let RenderFieldWrapped = () => (\r\n      <div>\r\n        <form onSubmit={handleSubmit} >\r\n          {\r\n            fields.map(op => {\r\n              randomizeName(op)\r\n              return <div key={op.name}>\r\n                <Field name={op.name} onChange={op.onChange} component={eachComponent}\r\n                  type=\"input\" placeholder={op.placeholder} label={op.label} />\r\n                <p />\r\n              </div>\r\n            })\r\n          }\r\n          < input className=\"btn btn-primary\" type=\"submit\" value=\"Submit\" />\r\n        </form>\r\n      </div>\r\n    )\r\n\r\n\r\n    let RenderFieldWrappedInstance = reduxForm({\r\n      form: 'RenderFieldWrapped'\r\n    })(RenderFieldWrapped);\r\n\r\n    return (\r\n      <div>\r\n        <Provider store={store}>\r\n          <RenderFieldWrappedInstance options={options} />\r\n        </Provider>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default RenderForm\r\n","import React from 'react';\r\nimport Const from '../services/Constants';\r\nimport AjaxService from '../services/AjaxService';\r\nimport CashService from '../services/CashService';\r\nimport PollService from '../services/PollService';\r\nimport AppSettingsService from '../settings/AppSettingsService';\r\nimport RenderForm from '../building-blocks/RenderForm';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nclass PhoneForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      phone: ''\r\n    };\r\n  }\r\n\r\n  handleChange = event => {\r\n    this.state.phone = event.target.value;\r\n  };\r\n\r\n  phoneNumAuth = function (phone) {\r\n    let promise = AjaxService.doPost(Const.URLS.AUTH.PHONE, {\r\n      'phone': phone\r\n    }, {});\r\n\r\n    promise.then(() => {\r\n      CashService.setPhone(phone);\r\n      this.props.history.push('/confirm-token');\r\n    }).catch((e) => {\r\n      CashService.setPhone(null);\r\n      console.error(e);\r\n    })\r\n  }\r\n\r\n  ifNotLogged = (phone) => {\r\n    CashService.setToken(null);\r\n    this.phoneNumAuth(phone);\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    let phone = this.state.phone;\r\n\r\n    let promise = CashService.loadAll(phone);\r\n    CashService.setPhone(phone);\r\n    promise.then((data) => {\r\n      console.log(data?.data);\r\n\r\n      let settings = data?.data?.settings;\r\n      if (settings) {\r\n        CashService.setSettings(settings);\r\n        AppSettingsService.applyDesignSettings();\r\n      }\r\n      let bookmarks = data?.data?.bookmarks;\r\n      if (bookmarks) {\r\n        CashService.setBookmarks(bookmarks);\r\n      }\r\n      let authToken = data?.data?.[Const.AUTH_HEADER_NAME]?.token;\r\n      this.processAuth(authToken, phone);\r\n    }).catch((e) => {\r\n      console.error(e);\r\n    })\r\n  }\r\n\r\n  processAuth = (authToken, phone) => {\r\n    if (authToken) {\r\n      CashService.setToken(authToken);\r\n      PollService.checkIfLogged({},\r\n        () => { this.props.history.push('/user') },\r\n        () => { this.ifNotLogged(phone) });\r\n\r\n    } else {\r\n      CashService.persistAll(phone, CashService.cashStructureTemplate);\r\n      this.phoneNumAuth(phone);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const optns = {\r\n      handleSubmit: this.handleSubmit,\r\n      fields: [\r\n        {\r\n          name: 'Phone number', label: 'Phone number',\r\n          placeholder: 'Please, fill in ur phone number',\r\n          onChange: this.handleChange\r\n        }\r\n      ]\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <RenderForm options={optns} />\r\n      </div >\r\n    )\r\n  }\r\n}\r\nexport default withRouter(PhoneForm);\r\n","import React from 'react';\r\nimport Const from '../services/Constants';\r\nimport CashService from '../services/CashService';\r\nimport PollService from '../services/PollService';\r\nimport AppSettingsService from '../settings/AppSettingsService';\r\nimport RenderForm from '../building-blocks/RenderForm';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nclass PhoneToken extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      phone: '',\r\n      token: ''\r\n    };\r\n  }\r\n\r\n  handleChange = event => {\r\n    this.state.phone = event.target.value;\r\n  };\r\n\r\n  handleChangeToken = event => {\r\n    this.state.token = event.target.value;\r\n  };\r\n\r\n  doAuth = function (authToken, phone) {\r\n    let onSuccess = () => {\r\n      CashService.setToken(authToken);\r\n      CashService.persistToken(authToken);\r\n      this.props.history.push('/user');\r\n    }\r\n\r\n    let onFailure = () => {\r\n      window.alert('The provided token: ' + authToken\r\n      + ' is expired... phone: ' +phone);\r\n      this.props.history.push('/phone-token');\r\n    }\r\n\r\n    let headers = {\r\n      [Const.AUTH_HEADER_NAME] : authToken\r\n    }\r\n\r\n    PollService.checkIfLogged(headers, onSuccess, onFailure);\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    let phone = this.state.phone;\r\n    let authToken = this.state.token\r\n\r\n    let promise = CashService.loadAll(phone);\r\n    CashService.setPhone(phone);\r\n    promise.then((data) => {\r\n\r\n      let settings = data?.data?.settings;\r\n      if (settings) {\r\n        CashService.setSettings(settings);\r\n        AppSettingsService.applyDesignSettings();\r\n      }\r\n      let bookmarks = data?.data?.bookmarks;\r\n      if (bookmarks) {\r\n        CashService.setBookmarks(bookmarks);\r\n      }\r\n\r\n      this.doAuth(authToken, phone)\r\n\r\n    }).catch((e) => {\r\n      console.error(e);\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const optns = {\r\n      handleSubmit: this.handleSubmit,\r\n      fields: [\r\n        { name: 'Phone number', label: 'Phone number', placeholder: 'phone number..', onChange: this.handleChange },\r\n        { name: 'X-token', label: 'X-token', placeholder: 'auth token..', noCash: true, onChange: this.handleChangeToken }\r\n      ]\r\n    }\r\n\r\n    return (\r\n      <div autoComplete=\"new-password\">\r\n        <RenderForm autoComplete=\"new-password\" options={optns} />\r\n      </div >\r\n    )\r\n  }\r\n}\r\nexport default withRouter(PhoneToken);\r\n","import React from 'react';\r\nimport Const from '../services/Constants';\r\nimport AjaxService from '../services/AjaxService';\r\nimport PollService from '../services/PollService';\r\nimport CashService from '../services/CashService';\r\nimport RenderForm from '../building-blocks/RenderForm';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nclass ConfirmCode extends React.Component {\r\n  constructor(props) {\r\n\r\n    super(props);\r\n    this.state = {\r\n      confirmToken: ''\r\n    };\r\n  }\r\n\r\n  handleChange = event => {\r\n    this.state.confirmToken = event.target.value;\r\n    //this.setState({confirmToken: event.target.value});\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    let phoneNumber = CashService.getPhone();\r\n    if (!phoneNumber) {\r\n      throw new Error(\"CashService[Const.PHONE_HEADER_NAME] is not allowed to be \" + phoneNumber);\r\n    }\r\n    let { history } = this.props;\r\n\r\n    let promise = AjaxService.doGet(Const.URLS.AUTH.GET_TOKEN + this.state.confirmToken + \"/\" + phoneNumber);\r\n\r\n    promise.then(function (value) {\r\n      if (value && value.status === 200 && value.data) {\r\n        let token = value.data[Const.AUTH_HEADER_NAME];\r\n\r\n        let headers = {\r\n          [Const.AUTH_HEADER_NAME] : token\r\n        }\r\n\r\n        let onSuccess = function() {\r\n          CashService.setToken(token);\r\n          CashService.persistToken(token);\r\n          history.push('/user');\r\n        }\r\n\r\n        let onFailure = function() {\r\n          history.push('/phone');\r\n        }\r\n\r\n        PollService.checkIfLogged(headers, onSuccess, onFailure);\r\n      }\r\n    }).catch((e) => {\r\n      // delete cash[store.phoneNumber];\r\n      // delete store.phoneNumber;\r\n      // localStorage.setItem(cashVarName, JSON.stringify(cash));\r\n      console.log(e);\r\n    })\r\n\r\n  }\r\n\r\n  render() {\r\n    const optns = {\r\n      handleSubmit: this.handleSubmit,\r\n      fields: [\r\n        { name: 'Confirmation code', label: 'Confirmation code', placeholder: 'confirmation code...', \r\n        noCash: true, onChangeFun: this.handleChange }\r\n      ]\r\n    }\r\n    return (\r\n      <div >\r\n        <RenderForm options={optns} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(ConfirmCode)\r\n","import React from 'react';\r\n\r\nexport default class Checkbox extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      condition: props.condition\r\n    }\r\n\r\n    this.changeHandler = props.changeHandler;\r\n    this.defaultChecked = props.defaultChecked;\r\n    this.label = props.label;\r\n  }\r\n\r\n  doChangeState = (e) => {\r\n    this.changeHandler(e);\r\n    this.setState({\r\n      condition: e.target.checked\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"form-check\">\r\n        <input className=\"form-check-input\" type=\"checkbox\" checked={this.state.condition} onChange={this.doChangeState} /> \r\n        <label className=\"form-check-label\"> {this.label} </label>\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react';\r\n\r\nfunction arrayToStr(array) {\r\n  if (!array) {\r\n    return null;\r\n  }\r\n  let result = \"\"\r\n  for (let index = 0; index < array.length; index++) {\r\n    const element = array[index];\r\n    const name = element?.name;\r\n    if (name) {\r\n      result = result.concat(name + \", \")\r\n    }\r\n  }\r\n  if (result === \"\") {\r\n    return null;\r\n  }\r\n  return result\r\n}\r\n\r\nfunction Info(args) {\r\n  let { person } = args;\r\n  if (!person) {\r\n    return (\r\n      <div> </div>\r\n    )\r\n  }\r\n  let country = person.pos_info ? (person.pos_info.country ? person.pos_info.country.name : \"\") : \"\";\r\n  let age = person.birth_date ? person.birth_date.substring(0, 4) : \"\";\r\n  let city = person.pos_info ? (person.pos_info.city ? person.pos_info.city.name : \"\") : \"\";\r\n  person.jobs = person.jobs?.[0]?.title?.name || \"\";\r\n  person.schools = person.schools?.[0]?.name || \"\";\r\n  let interests = arrayToStr(person?.interests);\r\n  let sexuality = arrayToStr(person?.sexuality);\r\n  return (\r\n    <div className=\"text-justify text-wrap\">\r\n      {person.name ? (<div> <span className=\"font-weight-bold\">Name:  </span> {person.name} </div>) : null}\r\n      {person.birth_date ? (<div> <span className=\"font-weight-bold\">Age:  </span> {age} </div>) : null}\r\n      {person.distance_mi ? (<div> <span className=\"font-weight-bold\">Away (miles):  </span> {person.distance_mi} </div>) : null}\r\n      {city ? (<div> <span className=\"font-weight-bold\">Location:  </span> {city}, {country}  </div>) : null}\r\n      {person.bio ? (<div> <span className=\"font-weight-bold\">Bio:  </span> {person.bio} </div>) : null}\r\n      {person.jobs ? (<div> <span className=\"font-weight-bold\">Job:  </span> {person.jobs} </div>) : null}\r\n      {person.schools ? (<div> <span className=\"font-weight-bold\">Schools:  </span> {person.schools} </div>) : null}\r\n      {interests ? (<div> <span className=\"font-weight-bold\">Interests:  </span> {interests} </div>) : null}\r\n      {sexuality ? (<div> <span className=\"font-weight-bold\">Sexuality:  </span> {sexuality} </div>) : null}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Info;","import React from 'react';\r\nimport AppSettingsService from '../settings/AppSettingsService';\r\n\r\nclass PicWrapper extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    let { photos, name } = this.props;\r\n    this.personName = name;\r\n\r\n    this.isToShowPhotos = AppSettingsService.isToShowPhotos;\r\n    this.ind = 0;\r\n\r\n    let imgSrc = this.isToShowPhotos ? photos?.[this.ind]?.url : null;\r\n\r\n    this.state = {\r\n      photos: photos,\r\n      imgSrc: imgSrc\r\n    };\r\n  }\r\n\r\n   nextPic = () => {\r\n    if (!this.isToShowPhotos) {\r\n      return;\r\n    }\r\n    if (this.state.photos.length < 2) {\r\n      return;\r\n    }\r\n    if (this.ind < this.state.photos.length - 1) {\r\n      this.ind++;\r\n    } else {\r\n      this.ind = 0;\r\n    }\r\n    this.setState({\r\n      imgSrc: this.state.photos[this.ind].url\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.imgSrc) {\r\n      return (\r\n        <div>\r\n        </div>\r\n      )\r\n    } else if (this.isToShowPhotos) {\r\n      return (\r\n        <div className=\"container-fluid px-0\">\r\n          <img onClick={this.nextPic} src={this.state.imgSrc} alt=\"some image\" className='img-fluid w-100' />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <label className=\"text-center\">{this.personName} </label>\r\n        </div>\r\n      );\r\n    }\r\n\r\n  }\r\n}\r\nexport default PicWrapper;\r\n","import React from 'react'\r\nimport AppSettingsService from '../settings/AppSettingsService';\r\n\r\nexport default class SelectDistanceFilter extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      radius: props.initialRadius || 0\r\n    }\r\n    this.parentObject = props.parentObject;\r\n  }\r\n\r\n  changeHandler = (e) => {\r\n    this.parentObject.setState({ distanceFilter: e.target.value })\r\n  }\r\n\r\n  render() {\r\n    let cssClasses = AppSettingsService.getInputStyleClasses()\r\n    let optionTags = [];\r\n    for (let value = 1; value < 100; value++) {\r\n      optionTags.push(<option key={value} value={value}>{value}</option>)\r\n    }\r\n    return (\r\n      <form>\r\n        <div className='form-group'>\r\n          <label>Distance (miles):</label>\r\n          <select\r\n            className={cssClasses}\r\n            value={this.state.radius}\r\n            onChange={this.changeHandler}>\r\n            {optionTags}\r\n          </select>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import React from 'react'\r\nimport AppSettingsService from '../settings/AppSettingsService';\r\n\r\nexport default class SelectMinAgeFilter extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      ageFilterMin: props.ageFilterMin || 18\r\n    }\r\n    this.parentObject = props.parentObject;\r\n  }\r\n\r\n  changeHandler = (e) => {\r\n    let int = parseInt(e.target.value)\r\n    this.parentObject.changeState({ ageFilterMin: int })\r\n  }\r\n\r\n  render() {\r\n    let cssClasses = AppSettingsService.getInputStyleClasses()\r\n    let optionTags = [];\r\n    for (let value = 18; value < 50; value++) {\r\n      optionTags.push(<option key={value} value={value}>{value}</option>);\r\n    }\r\n    return (\r\n      <form>\r\n        <div className='form-group'>\r\n          <label>Min age:</label>\r\n          <select\r\n            className={cssClasses}\r\n            value={this.state.ageFilterMin}\r\n            onChange={this.changeHandler}>\r\n            {optionTags}\r\n          </select>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import React from 'react'\r\nimport AppSettingsService from '../settings/AppSettingsService';\r\n\r\nexport default class SelectMaxAgeFilter extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      ageFilterMax: props.ageFilterMax || 1000\r\n    }\r\n    this.parentObject = props.parentObject;\r\n  }\r\n\r\n  changeHandler = (e) => {\r\n    let int = parseInt(e.target.value)\r\n    this.parentObject.changeState({ ageFilterMax: int })\r\n  }\r\n\r\n  render() {\r\n    let cssClasses = AppSettingsService.getInputStyleClasses()\r\n    let optionTags = [];\r\n    for (let value = 18; value < 55; value++) {\r\n      optionTags.push(<option key={value} value={value}>{value}</option>);\r\n    }\r\n    optionTags.push(<option key={1000} value={1000}>{\"55+\"}</option>);\r\n    return (\r\n      <form>\r\n        <div className='form-group'>\r\n          <label>Max age:</label>\r\n          <select\r\n            className={cssClasses}\r\n            value={this.state.ageFilterMax}\r\n            onChange={this.changeHandler}>\r\n            {optionTags}\r\n          </select>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport AppSettingsService from './AppSettingsService';\r\n\r\nexport default class SelectPollInterval extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      interval: AppSettingsService.updatePollInterval\r\n    }\r\n  }\r\n\r\n  changeHandler = (e) => {\r\n    this.setState({\r\n      interval: e.target.value\r\n    })\r\n    AppSettingsService.updatePollInterval = e.target.value;\r\n    this.props.onSelectPollInterval(e.target.value);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form>\r\n        <div className='form-group'>\r\n          <label>Updates interval:</label>\r\n          <select\r\n            className={this.props.styles}\r\n            value={this.state.interval}\r\n            onChange={this.changeHandler}>\r\n            <option value=\"10000\">10 sec</option>\r\n            <option value=\"20000\">20 sec</option>\r\n            <option value=\"40000\">40 sec</option>\r\n            <option value=\"50000\">50 sec</option>\r\n            <option value=\"60000\">1 min</option>\r\n            <option value=\"300000\">5 min</option>\r\n            <option value=\"600000\">10 min</option>\r\n          </select>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport AppSettingsService from './AppSettingsService';\r\n\r\nexport default class SelectTextColor extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      selected: AppSettingsService.getSetting(\"textColor\") || AppSettingsService.textColors[0]\r\n    }\r\n  }\r\n\r\n  changeHandler = (event) => {\r\n    let color = event.target.value;\r\n\r\n    AppSettingsService.applyClass(document.body, AppSettingsService.textColors, color);\r\n    AppSettingsService.persistSetting(\"textColor\", color);\r\n\r\n    this.setState({\r\n      selected: color\r\n    })\r\n    this.props.triggerRender();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form>\r\n        <div className='form-group'>\r\n          <label>Select text color:</label>\r\n          <select\r\n            className={this.props.styles}\r\n            value={this.state.selected}\r\n            onChange={this.changeHandler}>\r\n            {AppSettingsService.textColors.map(\r\n              (color) => {\r\n                return (<option key={color.name} value={color.class}>{color.name}</option>);\r\n              }\r\n            )}\r\n          </select>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport AppSettingsService from './AppSettingsService';\r\n\r\nexport default class SelectBackgroundColor extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      selected: AppSettingsService.getSetting(\"bgColor\") || AppSettingsService.bgColors[0]\r\n    }\r\n  }\r\n\r\n  changeHandler = (event) => {\r\n    let color = event.target.value;\r\n\r\n    AppSettingsService.applyClass(document.body, AppSettingsService.bgColors, color);\r\n    AppSettingsService.persistSetting(\"bgColor\", color);\r\n\r\n    this.setState({\r\n      selected: color\r\n    })\r\n    this.props.triggerRender();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form>\r\n        <div className='form-group'>\r\n          <label>Select background color:</label>\r\n          <select className={this.props.styles}\r\n            value={this.state.selected}\r\n            onChange={this.changeHandler}>\r\n            {AppSettingsService.bgColors.map(\r\n              (color) => {\r\n                return (<option key={color.name} value={color.class}>{color.name}</option>);\r\n              }\r\n            )}\r\n          </select>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport LocationPicker from \"react-leaflet-location-picker\";\r\nimport { withRouter, NavLink } from 'react-router-dom'\r\nimport \"react-table/react-table.css\"\r\nimport ReactTable from \"react-table\";\r\nimport Checkbox from '../settings/Checkbox';\r\nimport Info from \"../building-blocks/Info\";\r\nimport PicWrapper from \"../building-blocks/PicWrapper\";\r\nimport AjaxService from '../services/AjaxService';\r\nimport store from '../store';\r\nimport Const from '../services/Constants';\r\nimport SelectDistanceFilter from './SelectDistanceFilter';\r\nimport SelectMinAgeFilter from './SelectMinAgeFilter';\r\nimport SelectMaxAgeFilter from './SelectMaxAgeFilter';\r\n\r\n\r\nimport PollService from '../services/PollService';\r\n\r\nimport SelectPollInterval from '../settings/SelectPollInterval';\r\nimport AppSettingsService from '../settings/AppSettingsService';\r\nimport SelectTextColor from '../settings/SelectTextColor';\r\nimport SelectBackgroundColor from '../settings/SelectBackgroundColor';\r\nimport CashService from '../services/CashService';\r\n\r\n\r\nclass UserView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      styles: AppSettingsService.getInputStyleClasses(),\r\n      isToShowPhotos: AppSettingsService.isToShowPhotos,\r\n\r\n      profile: this.props?.data?.profile?.data,\r\n      hits: [],\r\n      error: null,\r\n      distanceFilter: null,\r\n      ageFilterMax: null,\r\n      ageFilterMin: null,\r\n      discoverable: false,\r\n      isButtonDisabled: false\r\n    };\r\n    //this.isButtonDisabled = false;\r\n    this.isLoading = false;\r\n  }\r\n\r\n  saveProfile = () => {\r\n    let data = {\r\n      age_filter_max: this.state.ageFilterMax,\r\n      age_filter_min: this.state.ageFilterMin,\r\n      distance_filter: this.state.distanceFilter,\r\n      discoverable: this.state.discoverable\r\n    }\r\n    AjaxService.doPost(Const.URLS.PROFILE, data, {})\r\n  }\r\n\r\n  disableSaveButton = () => {\r\n    if (this.state.ageFilterMax < this.state.ageFilterMin) {\r\n      this.setState({ isButtonDisabled: true })\r\n      return;\r\n    }\r\n    this.setState({ isButtonDisabled: false })\r\n  }\r\n\r\n  getProfile = () => {\r\n    this.isLoading = true\r\n    let promise = AjaxService.doGet(Const.URLS.PROFILE, {})\r\n    promise.then((data) => {\r\n      if (!data?.data) return;\r\n\r\n      store.addToStore('profile', data);\r\n      this.setState({\r\n        distanceFilter: data.data.distance_filter,\r\n        ageFilterMax: data.data.age_filter_max,\r\n        ageFilterMin: data.data.age_filter_min,\r\n        discoverable: data.data.discoverable,\r\n        profile: data.data\r\n      }, () => { this.isLoading = false })\r\n    }).catch((e) => {\r\n      console.error(e);\r\n      this.isLoading = false\r\n    })\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (this.isLoading) {\r\n      return;\r\n    }\r\n    if (!!store?.profile && CashService.isMobile()) {\r\n      return;\r\n    }\r\n    this.getProfile();\r\n  }\r\n\r\n  changeState = (obj) => {\r\n    this.setState(obj, () => { this.disableSaveButton() });\r\n  }\r\n\r\n  toggleShowProfile = (event) => {\r\n    this.setState({\r\n      discoverable: event?.target?.checked\r\n    })\r\n  }\r\n\r\n  onSelectPollInterval = (val) => {\r\n    PollService.startUpdatePoll(val);\r\n    this.setState({\r\n      pollInterval: val\r\n    })\r\n  }\r\n\r\n  triggerRender = () => {\r\n    this.setState({\r\n      styles: AppSettingsService.getInputStyleClasses()\r\n    })\r\n  }\r\n\r\n  toggleShowPicsCheckbox = (event) => {\r\n    AppSettingsService.isToShowPhotos = event.target.checked;\r\n    this.setState({\r\n      isToShowPhotos: AppSettingsService.isToShowPhotos\r\n    })\r\n  }\r\n\r\n  goChat = () => {\r\n    this.props.history.push({\r\n      pathname: '/edit-bio',\r\n      state: { data: {} }\r\n    })\r\n  }\r\n\r\n  render() {\r\n    var profile = this.state?.profile\r\n    if (!profile) {\r\n      return (\r\n        <div></div>\r\n      )\r\n    }\r\n\r\n    let pos = profile?.pos ? [profile?.pos?.lat, profile?.pos?.lon] : [0, 0];\r\n\r\n    let postLocation = (args) => {\r\n      let newMsgObj = {\r\n        lat: args[0],\r\n        lon: args[1]\r\n      }\r\n      AjaxService.doPost(Const.URLS.SEND_LOCATION, newMsgObj, {})\r\n    }\r\n\r\n    let Btn = (props) => (\r\n      <div>\r\n        <NavLink exact activeClassName=\"active\" to={props.to}>\r\n          <button type=\"button\" className=\"btn btn-primary\">\r\n            {props.label}\r\n          </button>\r\n        </NavLink>\r\n      </div>\r\n    )\r\n\r\n    let UserData = () => {\r\n      return (\r\n        <div>\r\n          <Info person={profile} />\r\n          <button type=\"button\" className=\"btn btn-primary\" onClick={this.goChat}> Edit bio </button>\r\n          <br />\r\n          <SelectDistanceFilter initialRadius={this.state.distanceFilter} parentObject={this} />\r\n          <SelectMinAgeFilter ageFilterMin={this.state.ageFilterMin} parentObject={this} />\r\n          <SelectMaxAgeFilter ageFilterMax={this.state.ageFilterMax} parentObject={this} />\r\n          <Checkbox label=\"public profile\" condition={this.state.discoverable} changeHandler={this.toggleShowProfile} />\r\n          <br />\r\n          <button type=\"button\" className=\"btn btn-primary\" disabled={this.state.isButtonDisabled} onClick={this.saveProfile}> Save </button>\r\n          <br />\r\n          <br />\r\n          <div>\r\n            <p />\r\n            <p />\r\n            <SelectPollInterval styles={this.state.styles} onSelectPollInterval={this.onSelectPollInterval} />\r\n            <SelectBackgroundColor styles={this.state.styles} triggerRender={this.triggerRender} />\r\n            <SelectTextColor styles={this.state.styles} triggerRender={this.triggerRender} />\r\n            <Checkbox label=\"show photos\" condition={this.state.isToShowPhotos} changeHandler={this.toggleShowPicsCheckbox} />\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    let MobileButttons = () => {\r\n      return (\r\n        <div className=\"text-center\">\r\n          <div className=\"btn-group\">\r\n            <button type=\"button\" className=\"btn btn-primary\" onClick={this.getProfile}>  </button>\r\n            <Btn to=\"/pal-requests\" label=\"\" />\r\n            <Btn to=\"/notes\" label=\"\" />\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    let person = [{\r\n      image: (<PicWrapper photos={profile.photos} name={profile.name} />),\r\n      info: (<UserData />)\r\n    }]\r\n\r\n    let present = [\r\n      {\r\n        columns: [\r\n          {\r\n            Header: \"Photos\",\r\n            accessor: \"image\"\r\n          },\r\n          {\r\n            Header: \"Info\",\r\n            accessor: \"info\"\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n\r\n    let pointVals = [pos];\r\n    const pointMode = {\r\n      banner: false,\r\n      control: {\r\n        values: pointVals,\r\n        onClick: point => {\r\n          pointVals = [point]\r\n          pointMode.control.values = [point];\r\n          postLocation(point);\r\n        },\r\n        //  onRemove: point => { }\r\n      }\r\n    };\r\n\r\n    const options = {\r\n      bindMap: true,\r\n      startPort: \"default\",\r\n      overlayAll: true,\r\n      showControls: false,\r\n      showInputs: false,\r\n      useDynamic: true,\r\n      pointMode: pointMode,\r\n      precision: 6\r\n    };\r\n\r\n    return (\r\n      <div>\r\n        {CashService.isMobile() ? (<MobileButttons />) : null}\r\n        <br />\r\n        <p />\r\n        <ReactTable\r\n          data={person}\r\n          columns={present}\r\n          sortable={false}\r\n          defaultPageSize={1}\r\n          showPagination={false}\r\n        />\r\n        <br />\r\n        <LocationPicker {...options} />\r\n        <br />\r\n        <span className=\"float-right\"> ver: {Const.VERSION}</span>\r\n        <br />\r\n        <p />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(UserView);","import React from 'react';\r\nimport { withRouter } from 'react-router-dom'\r\nimport \"react-table/react-table.css\"\r\nimport AjaxService from '../services/AjaxService';\r\nimport Const from '../services/Constants';\r\nimport AppSettingsService from '../settings/AppSettingsService';\r\n\r\nclass EditBio extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      value: props?.data?.profile?.data?.bio || ''\r\n    }\r\n    this.getStyles = AppSettingsService.getInputStyleClasses;\r\n  }\r\n\r\n  goToFriendsView = () => {\r\n    this.props.history.push('/pals');\r\n  }\r\n\r\n  saveProfile = () => {\r\n    let data = {\r\n      'json': JSON.stringify({\r\n        user: { bio: this.state.value }\r\n      })\r\n    }\r\n    let promise = AjaxService.doPost(Const.URLS.BASE_URL + \"v2/profile\", data, {})\r\n\r\n    promise.then(() => {\r\n      this.goToFriendsView();\r\n    }).catch((e) => {\r\n      console.error(e);\r\n    })\r\n  }\r\n\r\n  onChange = (e) => {\r\n    var elem = e.srcElement || e.target;\r\n    this.setState({ value: elem.value })\r\n  }\r\n\r\n  render() {\r\n    let inputProps = {\r\n      value: this.state.value,\r\n      onChange: this.onChange,\r\n      className: this.getStyles()\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <br></br>\r\n        <input {...inputProps} type=\"text\" />\r\n        <br></br>\r\n        <button type=\"button\" className=\"btn btn-primary\" onClick={this.saveProfile}> Save </button>\r\n        <button type=\"button\" className=\"btn btn-danger ml-2 float-right\" onClick={this.goToFriendsView}> Cancel </button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(EditBio);","import React from 'react';\r\nimport Const from './Constants';\r\nimport AjaxService from './AjaxService';\r\n\r\nclass MatchDecoratorService extends React.Component {\r\n\r\n  getUserData = (match, callbackFunc) => {\r\n    \r\n    let userId = match?.person?._id;\r\n    let person = match.person || {};\r\n    let promise = AjaxService.doGet(Const.URLS.USER + userId, {});\r\n    promise.then((data) => {\r\n\r\n      let user = data?.data?.results;\r\n      match.user = user;\r\n      \r\n      person.distance_mi = user?.distance_mi;\r\n      person.name = user?.name || person?.name\r\n      person.birth_date = user?.birth_date || person?.birth_date\r\n      person.bio = user?.bio || person?.bio\r\n      person.jobs = user?.jobs || person?.jobs\r\n      person.schools = user?.schools || person.schools\r\n      let posInfo = {city:{name: user?.city?.name }, \r\n          country:{name: user?.city?.region }};\r\n      person.pos_info = person?.pos_info || posInfo;\r\n      person.interests = user?.user_interests?.selected_interests || person?.interests\r\n      person.sexuality = user?.sexual_orientations || person?.sexuality\r\n\r\n      callbackFunc(match);\r\n    }).catch((e) => {\r\n      console.error(e);\r\n      person.error = e\r\n      callbackFunc(match);\r\n    })\r\n  }\r\n\r\n}\r\nexport default new MatchDecoratorService();\r\n","import React from 'react';\r\n\r\nclass OnePicWrapper extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      imgSrc: props.src\r\n    };\r\n    this.condition = props.condition;\r\n    this.changeHandler = props.changeHandler;\r\n    this.match = props.match;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n  }\r\n  componentDidMount() {\r\n  }\r\n\r\n  doClick = (e) => {\r\n    this.changeHandler(e, this.match);\r\n  }\r\n\r\n  render() {\r\n    if (this.condition) {\r\n      return (\r\n        <div className=\"container-fluid px-0\">\r\n          <img onClick={this.doClick} src={this.state.imgSrc} alt=\"new\" className='img-fluid w-100' />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div onClick={this.doClick}>\r\n          <label className=\"text-center\">{this.match.person.name}</label>\r\n        </div>\r\n      );\r\n    }\r\n\r\n  }\r\n}\r\nexport default OnePicWrapper;\r\n","import React from 'react';\r\nimport store from '../store';\r\nimport AppSettingsService from '../settings/AppSettingsService';\r\nimport MatchDecoratorService from '../services/MatchDecoratorService';\r\nimport \"react-table/react-table.css\";\r\nimport OnePicWrapper from '../building-blocks/OnePicWrapper';\r\nimport ReactTable from \"react-table\";\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nclass Friends extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showUser: false,\r\n      isVisible: false,\r\n      msgMatches: [],\r\n      sortingFunc: this.sortByLastActivityDate\r\n    };\r\n  }\r\n\r\n  sortByLastActivityDate = (a, b) => {\r\n    let timeA = new Date(a.last_activity_date).getTime();\r\n    let timeB = new Date(b.last_activity_date).getTime();\r\n    return timeB - timeA;\r\n  }\r\n\r\n  applySorting = (arrToBeSorted, sortingFunc) => {\r\n    try {\r\n      arrToBeSorted.sort(sortingFunc);\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n    return arrToBeSorted;\r\n  }\r\n\r\n  getUserData = (event, match) => {\r\n    let clBack = (match) => {\r\n      this.props.history.push({\r\n        pathname: '/friend',\r\n        state: { args: match }\r\n      })\r\n    }\r\n    MatchDecoratorService.getUserData(match, clBack);\r\n  }\r\n\r\n  render() {\r\n    let dt = store.getStore();\r\n\r\n    let friends = dt.update.data.matches;\r\n\r\n    this.applySorting(friends, this.state.sortingFunc);\r\n\r\n    let persons = friends.map(match => {\r\n      let prsn = match.person\r\n      let obj;\r\n      if (prsn) {\r\n        let picProps = {\r\n          condition: AppSettingsService.isToShowPhotos,\r\n          src: prsn.photos[0].url,\r\n          match: match,\r\n          changeHandler: this.getUserData\r\n        }\r\n      obj = {\r\n        firstName: prsn.name,\r\n        lastName: prsn.birth_date,\r\n        image: (<OnePicWrapper { ...picProps}/>)\r\n      }\r\n    }\r\n      return { ...obj };\r\n    });\r\n\r\n    const present = [\r\n      {\r\n        columns: [\r\n          {\r\n            Header: \"Image\",\r\n            accessor: \"image\"\r\n          },\r\n          {\r\n            Header: \"First Name\",\r\n            accessor: \"firstName\"\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n          <ReactTable className=\"-striped -highlight\"\r\n            data={persons}\r\n            columns={present}\r\n            defaultPageSize={persons.length}\r\n            pageSize={persons.length}\r\n            sortable={false}\r\n            showPagination={false}\r\n          />\r\n          <br />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(Friends);","import React from 'react'\r\nimport { Link } from \"react-router-dom\";\r\nimport PropTypes from 'prop-types'\r\n\r\nBtnLink.propTypes = {\r\n    label: PropTypes.string,\r\n    data: PropTypes.object,\r\n    pathname: PropTypes.string\r\n};\r\n\r\nfunction BtnLink(props) {\r\n    return (\r\n        <div>\r\n            <Link to={{ pathname: props.pathname, state: { data: props.data } }}>\r\n                <button type=\"button\" className=\"btn btn-primary\">\r\n                    {props.label}\r\n                </button>\r\n            </Link>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BtnLink\r\n","import React from 'react';\r\nimport \"react-table/react-table.css\"\r\nimport ReactTable from \"react-table\";\r\nimport BtnLink from \"../building-blocks/BtnLink\";\r\nimport Info from \"../building-blocks/Info\";\r\nimport NotesService from '../notes/NotesService';\r\nimport PicWrapper from \"../building-blocks/PicWrapper\";\r\nimport CashService from '../services/CashService';\r\nimport AjaxService from '../services/AjaxService';\r\nimport Const from '../services/Constants';\r\n\r\nclass OneFriendView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.allBookmarks = null;\r\n  }\r\n\r\n  remove = (userId) => {\r\n    NotesService.removeBookmark(userId);\r\n  }\r\n\r\n  save = (userId) => {\r\n    NotesService.saveBookmark(userId);\r\n  }\r\n\r\n  deleteMatch = (matchId) => {\r\n    AjaxService.doDelete(Const.URLS.MATCH + matchId, {});\r\n  }\r\n\r\n  isBookmarked = (userId) => {\r\n    return this.allBookmarks[userId] !== undefined && this.allBookmarks[userId] !== null;\r\n  }\r\n\r\n  render() {\r\n    let { args } = this.props.location.state;\r\n\r\n    this.allBookmarks = CashService.getBookmarksAsObject();\r\n    let InfoWithButton = () => (\r\n      <div>\r\n        <BtnLink label=\"w\" data={args} pathname=\"/chat\" />\r\n        <div className=\"mt-1\">\r\n          {!this.isBookmarked(args.person._id) ? <button type=\"button\" className=\"btn btn-success\"\r\n            onClick={() => this.save(args.person._id)}> <span>s</span> </button> : null}\r\n\r\n          {this.isBookmarked(args.person._id) ? <button type=\"button\" className=\"btn btn-danger\"\r\n            onClick={() => this.remove(args.person._id)}> <span>s</span></button> : null}\r\n\r\n          <button type=\"button\" className=\"btn btn-danger ml-2 float-right\" onClick={() => this.deleteMatch(args.id)}>x</button>\r\n        </div>\r\n        <Info person={args.person} />\r\n      </div>\r\n    )\r\n    let person = [{\r\n      image: (<PicWrapper photos={args.person.photos} name={args.person.name} />),\r\n      info: (<InfoWithButton />)\r\n    }]\r\n\r\n    let present = [\r\n      {\r\n        columns: [\r\n          {\r\n            Header: \"Photos\",\r\n            accessor: \"image\"\r\n          },\r\n          {\r\n            Header: \"Info\",\r\n            accessor: \"info\"\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n          <ReactTable\r\n            data={person}\r\n            columns={present}\r\n            sortable={false}\r\n            defaultPageSize={1}\r\n            showPagination={false}\r\n          />\r\n          <br />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default OneFriendView;","import React from 'react';\r\nimport \"react-table/react-table.css\"\r\nimport ReactTable from \"react-table\";\r\nimport AjaxService from '../services/AjaxService'\r\nimport Const from '../services/Constants';\r\nimport PicWrapper from \"../building-blocks/PicWrapper\";\r\n\r\nclass FriendRequests extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      allFr: [],\r\n      hits: [],\r\n      isLoading: false,\r\n      error: null,\r\n    };\r\n    this.isMountedOk = true;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.isMountedOk = true;\r\n    this.getFriendRequests();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.isMountedOk = false;\r\n  }\r\n\r\n  getFriendRequests = () => {\r\n    let promise = AjaxService.doGet(Const.URLS.FAST_MATCH, {})\r\n    promise.then((data) => {\r\n      if (!this.isMountedOk || !data?.data?.data?.results) {\r\n        return;\r\n      }\r\n\r\n      this.setState({\r\n        allFr: data.data.data.results\r\n      })\r\n    }).catch((e) => {\r\n      console.log(e);\r\n    })\r\n  }\r\n\r\n  render() {\r\n    let Info = args => <div className=\"text-justify text-wrap\"> {args.info} </div>;\r\n    let Pic = args => (<PicWrapper photos={args.photos} />);\r\n\r\n    let allFr = this.state.allFr;\r\n\r\n    let persons = allFr.map(one => {\r\n      let isActiveRecently = one?.user?.recently_active ? \"\" : \"\"\r\n      let obj = {\r\n        info: (<Info info={isActiveRecently} />),\r\n        image: (<Pic photos={one.user.photos} />)\r\n      }\r\n      return { ...obj };\r\n    });\r\n\r\n    let present = [\r\n      {\r\n        columns: [\r\n          {\r\n            Header: \"Photos\",\r\n            accessor: \"image\"\r\n          },\r\n           {\r\n             Header: \"Recently Active\",\r\n             accessor: \"info\"\r\n           }\r\n        ]\r\n      }\r\n    ]\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"text-center p-1 \">\r\n        </div>\r\n        <div>\r\n          <ReactTable className=\"-striped -highlight\"\r\n            data={persons}\r\n            columns={present}\r\n            sortable={false}\r\n            defaultPageSize={persons.length}\r\n            pageSize={persons.length}\r\n            showPagination={false}\r\n            style={{\r\n              width: '100%',\r\n              height: '30%',\r\n            }}\r\n          />\r\n          <br />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default FriendRequests;","import React from 'react';\r\nimport \"react-table/react-table.css\"\r\nimport ReactTable from \"react-table\";\r\nimport AjaxService from '../services/AjaxService';\r\nimport NotesService from '../notes/NotesService';\r\nimport CashService from '../services/CashService';\r\nimport Const from '../services/Constants';\r\nimport BeanContextAware from '../services/BeanContextAware';\r\nimport PicWrapper from \"../building-blocks/PicWrapper\";\r\nimport BtnLink from \"../building-blocks/BtnLink\";\r\nimport Info from \"../building-blocks/Info\";\r\nimport FriendRequests from './FriendRequests';\r\n\r\nclass MoreFriends extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      beanId: props.beanId,\r\n      allFr: []\r\n    };\r\n    this.friendRequestPicIds = \"\";\r\n    this.isMountedOk = true;\r\n    this.allBookmarks = null;\r\n  }\r\n\r\n  getBookmarksAsObject = () => {\r\n    this.allBookmarks = CashService.getBookmarksAsObject();\r\n  }\r\n\r\n  componentDidMount() {\r\n    BeanContextAware.add(this);\r\n    this.getFriendRequests();\r\n    this.isMountedOk = true;\r\n    let header = BeanContextAware.get('header1');\r\n    if (header) {\r\n      header.showMoreFriendsRefreshButton();\r\n    }\r\n  }\r\n\r\n\r\n  getFriendRequests = () => {\r\n    let promise = AjaxService.doGet(Const.URLS.FAST_MATCH, {})\r\n    promise.then((data) => {\r\n      if (!data?.data?.data?.results) {\r\n        return;\r\n      }\r\n      let picIds = \"\";\r\n      data.data.data.results.forEach(like => { picIds = picIds + like.user.photos[0].id + \" \" })\r\n      this.friendRequestPicIds = picIds;\r\n\r\n      this.getNewFriends(this.getBookmarksAsObject);\r\n\r\n    }).catch((e) => {\r\n      console.log(e);\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    BeanContextAware.remove(this);\r\n    this.isMountedOk = false;\r\n    let header = BeanContextAware.get('header1');\r\n    if (header) {\r\n      header.hideMoreFriendsRefreshButton()\r\n    }\r\n  }\r\n\r\n  getNewFriends = (callBack) => {\r\n    let promise = AjaxService.doGet(Const.URLS.NEW_FRIENDS, {})\r\n    promise.then((data) => {\r\n      let allFr = data?.data?.results;\r\n      if (!this.isMountedOk) {\r\n        return;\r\n      }\r\n      callBack()\r\n      this.setState({ allFr: allFr });\r\n    }).catch((e) => {\r\n      console.log(e);\r\n    })\r\n  }\r\n\r\n  pass = (targetId) => {\r\n    let phoneNumber = CashService.getPhone();\r\n    if (!phoneNumber) {\r\n      throw new Error(\"CashService[Const.PHONE_HEADER_NAME] is not allowed to be \" + phoneNumber);\r\n    }\r\n    let promise = AjaxService.doGet(Const.URLS.PASS + phoneNumber + \"/\" + targetId, {})\r\n    promise.then((data) => {\r\n    }).catch((e) => {\r\n      console.log(e);\r\n    })\r\n  }\r\n\r\n  like = (targetId) => {\r\n    let phoneNumber = CashService.getPhone();\r\n    if (!phoneNumber) {\r\n      throw new Error(\"CashService[Const.PHONE_HEADER_NAME] is not allowed to be \" + phoneNumber);\r\n    }\r\n    let promise = AjaxService.doGet(Const.URLS.LIKE + phoneNumber + \"/\" + targetId, {})\r\n    promise.then((data) => {\r\n    }).catch((e) => {\r\n      console.log(e);\r\n    })\r\n  }\r\n\r\n  isBookmarked = (userId) => {\r\n    return this.allBookmarks[userId] !== undefined && this.allBookmarks[userId] !== null;\r\n  }\r\n\r\n  isLiked = (photos) => {\r\n    for (let index = 0; index < photos.length; index++) {\r\n      const pic = photos[index];\r\n      if (this.friendRequestPicIds.indexOf(pic.id) != -1) {\r\n        return true\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    let InfoWrapper = (args) => {\r\n      let { person } = args;\r\n      let isBookmarked = this.isBookmarked(person?._id);\r\n      return (\r\n        <div className=\"text-justify text-wrap\">\r\n          <div>\r\n            <button className=\"btn btn-success\" onClick={() => this.like(person._id)}>y</button>\r\n            <button className=\"btn btn-danger\" onClick={() => this.pass(person._id)}>n</button>\r\n\r\n            {!isBookmarked ? <button className=\"btn btn-primary float-right ml-1\"\r\n              onClick={() => NotesService.saveBookmark(person?._id)}>s</button> : null}\r\n            {isBookmarked ? <button className=\"btn btn-danger float-right ml-1\"\r\n              onClick={() => NotesService.removeBookmark(person?._id)}>s</button> : null}\r\n          </div>\r\n          <Info person={person} />\r\n        </div>\r\n      )\r\n    }\r\n\r\n    let Pic = args => (\r\n      <div className=\"d\">\r\n        <button hidden={!args.isLiked} className=\"btn position-absolute btn-danger\"></button>\r\n        <PicWrapper photos={args.photos} name={args.name} />\r\n      </div>)\r\n\r\n    let allFr = this.state.allFr;\r\n\r\n    let persons = allFr.map(one => {\r\n      one.isLiked = this.isLiked(one.photos)\r\n      let obj = {\r\n        info: (<InfoWrapper person={one} />),\r\n        image: (<Pic photos={one.photos} name={one.name} isLiked={this.isLiked(one.photos)} />)\r\n      }\r\n      return { ...obj };\r\n    });\r\n\r\n    let present = [\r\n      {\r\n        columns: [\r\n          {\r\n            Header: \"Photos\",\r\n            accessor: \"image\"\r\n          },\r\n          {\r\n            Header: \"Info\",\r\n            accessor: \"info\"\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n          <ReactTable className=\"-striped -highlight\"\r\n            data={persons}\r\n            columns={present}\r\n            sortable={false}\r\n            defaultPageSize={persons.length}\r\n            pageSize={persons.length}\r\n            showPagination={false}\r\n          />\r\n          <br />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default MoreFriends;","import React from 'react';\r\nimport PollService from '../services/PollService';\r\nimport Const from '../services/Constants';\r\nimport SelectPollInterval from './SelectPollInterval';\r\nimport AppSettingsService from './AppSettingsService';\r\nimport SelectTextColor from './SelectTextColor';\r\nimport SelectBackgroundColor from './SelectBackgroundColor';\r\nimport Checkbox from './Checkbox';\r\n\r\nclass AppSettings extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      styles: AppSettingsService.getInputStyleClasses(),\r\n      isToShowPhotos: AppSettingsService.isToShowPhotos\r\n    };\r\n  }\r\n\r\n  onSelectPollInterval = (val) => {\r\n    PollService.startUpdatePoll(val);\r\n    this.setState({\r\n      pollInterval: val\r\n    })\r\n  }\r\n\r\n  triggerRender = () => {\r\n    this.setState({\r\n      styles: AppSettingsService.getInputStyleClasses()\r\n    })\r\n  }\r\n\r\n  toggleShowPicsCheckbox = (event) => { \r\n    AppSettingsService.isToShowPhotos = event.target.checked;\r\n    this.setState({\r\n      isToShowPhotos: AppSettingsService.isToShowPhotos\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <span className=\"float-right\"> ver: {Const.VERSION}</span> \r\n        <p/>\r\n        <SelectPollInterval styles={this.state.styles} onSelectPollInterval={this.onSelectPollInterval} />\r\n        <SelectBackgroundColor styles={this.state.styles} triggerRender={this.triggerRender} />\r\n        <SelectTextColor styles={this.state.styles} triggerRender={this.triggerRender} />\r\n        <Checkbox label=\"show photos\" condition={this.state.isToShowPhotos} changeHandler={this.toggleShowPicsCheckbox} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default AppSettings;","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport BeanContextAware from '../services/BeanContextAware';\r\nimport CashService from '../services/CashService';\r\nimport store from '../store';\r\nimport MatchDecoratorService from '../services/MatchDecoratorService';\r\nimport { withRouter } from 'react-router-dom';\r\nimport PollService from \"../services/PollService\";\r\n\r\nclass Header extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      beanId: props.beanId,\r\n      showUser: false,\r\n      isVisible: false,\r\n      isVisibleMoreFriendsTab: false,\r\n      msgMatches: []\r\n    };\r\n    this.initialTitle = document.title;\r\n  }\r\n\r\n  changeState = (obj) => {\r\n    this.setState(obj);\r\n  }\r\n\r\n  addMsgMatch = (mtch) => {\r\n    var pos = this.findInMsgMatches(mtch);\r\n    if (pos > -1) { // if found - do not add it again\r\n      return;\r\n    }\r\n    let msgMatches = this.state.msgMatches;\r\n    this.state.msgMatches.push(mtch);\r\n    this.setState({\r\n      msgMatches: msgMatches\r\n    })\r\n    this.toggleFlashTabTitle();\r\n  }\r\n\r\n  findInMsgMatches = (mtch) => {\r\n    let msgMatches = this.state.msgMatches\r\n    for (var i = 0, len = msgMatches.length; i < len; i++) {\r\n      if (msgMatches[i].id === mtch.id)\r\n        return i;\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  removeMsgMatch = (mtch) => {\r\n    var pos = this.findInMsgMatches(mtch);\r\n    if (pos > -1) {\r\n      let msgMatches = this.state.msgMatches\r\n      msgMatches.splice(pos, 1);\r\n      this.setState(\r\n        { msgMatches: msgMatches },\r\n        () => this.toggleFlashTabTitle()\r\n      )\r\n    }\r\n  }\r\n\r\n  showMoreFriendsRefreshButton = () => {\r\n    this.setState({ isVisibleMoreFriendsTab: true });\r\n  }\r\n\r\n  hideMoreFriendsRefreshButton = () => {\r\n    this.setState({ isVisibleMoreFriendsTab: false });\r\n  }\r\n\r\n  changeButtonVisibility = (obj) => {\r\n    this.setState(obj);\r\n  }\r\n\r\n  componentDidMount() {\r\n    BeanContextAware.add(this);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    BeanContextAware.remove(this);\r\n  }\r\n\r\n  toggleFlashTabTitle = () => {\r\n    if (this.state.msgMatches.length > 0 && !this.flashIntervalObj) {\r\n      this.startFlashTabTitle();\r\n    } else if (this.state.msgMatches.length === 0) {\r\n      this.stopFlashTabTitle();\r\n    }\r\n  }\r\n\r\n  startFlashTabTitle = () => {\r\n    this.flashIntervalObj = setInterval(\r\n      () => {\r\n        if (this.initialTitle === document.title) {\r\n          document.title = \"(\" + this.state.msgMatches.length + \") \" + this.initialTitle;\r\n        } else {\r\n          document.title = this.initialTitle;\r\n        }\r\n      }, 800\r\n    );\r\n  }\r\n\r\n  stopFlashTabTitle = () => {\r\n    clearTimeout(this.flashIntervalObj);\r\n    this.flashIntervalObj = null;\r\n    document.title = this.initialTitle;\r\n  }\r\n\r\n  getUserData = (match) => {\r\n    let clBack = (match) => {\r\n      this.props.history.push({\r\n        pathname: '/friend',\r\n        state: { args: match }\r\n      })\r\n    }\r\n    MatchDecoratorService.getUserData(match, clBack);\r\n  }\r\n\r\n  goChat = (match) => {\r\n    this.props.history.push({\r\n      pathname: '/chat',\r\n      state: { data: match }\r\n    })\r\n  }\r\n\r\n  getNewFriends = () => {\r\n    let moreFriends1 = BeanContextAware.get('moreFriends1');\r\n    if (this.state.isVisible && moreFriends1?.isMountedOk) {\r\n      moreFriends1.getNewFriends(moreFriends1.getBookmarksAsObject)\r\n    }\r\n  }\r\n\r\n  updateFromBackend = () => {\r\n    PollService.getUpdates();\r\n  }\r\n\r\n  render() {\r\n    let isMobile = CashService.isMobile();\r\n    let Btn = (props) => (\r\n      <div>\r\n        <NavLink exact activeClassName=\"active\" to={props.to}>\r\n          <button type=\"button\" className=\"btn btn-primary\">\r\n            {props.label}\r\n          </button>\r\n        </NavLink>\r\n      </div>\r\n    )\r\n    let isVisibleNewMsgs = this.state.msgMatches.length ? true : false;\r\n\r\n    let BtnBadge = (props) => {\r\n      let mtch = props.data;\r\n      if (!mtch.messages || mtch.messages.length === 0) {\r\n        return (\r\n          <div>\r\n            <button onClick={() => { this.removeMsgMatch(mtch); this.getUserData(mtch) }} className=\"btn btn-primary\" >\r\n              {this.state.msgMatches.length} </button>\r\n          </div>\r\n        )\r\n      } else {\r\n        return (\r\n          <div>\r\n            <button onClick={() => this.goChat(mtch)} className=\"btn btn-primary\" >\r\n              {this.state.msgMatches.length} </button>\r\n          </div>\r\n        )\r\n      }\r\n    }\r\n    let localUser = store?.profile?.data;\r\n    let username = CashService.getPhone() || \"N/A\";\r\n    let length = CashService.getPhone()?.length || 3;\r\n    username = username?.substring(length - 3)\r\n    return (\r\n      <nav>\r\n        <div className=\"text-center\">\r\n          <div className=\"btn-group\">\r\n            <Btn to=\"/user\" label={username} />\r\n            {this.state.isVisible ? <Btn to=\"/pals\" label=\"\" /> : null}\r\n            {this.state.isVisible ? (this.state.isVisibleMoreFriendsTab ?\r\n              <button type=\"button\" className=\"btn btn-primary\" onClick={this.getNewFriends}></button> :\r\n              <Btn to=\"/more-pals\" label=\"  \" />) : null}\r\n            {this.state.isVisible && !isMobile ? <Btn to=\"/pal-requests\" label=\"\" /> : null}\r\n            {(this.state.isVisible && !isMobile) ? <Btn to=\"/notes\" label=\"\" /> : null}\r\n            {isMobile ? <button type=\"button\" className=\"btn btn-primary\" onClick={this.updateFromBackend}></button> : null}\r\n            {(!this.state.isVisible && !!localUser) ? <Btn to=\"/settings\" label=\"\" /> : null}\r\n            {(isVisibleNewMsgs) ? <BtnBadge data={this.state.msgMatches[0]} /> : null}\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Header);","import React from 'react';\r\nimport store from '../store'\r\nimport Const from '../services/Constants';\r\nimport AjaxService from '../services/AjaxService';\r\nimport AppSettingsService from '../settings/AppSettingsService';\r\n\r\nclass EnterText extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            value: '',\r\n            store: props.data,\r\n            friendId: props.friendId,\r\n            triggerRenderFunc: props.triggerRenderFunc\r\n        }\r\n        this.getStyles = AppSettingsService.getInputStyleClasses;\r\n        const dummyEmojiInjector = (msg) => { return msg; }\r\n        this.injectEmoji = props.emojiInjectorFunc || dummyEmojiInjector;\r\n    }\r\n\r\n    createMessage = (match, store) => {\r\n        var dt = new Date();\r\n        return {\r\n            created_date: dt.toISOString(),\r\n            from: store.profile.data._id,\r\n            match_id: match.id,\r\n            message: this.state.value,\r\n            sent_date: dt.toISOString(),\r\n            timestamp: dt.getTime(),\r\n            to: match.person._id\r\n        }\r\n    }\r\n\r\n    onKeyPress = (e) => {\r\n        if (e.key !== 'Enter') {\r\n            return;\r\n        }\r\n\r\n        let matches = store?.update?.data?.matches || [];\r\n        for (let i = 0; i < matches.length; i++) {\r\n            const oneMatch = matches[i];\r\n\r\n            if (oneMatch.person._id === this.state.friendId) {\r\n                let newMsgObj = this.createMessage(oneMatch, this.state.store);\r\n                this.injectEmoji(newMsgObj);\r\n                AjaxService.doPost(Const.URLS.SEND_MESSAGE, newMsgObj, {});\r\n                matches[i].messages.push(newMsgObj);\r\n                this.state.triggerRenderFunc();\r\n                break;\r\n            }\r\n        }\r\n        this.setState({ value: '' });\r\n    }\r\n\r\n    onChange = (e) => {\r\n        var elem = e.srcElement || e.target;\r\n        this.setState({ value: elem.value })\r\n    }\r\n\r\n    render() {\r\n        let inputProps = {\r\n            placeholder: 'Write...',\r\n            value: this.state.value,\r\n            onChange: this.onChange,\r\n            className: this.getStyles() + \" d-inline w-75\",\r\n            onKeyPress: this.onKeyPress\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <input {...inputProps} type=\"text\" />\r\n                <button type=\"button\" className=\"d-inline btn btn-primary float-right\" onClick={() => this.onKeyPress({ key: 'Enter' })}> Send </button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default EnterText;\r\n","import React from 'react';\r\n\r\nclass MessageWrapper extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      let { msg } = this.props;\r\n      let msgDateObj = new Date(msg.timestamp);\r\n\r\n      let timeStr = msgDateObj.toLocaleTimeString();\r\n      let dateStr = msgDateObj.toLocaleDateString()\r\n      if (dateStr !== new Date().toLocaleDateString()) {\r\n        timeStr = timeStr + \",  \" + dateStr;\r\n      }\r\n\r\n      this.state = {\r\n          isSeen: msg.isSeen,\r\n          showDate: false,\r\n          date: timeStr\r\n      };\r\n    }\r\n\r\n    render() {\r\n        let { msg } = this.props;\r\n\r\n        let showHideDate = () => {\r\n            this.setState({ showDate: true });\r\n            setTimeout(\r\n                () => {\r\n                    this.setState({ showDate: false });\r\n                }, 5000);\r\n        }\r\n\r\n        return (\r\n            <div onClick={showHideDate}>\r\n                <p className=\"text-justify text-wrap\" >  {msg.message} </p>\r\n                {this.state.isSeen ? (<span className=\"badge badge-secondary text-justify text-wrap\">seen</span>) : null}\r\n                {this.state.showDate ? (<span className=\"badge small\" >  {this.state.date} </span>) : null}\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default MessageWrapper;\r\n","import React, { Component } from 'react'\r\nimport BeanContextAware from '../services/BeanContextAware'\r\n\r\nexport default class Select extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      numberMsgShown: 10,\r\n      getStyles: props.getStyles\r\n    }\r\n  }\r\n\r\n  changeHandler = (e) => {\r\n    let chat1 = BeanContextAware.get('chat1');\r\n      this.setState({\r\n        numberMsgShown: e.target.value\r\n      })\r\n      if (chat1) {\r\n        chat1.changeState({ numberMsgShown: parseInt(e.target.value)});\r\n      }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form>\r\n        <div className='form-group'>\r\n          <label>Number of messages to show:</label>\r\n          <select\r\n            className={this.state.getStyles()}\r\n            value={this.state.numberMsgShown}\r\n            onChange={this.changeHandler}>\r\n            <option value=\"10\">10</option>\r\n            <option value=\"20\">20</option>\r\n            <option value=\"50\">50</option>\r\n            <option value=\"70\">70</option>\r\n          </select>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","\r\nconst emojis = [\r\n    {text:':)', face:''},\r\n    {text:';)', face:''},\r\n    {text:':(', face:''},\r\n    {text:':*', face:''},\r\n    {text:':P', face:''},{text:':p', face:''},{text:':', face:''},{text:':', face:''},\r\n    {text:':D', face:''},{text:':', face:''},{text:':', face:''}\r\n];\r\n\r\nexport const injectEmojiFunction = (msg) => {\r\n    if (!msg?.message) {\r\n        return msg;\r\n    }\r\n \r\n    for (let i = 0; i < emojis.length; i++) {\r\n        let emo = emojis[i];\r\n        let foundAt = msg.message.indexOf(emo.text);\r\n        while (foundAt > -1) {\r\n            msg.message = msg.message.replace(emo.text, emo.face);\r\n            foundAt = msg.message.indexOf(emo.text);\r\n        }\r\n    }\r\n    return msg;\r\n}\r\n","import React from 'react';\r\nimport ReactTable from \"react-table\";\r\nimport { withRouter } from 'react-router-dom'\r\nimport store from '../store'\r\nimport EnterText from './enterText'\r\nimport MessageWrapper from './messageWrapper'\r\nimport BeanContextAware from '../services/BeanContextAware'\r\nimport Select from './Select'\r\nimport Const from '../services/Constants';\r\nimport AjaxService from '../services/AjaxService'\r\nimport AppSettingsService from '../settings/AppSettingsService';\r\nimport { injectEmojiFunction } from './CyrilicEmojiStrategy';\r\n\r\nclass Chat extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    let match = props.location.state.data;\r\n    let friendId = match.person._id;\r\n    let lastSeenMsg = match.seen ? match.seen.last_seen_msg_id : null;\r\n    this.state = {\r\n      lastSeenMsg: lastSeenMsg,\r\n      numberMsgShown: 10,\r\n      matchId: match.id,\r\n      store: store,\r\n      match: match,\r\n      friendId: friendId,\r\n      messages: match.messages\r\n    };\r\n    this.inputStyles = AppSettingsService.getInputStyleClasses;\r\n    this.isOnFocus = true;\r\n    this.isMountedOk = true;\r\n  }\r\n\r\n  onFocus = (ev) => {\r\n    this.isOnFocus = true;\r\n    this.deleteFromHeader();\r\n  }\r\n\r\n  onBlur = (ev) => {\r\n    this.isOnFocus = false;\r\n  }\r\n\r\n  componentDidMount() {\r\n    BeanContextAware.add(this);\r\n    window.addEventListener(\"focus\", this.onFocus);\r\n    window.addEventListener(\"blur\", this.onBlur);\r\n    this.isMountedOk = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    BeanContextAware.remove(this);\r\n    window.removeEventListener(\"focus\", this.onFocus);\r\n    window.removeEventListener(\"blur\", this.onBlur);\r\n    this.isMountedOk = false;\r\n  }\r\n\r\n  prepareMessages = (allMsgs, friendId, numberMsgShown) => {\r\n    let result = [];\r\n    result.length = numberMsgShown;\r\n\r\n    for (let ind = allMsgs.length - 1; 0 <= numberMsgShown; numberMsgShown-- , ind--) {\r\n\r\n      let msg = allMsgs[ind];\r\n\r\n      if (!msg) {\r\n        msg = {};\r\n      }\r\n\r\n      let transformedMsg = {};\r\n      result[numberMsgShown] = transformedMsg;\r\n\r\n      if (msg.from === friendId) {\r\n        transformedMsg.theirs = (<MessageWrapper msg={msg} />);\r\n      }\r\n      else {\r\n        transformedMsg.mine = (<MessageWrapper msg={msg} />);\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n\r\n  //call it to start render() in order to visualize the change\r\n  triggerRenderFunc = () => {\r\n    let match = store.getMatchById(this.state.match._id)\r\n    let lastSeenMsg = match.seen ? match.seen.last_seen_msg_id : null;\r\n    if (this.isMountedOk) {\r\n      this.setState({\r\n        lastSeenMsg: lastSeenMsg,\r\n        match: match,\r\n        messages: match.messages\r\n      })\r\n    }\r\n  }\r\n\r\n  changeState = (obj) => {\r\n    this.setState(obj)\r\n  }\r\n\r\n  sendSeen = (allMsgs) => {\r\n    if (!this.state.lastSeenMsg) {\r\n      console.log(\"empty value of 'lastSeenMsg'..\");\r\n    }\r\n\r\n    //clear notification for new friends, who have not send message:\r\n    if (!allMsgs || !allMsgs?.length) {\r\n      this.deleteFromHeader();\r\n      return;\r\n    }\r\n\r\n    for (let index = allMsgs.length - 1; 0 <= index; index--) {\r\n\r\n      let msgWrapped = allMsgs[index];\r\n\r\n      if (!msgWrapped || !msgWrapped.theirs) {\r\n        continue;\r\n      }\r\n      let msg = msgWrapped.theirs.props.msg;\r\n\r\n      if (msg._id !== this.state.lastSeenMsg) {\r\n        AjaxService.doGet(Const.URLS.SEND_SEEN + msg.match_id + \"/\" + msg._id, {});\r\n        let match = this.state.match;\r\n        if (match.seen) {\r\n          match.seen.last_seen_msg_id = msg._id;\r\n        }\r\n\r\n        this.deleteFromHeader();\r\n        return;\r\n      }\r\n      if (msgWrapped.theirs) {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  deleteFromHeader = () => {\r\n    let header = BeanContextAware.get('header1');\r\n    if (header && this.isOnFocus) {\r\n      header.removeMsgMatch(this.state.match);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const present = [\r\n      {\r\n        columns: [\r\n          {\r\n            Header: this.state.match.person.name,\r\n            accessor: \"theirs\"\r\n          },\r\n          {\r\n            Header: \"Me\",\r\n            accessor: \"mine\"\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n    var reorderedMessages = this.prepareMessages(this.state.messages, this.state.friendId, this.state.numberMsgShown);\r\n\r\n    this.sendSeen(reorderedMessages);\r\n\r\n    let inputProps = {\r\n      data: this.state.store,\r\n      friendId: this.state.match.person._id,\r\n      triggerRenderFunc: this.triggerRenderFunc,\r\n      emojiInjectorFunc: injectEmojiFunction\r\n    }\r\n\r\n    if (this.isMountedOk) {\r\n      return (\r\n        <div><Select getStyles={this.inputStyles} />\r\n          <div>\r\n            <ReactTable\r\n              data={reorderedMessages}\r\n              columns={present}\r\n              defaultPageSize={reorderedMessages.length}\r\n              pageSize={reorderedMessages.length}\r\n              showPagination={false}\r\n              bordered={false}\r\n              sortable={false}\r\n  \r\n            />\r\n            <div>\r\n              <EnterText {...inputProps} />\r\n            </div>\r\n            <br />\r\n          </div>\r\n        </div>\r\n      )\r\n    } \r\n    return (\r\n      <div>\r\n      </div>\r\n    )\r\n\r\n  }\r\n}\r\nexport default withRouter(Chat);\r\n","import React from 'react';\r\nimport \"react-table/react-table.css\"\r\nimport ReactTable from \"react-table\";\r\nimport Info from \"../building-blocks/Info\";\r\nimport PicWrapper from \"../building-blocks/PicWrapper\";\r\nimport NotesService from './NotesService';\r\nimport CashService from '../services/CashService';\r\nimport AjaxService from '../services/AjaxService';\r\nimport Const from '../services/Constants';\r\nimport MatchDecoratorService from '../services/MatchDecoratorService';\r\n\r\nclass Notes extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      match: null\r\n    };\r\n    this.index = 0;\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.allBookmarks = CashService.getBookmarksAsObject();\r\n    let all = CashService.getBookmarks();\r\n\r\n    let id = all[this.index]\r\n    if (!id) {\r\n      return;\r\n    }\r\n    let mtch = this.formDummyMatch(id);\r\n\r\n    MatchDecoratorService.getUserData(mtch, this.processUserData);\r\n  }\r\n\r\n  saveAllByPhone = function () {\r\n    NotesService.saveAllByPhone();\r\n  }\r\n\r\n  getOne = function () {\r\n    NotesService.getOne();\r\n  }\r\n\r\n  getBookmarks = function () {\r\n    NotesService.getBookmarks();\r\n  }\r\n\r\n  removeBookmark = function (userId) {\r\n    NotesService.removeBookmark(userId);\r\n    this.index--;\r\n  }\r\n\r\n  formDummyMatch(id) {\r\n    return {\r\n      person: { _id: id }\r\n    }\r\n  }\r\n\r\n  pass = (userId) => {\r\n    let promise = AjaxService.doGet(Const.URLS.PASS + userId, {})\r\n    promise.then((data) => {\r\n    }).catch((e) => {\r\n      console.log(e);\r\n    })\r\n  }\r\n\r\n  like = (userId) => {\r\n    let promise = AjaxService.doGet(Const.URLS.LIKE + userId, {})\r\n    promise.then((data) => { \r\n    }).catch((e) => {\r\n      console.log(e);\r\n    })\r\n  }\r\n\r\n  processUserData = (match) => {\r\n    if (!!match?.person?.error) {\r\n      try {\r\n        NotesService.removeBookmark(match?.person?._id);\r\n        this.match = null;\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    }\r\n    this.match = match;\r\n    this.setState({\r\n      match: match\r\n    })\r\n  }\r\n\r\n  get = (step) => {\r\n    let all = CashService.getBookmarks();\r\n\r\n    this.index = this.index + step;\r\n\r\n    if (this.index < 0) {\r\n      this.index = all.length - 1;\r\n    } else if (this.index > all.length - 1) {\r\n      this.index = 0;\r\n    }\r\n    \r\n    let id = all[this.index];\r\n\r\n    if (!id) {\r\n      console.error(\"'id' is \" + id);\r\n      return;\r\n    }\r\n    let mtch = this.formDummyMatch(id);\r\n    MatchDecoratorService.getUserData(mtch, this.processUserData);\r\n  }\r\n\r\n  isBookmarked = (userId) => {\r\n    return this.allBookmarks[userId] !== undefined && this.allBookmarks[userId] !== null;\r\n  }\r\n\r\n  render() {\r\n    if (!this.match) {\r\n      return (\r\n        <div>\r\n          <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.get(-1)}>  </button>\r\n          <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.get(1)}>  </button>\r\n        </div>\r\n      )\r\n    }\r\n    let match = this.match;\r\n\r\n    let InfoWithButton = () => {\r\n      let userId = match?.person?._id;\r\n      let isBookmarked = this.isBookmarked(userId);\r\n      return (\r\n\r\n        <div>\r\n          <div className=\"text-justify text-wrap\">\r\n            <button type=\"button\" className=\"btn btn-success\" onClick={() => this.like(userId)}>y</button>\r\n            <button type=\"button\" className=\"btn btn-danger\" onClick={() => this.pass(userId)}>n</button>\r\n\r\n            {!isBookmarked ? <button type=\"button\" className=\"btn btn-primary float-right ml-1\"\r\n              onClick={() => NotesService.saveBookmark(userId)}>s</button> : null}\r\n\r\n            {isBookmarked ? <button type=\"button\" className=\"btn btn-danger float-right ml-1\"\r\n              onClick={() => NotesService.removeBookmark(userId)}>s</button> : null}\r\n\r\n          </div>\r\n          <Info person={match?.person} />\r\n        </div>\r\n      )\r\n    }\r\n    let Pic = args => (<PicWrapper photos={args.photos} name={args.name} />);\r\n    let person = [{\r\n      image: (<Pic photos={match?.user?.photos} name={match?.user?.name} />),\r\n      info: (<InfoWithButton />)\r\n    }]\r\n\r\n    let present = [\r\n      {\r\n        columns: [\r\n          {\r\n            Header: \"Photos\",\r\n            accessor: \"image\"\r\n          },\r\n          {\r\n            Header: \"Info\",\r\n            accessor: \"info\"\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"text-justify text-wrap text-center float-center\">\r\n          <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.get(-1)}>  </button>\r\n          <button type=\"button\" disabled={true} className=\"btn btn-secondary\"> {this.index + 1} of {CashService.getBookmarks()?.length} </button>\r\n          <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.get(1)}>  </button>\r\n        </div>\r\n        <br />\r\n        <div>\r\n          <ReactTable\r\n            data={person}\r\n            columns={present}\r\n            sortable={false}\r\n            defaultPageSize={1}\r\n            showPagination={false}\r\n          />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default Notes;\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport CashService from './services/CashService';\r\nimport AppSettingsService from './settings/AppSettingsService';\r\nimport PollService from './services/PollService';\r\nimport NotesService from './notes/NotesService';\r\nimport Home from './Home';\r\nimport PhoneForm from './auth/PhoneForm';\r\nimport PhoneToken from './auth/PhoneToken';\r\nimport ConfirmCode from './auth/confirmCode';\r\nimport UserView from './userView/userView';\r\nimport EditBio from './userView/EditBio';\r\nimport Friends from './userView/friends';\r\nimport OneFriendView from './userView/OneFriendView';\r\nimport MoreFriends from './userView/MoreFriends';\r\nimport FriendRequests from './userView/FriendRequests';\r\nimport AppSettings from './settings/AppSettings';\r\nimport Header from './building-blocks/header';\r\nimport Chat from './chat/chat.js';\r\nimport Notes from './notes/Notes';\r\nimport store from './store';\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\n\r\n\r\nconst App = () => {\r\n  return (\r\n    <div className=\"container\" style={{ paddingTop: 10 }}>\r\n\r\n      <Router>\r\n        <Header beanId=\"header1\" />\r\n        <Switch>\r\n          < Route exact path=\"/\" component={Home} />\r\n          < Route path=\"/user\" render={() => <UserView data={store} />} />\r\n          < Route path=\"/edit-bio\" render={() => <EditBio data={store} />} />\r\n          < Route path=\"/phone\" component={PhoneForm} />\r\n          < Route path=\"/phone-token\" component={PhoneToken} />\r\n          < Route path=\"/friend\" component={OneFriendView} />\r\n          < Route path=\"/chat\" render={() => <Chat beanId=\"chat1\"/>} />\r\n          < Route path=\"/notes\" render={() => <Notes beanId=\"notes1\"/>} />\r\n          < Route path=\"/pals\" render={() => <Friends data={store.updates} />} />\r\n          < Route path=\"/more-pals\" render={() => <MoreFriends data={store.updates} beanId=\"moreFriends1\"/>} />\r\n          < Route path=\"/pal-requests\" render={() => <FriendRequests data={store.updates} />} />\r\n          < Route path=\"/settings\"render={() => <AppSettings beanId=\"appSettings1\"/>} />\r\n          < Route path=\"/confirm-token\" component={ConfirmCode} />\r\n          < Route path=\"*\" component={Home} />\r\n        </Switch>\r\n      </Router>\r\n    </div >\r\n  );\r\n};\r\n\r\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nReactDOM.render( <App/> , document.getElementById('root'));\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}